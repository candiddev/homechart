function W(t){return typeof t=="object"&&t!==null&&"error"in t}function _e(t,e){return console.groupCollapsed(`[ERROR] ${t}`),console.trace(),console.groupEnd(),{error:t,message:e===void 0?"":e}}const Mt={debug:t=>{}};var Al=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},ur="1.4.0",Ti=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function fl(t){var e=new Set([t]),r=new Set,n=t.match(Ti);if(!n)return function(){return!1};var a={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(a.prerelease!=null)return function(c){return c===t};function i(s){return r.add(s),!1}function o(s){return e.add(s),!0}return function(c){if(e.has(c))return!0;if(r.has(c))return!1;var h=c.match(Ti);if(!h)return i(c);var v={major:+h[1],minor:+h[2],patch:+h[3],prerelease:h[4]};return v.prerelease!=null||a.major!==v.major?i(c):a.major===0?a.minor===v.minor&&a.patch<=v.patch?o(c):i(c):a.minor<=v.minor?o(c):i(c)}}var hl=fl(ur),pl=ur.split(".")[0],nn=Symbol.for("opentelemetry.js.api."+pl),an=Al;function un(t,e,r,n){var a;n===void 0&&(n=!1);var i=an[nn]=(a=an[nn])!==null&&a!==void 0?a:{version:ur};if(!n&&i[t]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(o.stack||o.message),!1}if(i.version!==ur){var o=new Error("@opentelemetry/api: All API registration versions must match");return r.error(o.stack||o.message),!1}return i[t]=e,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+ur+"."),!0}function $t(t){var e,r,n=(e=an[nn])===null||e===void 0?void 0:e.version;if(!(!n||!hl(n)))return(r=an[nn])===null||r===void 0?void 0:r[t]}function cn(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+ur+".");var r=an[nn];r&&delete r[t]}var ml=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},gl=function(t,e,r){if(r||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},yl=function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return kr("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return kr("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return kr("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return kr("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return kr("verbose",this._namespace,e)},t}();function kr(t,e,r){var n=$t("diag");if(n)return r.unshift(e),n[t].apply(n,gl([],ml(r),!1))}var Ne;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(Ne||(Ne={}));function vl(t,e){t<Ne.NONE?t=Ne.NONE:t>Ne.ALL&&(t=Ne.ALL),e=e||{};function r(n,a){var i=e[n];return typeof i=="function"&&t>=a?i.bind(e):function(){}}return{error:r("error",Ne.ERROR),warn:r("warn",Ne.WARN),info:r("info",Ne.INFO),debug:r("debug",Ne.DEBUG),verbose:r("verbose",Ne.VERBOSE)}}var _l=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},bl=function(t,e,r){if(r||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},Sl="diag",mt=function(){function t(){function e(a){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=$t("diag");if(s)return s[a].apply(s,bl([],_l(i),!1))}}var r=this,n=function(a,i){var o,s,c;if(i===void 0&&(i={logLevel:Ne.INFO}),a===r){var h=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((o=h.stack)!==null&&o!==void 0?o:h.message),!1}typeof i=="number"&&(i={logLevel:i});var v=$t("diag"),y=vl((s=i.logLevel)!==null&&s!==void 0?s:Ne.INFO,a);if(v&&!i.suppressOverrideMessage){var E=(c=new Error().stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";v.warn("Current logger will be overwritten from "+E),y.warn("Current logger will overwrite one already registered from "+E)}return un("diag",y,r,!0)};r.setLogger=n,r.disable=function(){cn(Sl,r)},r.createComponentLogger=function(a){return new yl(a)},r.verbose=e("verbose"),r.debug=e("debug"),r.info=e("info"),r.warn=e("warn"),r.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}(),El=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},wl=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Il=function(){function t(e){this._entries=e?new Map(e):new Map}return t.prototype.getEntry=function(e){var r=this._entries.get(e);if(r)return Object.assign({},r)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var r=El(e,2),n=r[0],a=r[1];return[n,a]})},t.prototype.setEntry=function(e,r){var n=new t(this._entries);return n._entries.set(e,r),n},t.prototype.removeEntry=function(e){var r=new t(this._entries);return r._entries.delete(e),r},t.prototype.removeEntries=function(){for(var e,r,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var i=new t(this._entries);try{for(var o=wl(n),s=o.next();!s.done;s=o.next()){var c=s.value;i._entries.delete(c)}}catch(h){e={error:h}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return i},t.prototype.clear=function(){return new t},t}(),Cl=Symbol("BaggageEntryMetadata"),Tl=mt.instance();function Dl(t){return t===void 0&&(t={}),new Il(new Map(Object.entries(t)))}function Ol(t){return typeof t!="string"&&(Tl.error("Cannot create baggage metadata from unknown type: "+typeof t),t=""),{__TYPE__:Cl,toString:function(){return t}}}function ii(t){return Symbol.for(t)}var Rl=function(){function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,a){var i=new t(r._currentContext);return i._currentContext.set(n,a),i},r.deleteValue=function(n){var a=new t(r._currentContext);return a._currentContext.delete(n),a}}return t}(),tr=new Rl,Er=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pl=function(){function t(){}return t.prototype.createHistogram=function(e,r){return Ul},t.prototype.createCounter=function(e,r){return Hl},t.prototype.createUpDownCounter=function(e,r){return Vl},t.prototype.createObservableGauge=function(e,r){return Gl},t.prototype.createObservableCounter=function(e,r){return zl},t.prototype.createObservableUpDownCounter=function(e,r){return Fl},t.prototype.addBatchObservableCallback=function(e,r){},t.prototype.removeBatchObservableCallback=function(e){},t}(),oi=function(){function t(){}return t}(),kl=function(t){Er(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,n){},e}(oi),Nl=function(t){Er(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,n){},e}(oi),Ml=function(t){Er(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(r,n){},e}(oi),si=function(){function t(){}return t.prototype.addCallback=function(e){},t.prototype.removeCallback=function(e){},t}(),Ll=function(t){Er(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(si),Bl=function(t){Er(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(si),xl=function(t){Er(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(si),jl=new Pl,Hl=new kl,Ul=new Ml,Vl=new Nl,zl=new Ll,Gl=new Bl,Fl=new xl,Wl={get:function(t,e){if(t!=null)return t[e]},keys:function(t){return t==null?[]:Object.keys(t)}},$l={set:function(t,e,r){t!=null&&(t[e]=r)}},Kl=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},Yl=function(t,e,r){if(r||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},Ql=function(){function t(){}return t.prototype.active=function(){return tr},t.prototype.with=function(e,r,n){for(var a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return r.call.apply(r,Yl([n],Kl(a),!1))},t.prototype.bind=function(e,r){return r},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}(),Xl=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},Jl=function(t,e,r){if(r||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},ia="context",Zl=new Ql,Gn=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return un(ia,e,mt.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,r,n){for(var a,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return(a=this._getContextManager()).with.apply(a,Jl([e,r,n],Xl(i),!1))},t.prototype.bind=function(e,r){return this._getContextManager().bind(e,r)},t.prototype._getContextManager=function(){return $t(ia)||Zl},t.prototype.disable=function(){this._getContextManager().disable(),cn(ia,mt.instance())},t}(),gt;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(gt||(gt={}));var So="0000000000000000",Eo="00000000000000000000000000000000",wo={traceId:Eo,spanId:So,traceFlags:gt.NONE},jr=function(){function t(e){e===void 0&&(e=wo),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,r){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,r){},t}(),li=ii("OpenTelemetry Context Key SPAN");function ui(t){return t.getValue(li)||void 0}function ql(){return ui(Gn.getInstance().active())}function ci(t,e){return t.setValue(li,e)}function eu(t){return t.deleteValue(li)}function tu(t,e){return ci(t,new jr(e))}function Io(t){var e;return(e=ui(t))===null||e===void 0?void 0:e.spanContext()}var ru=/^([0-9a-f]{32})$/i,nu=/^[0-9a-f]{16}$/i;function Co(t){return ru.test(t)&&t!==Eo}function au(t){return nu.test(t)&&t!==So}function Fn(t){return Co(t.traceId)&&au(t.spanId)}function iu(t){return new jr(t)}var oa=Gn.getInstance(),To=function(){function t(){}return t.prototype.startSpan=function(e,r,n){n===void 0&&(n=oa.active());var a=Boolean(r==null?void 0:r.root);if(a)return new jr;var i=n&&Io(n);return ou(i)&&Fn(i)?new jr(i):new jr},t.prototype.startActiveSpan=function(e,r,n,a){var i,o,s;if(!(arguments.length<2)){arguments.length===2?s=r:arguments.length===3?(i=r,s=n):(i=r,o=n,s=a);var c=o??oa.active(),h=this.startSpan(e,i,c),v=ci(c,h);return oa.with(v,s,void 0,h)}},t}();function ou(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var su=new To,lu=function(){function t(e,r,n,a){this._provider=e,this.name=r,this.version=n,this.options=a}return t.prototype.startSpan=function(e,r,n){return this._getTracer().startSpan(e,r,n)},t.prototype.startActiveSpan=function(e,r,n,a){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):su},t}(),uu=function(){function t(){}return t.prototype.getTracer=function(e,r,n){return new To},t}(),cu=new uu,Di=function(){function t(){}return t.prototype.getTracer=function(e,r,n){var a;return(a=this.getDelegateTracer(e,r,n))!==null&&a!==void 0?a:new lu(this,e,r,n)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:cu},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,r,n){var a;return(a=this._delegate)===null||a===void 0?void 0:a.getTracer(e,r,n)},t}(),Dn;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Dn||(Dn={}));var za;(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(za||(za={}));var Ga;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(Ga||(Ga={}));var St=Gn.getInstance(),le=mt.instance(),du=function(){function t(){}return t.prototype.getMeter=function(e,r,n){return jl},t}(),Au=new du,sa="metrics",fu=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(e){return un(sa,e,mt.instance())},t.prototype.getMeterProvider=function(){return $t(sa)||Au},t.prototype.getMeter=function(e,r,n){return this.getMeterProvider().getMeter(e,r,n)},t.prototype.disable=function(){cn(sa,mt.instance())},t}(),hu=fu.getInstance(),pu=function(){function t(){}return t.prototype.inject=function(e,r){},t.prototype.extract=function(e,r){return e},t.prototype.fields=function(){return[]},t}(),di=ii("OpenTelemetry Baggage Key");function Do(t){return t.getValue(di)||void 0}function mu(){return Do(Gn.getInstance().active())}function gu(t,e){return t.setValue(di,e)}function yu(t){return t.deleteValue(di)}var la="propagation",vu=new pu,_u=function(){function t(){this.createBaggage=Dl,this.getBaggage=Do,this.getActiveBaggage=mu,this.setBaggage=gu,this.deleteBaggage=yu}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(e){return un(la,e,mt.instance())},t.prototype.inject=function(e,r,n){return n===void 0&&(n=$l),this._getGlobalPropagator().inject(e,r,n)},t.prototype.extract=function(e,r,n){return n===void 0&&(n=Wl),this._getGlobalPropagator().extract(e,r,n)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){cn(la,mt.instance())},t.prototype._getGlobalPropagator=function(){return $t(la)||vu},t}(),Hr=_u.getInstance(),ua="trace",bu=function(){function t(){this._proxyTracerProvider=new Di,this.wrapSpanContext=iu,this.isSpanContextValid=Fn,this.deleteSpan=eu,this.getSpan=ui,this.getActiveSpan=ql,this.getSpanContext=Io,this.setSpan=ci,this.setSpanContext=tu}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var r=un(ua,this._proxyTracerProvider,mt.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},t.prototype.getTracerProvider=function(){return $t(ua)||this._proxyTracerProvider},t.prototype.getTracer=function(e,r){return this.getTracerProvider().getTracer(e,r)},t.prototype.disable=function(){cn(ua,mt.instance()),this._proxyTracerProvider=new Di},t}(),ut=bu.getInstance(),Oi={context:St,diag:le,metrics:hu,propagation:Hr,trace:ut},Oo=ii("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function Ro(t){return t.setValue(Oo,!0)}function Ai(t){return t.getValue(Oo)===!0}var Su="=",Fa=";",On=",",ca="baggage",Eu=180,wu=4096,Iu=8192,Cu=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i};function Tu(t){return t.reduce(function(e,r){var n=""+e+(e!==""?On:"")+r;return n.length>Iu?e:n},"")}function Du(t){return t.getAllEntries().map(function(e){var r=Cu(e,2),n=r[0],a=r[1],i=encodeURIComponent(n)+"="+encodeURIComponent(a.value);return a.metadata!==void 0&&(i+=Fa+a.metadata.toString()),i})}function Po(t){var e=t.split(Fa);if(!(e.length<=0)){var r=e.shift();if(r){var n=r.split(Su);if(n.length===2){var a=decodeURIComponent(n[0].trim()),i=decodeURIComponent(n[1].trim()),o;return e.length>0&&(o=Ol(e.join(Fa))),{key:a,value:i,metadata:o}}}}}function ko(t){return typeof t!="string"||t.length===0?{}:t.split(On).map(function(e){return Po(e)}).filter(function(e){return e!==void 0&&e.value.length>0}).reduce(function(e,r){return e[r.key]=r.value,e},{})}var Ou=function(){function t(){}return t.prototype.inject=function(e,r,n){var a=Hr.getBaggage(e);if(!(!a||Ai(e))){var i=Du(a).filter(function(s){return s.length<=wu}).slice(0,Eu),o=Tu(i);o.length>0&&n.set(r,ca,o)}},t.prototype.extract=function(e,r,n){var a=n.get(r,ca),i=Array.isArray(a)?a.join(On):a;if(!i)return e;var o={};if(i.length===0)return e;var s=i.split(On);return s.forEach(function(c){var h=Po(c);if(h){var v={value:h.value};h.metadata&&(v.metadata=h.metadata),o[h.key]=v}}),Object.entries(o).length===0?e:Hr.setBaggage(e,Hr.createBaggage(o))},t.prototype.fields=function(){return[ca]},t}(),No=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ru=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i};function In(t){var e,r,n={};if(typeof t!="object"||t==null)return n;try{for(var a=No(Object.entries(t)),i=a.next();!i.done;i=a.next()){var o=Ru(i.value,2),s=o[0],c=o[1];if(!Pu(s)){le.warn("Invalid attribute key: "+s);continue}if(!Mo(c)){le.warn("Invalid attribute value set for key: "+s);continue}Array.isArray(c)?n[s]=c.slice():n[s]=c}}catch(h){e={error:h}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return n}function Pu(t){return typeof t=="string"&&t.length>0}function Mo(t){return t==null?!0:Array.isArray(t)?ku(t):Lo(t)}function ku(t){var e,r,n;try{for(var a=No(t),i=a.next();!i.done;i=a.next()){var o=i.value;if(o!=null){if(!n){if(Lo(o)){n=typeof o;continue}return!1}if(typeof o!==n)return!1}}}catch(s){e={error:s}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return!0}function Lo(t){switch(typeof t){case"number":case"boolean":case"string":return!0}return!1}function Nu(){return function(t){le.error(Mu(t))}}function Mu(t){return typeof t=="string"?t:JSON.stringify(Lu(t))}function Lu(t){for(var e={},r=t;r!==null;)Object.getOwnPropertyNames(r).forEach(function(n){if(!e[n]){var a=r[n];a&&(e[n]=String(a))}}),r=Object.getPrototypeOf(r);return e}var Bu=Nu();function on(t){try{Bu(t)}catch{}}var ft;(function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})(ft||(ft={}));var Bo=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},xu=",",ju=["OTEL_SDK_DISABLED"];function Hu(t){return ju.indexOf(t)>-1}var Uu=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function Vu(t){return Uu.indexOf(t)>-1}var zu=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function Gu(t){return zu.indexOf(t)>-1}var Wa=1/0,$a=128,xo={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:Ne.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:Wa,OTEL_ATTRIBUTE_COUNT_LIMIT:$a,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:Wa,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:$a,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:ft.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function Fu(t,e,r){if(!(typeof r[t]>"u")){var n=String(r[t]);e[t]=n.toLowerCase()==="true"}}function Wu(t,e,r,n,a){if(n===void 0&&(n=-1/0),a===void 0&&(a=1/0),typeof r[t]<"u"){var i=Number(r[t]);isNaN(i)||(i<n?e[t]=n:i>a?e[t]=a:e[t]=i)}}function $u(t,e,r,n){n===void 0&&(n=xu);var a=r[t];typeof a=="string"&&(e[t]=a.split(n).map(function(i){return i.trim()}))}var Ku={ALL:Ne.ALL,VERBOSE:Ne.VERBOSE,DEBUG:Ne.DEBUG,INFO:Ne.INFO,WARN:Ne.WARN,ERROR:Ne.ERROR,NONE:Ne.NONE};function Yu(t,e,r){var n=r[t];if(typeof n=="string"){var a=Ku[n.toUpperCase()];a!=null&&(e[t]=a)}}function Ka(t){var e={};for(var r in xo){var n=r;switch(n){case"OTEL_LOG_LEVEL":Yu(n,e,t);break;default:if(Hu(n))Fu(n,e,t);else if(Vu(n))Wu(n,e,t);else if(Gu(n))$u(n,e,t);else{var a=t[n];typeof a<"u"&&a!==null&&(e[n]=String(a))}}}return e}function Qu(){return Ka(typeof process<"u"?{BUILD_VERSION_HOMECHART:"dev+a0b23e2",NODE_ENV:"production",PUPPETEER_URL_HOMECHART:""}:Bo)}function xe(){var t=Ka(Bo);return Object.assign({},xo,t)}function Ur(t){for(var e=t.length,r="",n=0;n<e;n+=2){var a=t.substring(n,n+2),i=parseInt(a,16);r+=String.fromCharCode(i)}return btoa(r)}var cr=performance,Xu="1.9.1",zt={AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"},nt={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},Ju={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"},Xt,da=(Xt={},Xt[nt.TELEMETRY_SDK_NAME]="opentelemetry",Xt[nt.PROCESS_RUNTIME_NAME]="browser",Xt[nt.TELEMETRY_SDK_LANGUAGE]=Ju.WEBJS,Xt[nt.TELEMETRY_SDK_VERSION]=Xu,Xt);var Zu=9,qu=6,ec=Math.pow(10,qu),Rn=Math.pow(10,Zu);function nr(t){var e=t/1e3,r=Math.trunc(e),n=Math.round(t%1e3*ec);return[r,n]}function jo(){var t=cr.timeOrigin;if(typeof t!="number"){var e=cr;t=e.timing&&e.timing.fetchStart}return t}function tc(t){var e=nr(jo()),r=nr(typeof t=="number"?t:cr.now());return Uo(e,r)}function rc(t,e){var r=e[0]-t[0],n=e[1]-t[1];return n<0&&(r-=1,n+=Rn),[r,n]}function Ya(t){return t[0]*Rn+t[1]}function Ho(t){return Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}function Ri(t){return Ho(t)||typeof t=="number"||t instanceof Date}function Uo(t,e){var r=[t[0]+e[0],t[1]+e[1]];return r[1]>=Rn&&(r[1]-=Rn,r[0]+=1),r}var Lt;(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})(Lt||(Lt={}));var nc=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ac=function(){function t(e){e===void 0&&(e={});var r;this._propagators=(r=e.propagators)!==null&&r!==void 0?r:[],this._fields=Array.from(new Set(this._propagators.map(function(n){return typeof n.fields=="function"?n.fields():[]}).reduce(function(n,a){return n.concat(a)},[])))}return t.prototype.inject=function(e,r,n){var a,i;try{for(var o=nc(this._propagators),s=o.next();!s.done;s=o.next()){var c=s.value;try{c.inject(e,r,n)}catch(h){le.warn("Failed to inject with "+c.constructor.name+". Err: "+h.message)}}}catch(h){a={error:h}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(a)throw a.error}}},t.prototype.extract=function(e,r,n){return this._propagators.reduce(function(a,i){try{return i.extract(a,r,n)}catch(o){le.warn("Failed to inject with "+i.constructor.name+". Err: "+o.message)}return a},e)},t.prototype.fields=function(){return this._fields.slice()},t}(),Qa="[_0-9a-z-*/]",ic="[a-z]"+Qa+"{0,255}",oc="[a-z0-9]"+Qa+"{0,240}@[a-z]"+Qa+"{0,13}",sc=new RegExp("^(?:"+ic+"|"+oc+")$"),lc=/^[ -~]{0,255}[!-~]$/,uc=/,|=/;function cc(t){return sc.test(t)}function dc(t){return lc.test(t)&&!uc.test(t)}var Pi=32,Ac=512,ki=",",Ni="=",fc=function(){function t(e){this._internalState=new Map,e&&this._parse(e)}return t.prototype.set=function(e,r){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,r),n},t.prototype.unset=function(e){var r=this._clone();return r._internalState.delete(e),r},t.prototype.get=function(e){return this._internalState.get(e)},t.prototype.serialize=function(){var e=this;return this._keys().reduce(function(r,n){return r.push(n+Ni+e.get(n)),r},[]).join(ki)},t.prototype._parse=function(e){e.length>Ac||(this._internalState=e.split(ki).reverse().reduce(function(r,n){var a=n.trim(),i=a.indexOf(Ni);if(i!==-1){var o=a.slice(0,i),s=a.slice(i+1,n.length);cc(o)&&dc(s)&&r.set(o,s)}return r},new Map),this._internalState.size>Pi&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,Pi))))},t.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},t.prototype._clone=function(){var e=new t;return e._internalState=new Map(this._internalState),e},t}(),Aa="traceparent",fa="tracestate",hc="00",pc="(?!ff)[\\da-f]{2}",mc="(?![0]{32})[\\da-f]{32}",gc="(?![0]{16})[\\da-f]{16}",yc="[\\da-f]{2}",vc=new RegExp("^\\s?("+pc+")-("+mc+")-("+gc+")-("+yc+")(-.*)?\\s?$");function _c(t){var e=vc.exec(t);return!e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}var bc=function(){function t(){}return t.prototype.inject=function(e,r,n){var a=ut.getSpanContext(e);if(!(!a||Ai(e)||!Fn(a))){var i=hc+"-"+a.traceId+"-"+a.spanId+"-0"+Number(a.traceFlags||gt.NONE).toString(16);n.set(r,Aa,i),a.traceState&&n.set(r,fa,a.traceState.serialize())}},t.prototype.extract=function(e,r,n){var a=n.get(r,Aa);if(!a)return e;var i=Array.isArray(a)?a[0]:a;if(typeof i!="string")return e;var o=_c(i);if(!o)return e;o.isRemote=!0;var s=n.get(r,fa);if(s){var c=Array.isArray(s)?s.join(","):s;o.traceState=new fc(typeof c=="string"?c:void 0)}return ut.setSpanContext(e,o)},t.prototype.fields=function(){return[Aa,fa]},t}(),Sc="[object Object]",Ec="[object Null]",wc="[object Undefined]",Ic=Function.prototype,Vo=Ic.toString,Cc=Vo.call(Object),Tc=Dc(Object.getPrototypeOf,Object),zo=Object.prototype,Go=zo.hasOwnProperty,Gt=Symbol?Symbol.toStringTag:void 0,Fo=zo.toString;function Dc(t,e){return function(r){return t(e(r))}}function Mi(t){if(!Oc(t)||Rc(t)!==Sc)return!1;var e=Tc(t);if(e===null)return!0;var r=Go.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Vo.call(r)===Cc}function Oc(t){return t!=null&&typeof t=="object"}function Rc(t){return t==null?t===void 0?wc:Ec:Gt&&Gt in Object(t)?Pc(t):kc(t)}function Pc(t){var e=Go.call(t,Gt),r=t[Gt],n=!1;try{t[Gt]=void 0,n=!0}catch{}var a=Fo.call(t);return n&&(e?t[Gt]=r:delete t[Gt]),a}function kc(t){return Fo.call(t)}var Nc=20;function Mc(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.shift(),n=new WeakMap;t.length>0;)r=Wo(r,t.shift(),0,n);return r}function ha(t){return Pn(t)?t.slice():t}function Wo(t,e,r,n){r===void 0&&(r=0);var a;if(!(r>Nc)){if(r++,Cn(t)||Cn(e)||$o(e))a=ha(e);else if(Pn(t)){if(a=t.slice(),Pn(e))for(var i=0,o=e.length;i<o;i++)a.push(ha(e[i]));else if(Nr(e))for(var s=Object.keys(e),i=0,o=s.length;i<o;i++){var c=s[i];a[c]=ha(e[c])}}else if(Nr(t))if(Nr(e)){if(!Lc(t,e))return e;a=Object.assign({},t);for(var s=Object.keys(e),i=0,o=s.length;i<o;i++){var c=s[i],h=e[c];if(Cn(h))typeof h>"u"?delete a[c]:a[c]=h;else{var v=a[c],y=h;if(Li(t,c,n)||Li(e,c,n))delete a[c];else{if(Nr(v)&&Nr(y)){var E=n.get(v)||[],P=n.get(y)||[];E.push({obj:t,key:c}),P.push({obj:e,key:c}),n.set(v,E),n.set(y,P)}a[c]=Wo(a[c],h,r,n)}}}}else a=e;return a}}function Li(t,e,r){for(var n=r.get(t[e])||[],a=0,i=n.length;a<i;a++){var o=n[a];if(o.key===e&&o.obj===t)return!0}return!1}function Pn(t){return Array.isArray(t)}function $o(t){return typeof t=="function"}function Nr(t){return!Cn(t)&&!Pn(t)&&!$o(t)&&typeof t=="object"}function Cn(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t>"u"||t instanceof Date||t instanceof RegExp||t===null}function Lc(t,e){return!(!Mi(t)||!Mi(e))}var Bc=function(){function t(){var e=this;this._promise=new Promise(function(r,n){e._resolve=r,e._reject=n})}return Object.defineProperty(t.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),t.prototype.resolve=function(e){this._resolve(e)},t.prototype.reject=function(e){this._reject(e)},t}(),xc=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},jc=function(t,e,r){if(r||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},fi=function(){function t(e,r){this._callback=e,this._that=r,this._isCalled=!1,this._deferred=new Bc}return Object.defineProperty(t.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),t.prototype.call=function(){for(var e,r=this,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,jc([this._that],xc(n),!1))).then(function(i){return r._deferred.resolve(i)},function(i){return r._deferred.reject(i)})}catch(i){this._deferred.reject(i)}}return this._deferred.promise},t}();function Hc(t,e){return new Promise(function(r){St.with(Ro(St.active()),function(){t.export(e,function(n){r(n)})})})}var Uc={_export:Hc},Vc=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},Ko=1e4;function zc(t){t===void 0&&(t={});var e={};return Object.entries(t).forEach(function(r){var n=Vc(r,2),a=n[0],i=n[1];typeof i<"u"?e[a]=String(i):le.warn('Header "'+a+'" has wrong value and will be ignored')}),e}function Gc(t,e){return t.endsWith("/")||(t=t+"/"),t+e}function Fc(t){try{var e=new URL(t);return e.pathname===""&&(e.pathname=e.pathname+"/"),e.toString()}catch{return le.warn("Could not parse export URL: '"+t+"'"),t}}function Wc(t){return typeof t=="number"?t<=0?Yo(t,Ko):t:$c()}function $c(){var t,e=Number((t=xe().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)!==null&&t!==void 0?t:xe().OTEL_EXPORTER_OTLP_TIMEOUT);return e<=0?Yo(e,Ko):e}function Yo(t,e){return le.warn("Timeout must be greater than 0",t),e}var Kc=function(){function t(e){e===void 0&&(e={}),this._sendingPromises=[],this.url=this.getDefaultUrl(e),typeof e.hostname=="string"&&(this.hostname=e.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new fi(this._shutdown,this),this._concurrencyLimit=typeof e.concurrencyLimit=="number"?e.concurrencyLimit:1/0,this.timeoutMillis=Wc(e.timeoutMillis),this.onInit(e)}return t.prototype.export=function(e,r){if(this._shutdownOnce.isCalled){r({code:Lt.FAILED,error:new Error("Exporter has been shutdown")});return}if(this._sendingPromises.length>=this._concurrencyLimit){r({code:Lt.FAILED,error:new Error("Concurrent export limit reached")});return}this._export(e).then(function(){r({code:Lt.SUCCESS})}).catch(function(n){r({code:Lt.FAILED,error:n})})},t.prototype._export=function(e){var r=this;return new Promise(function(n,a){try{le.debug("items to be sent",e),r.send(e,n,a)}catch(i){a(i)}})},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){return le.debug("shutdown started"),this.onShutdown(),Promise.all(this._sendingPromises).then(function(){})},t}(),Yc=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xa=function(t){Yc(e,t);function e(r,n,a){var i=t.call(this,r)||this;return i.name="OTLPExporterError",i.data=a,i.code=n,i}return e}(Error),kn=function(){return kn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},kn.apply(this,arguments)},Qc=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i};function Xc(t,e,r,n,a){if(navigator.sendBeacon(e,new Blob([t],r)))le.debug("sendBeacon - can send",t),n();else{var i=new Xa("sendBeacon - cannot send "+t);a(i)}}function Jc(t,e,r,n,a,i){var o,s=setTimeout(function(){o=!0,c.abort()},n),c=new XMLHttpRequest;c.open("POST",e);var h={Accept:"application/json","Content-Type":"application/json"};Object.entries(kn(kn({},h),r)).forEach(function(v){var y=Qc(v,2),E=y[0],P=y[1];c.setRequestHeader(E,P)}),c.send(t),c.onreadystatechange=function(){if(c.readyState===XMLHttpRequest.DONE)if(c.status>=200&&c.status<=299)clearTimeout(s),le.debug("xhr success",t),a();else if(o){var v=new Xa("Request Timeout",c.status);i(v)}else{var v=new Xa("Failed to export with XHR (status: "+c.status+")",c.status);clearTimeout(s),i(v)}}}var Zc=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qc=function(t){Zc(e,t);function e(r){r===void 0&&(r={});var n=t.call(this,r)||this;return n._useXHR=!1,n._useXHR=!!r.headers||typeof navigator.sendBeacon!="function",n._useXHR?n._headers=Object.assign({},zc(r.headers),ko(xe().OTEL_EXPORTER_OTLP_HEADERS)):n._headers={},n}return e.prototype.onInit=function(){window.addEventListener("unload",this.shutdown)},e.prototype.onShutdown=function(){window.removeEventListener("unload",this.shutdown)},e.prototype.send=function(r,n,a){var i=this;if(this._shutdownOnce.isCalled){le.debug("Shutdown already started. Cannot send objects");return}var o=this.convert(r),s=JSON.stringify(o),c=new Promise(function(v,y){i._useXHR?Jc(s,i.url,i._headers,i.timeoutMillis,v,y):Xc(s,i.url,{type:"application/json"},v,y)}).then(n,a);this._sendingPromises.push(c);var h=function(){var v=i._sendingPromises.indexOf(c);i._sendingPromises.splice(v,1)};c.then(h,h)},e}(Kc),ed=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i};function Wn(t){return Object.keys(t).map(function(e){return Qo(e,t[e])})}function Qo(t,e){return{key:t,value:Xo(e)}}function Xo(t){var e=typeof t;return e==="string"?{stringValue:t}:e==="number"?Number.isInteger(t)?{intValue:t}:{doubleValue:t}:e==="boolean"?{boolValue:t}:t instanceof Uint8Array?{bytesValue:t}:Array.isArray(t)?{arrayValue:{values:t.map(Xo)}}:e==="object"&&t!=null?{kvlistValue:{values:Object.entries(t).map(function(r){var n=ed(r,2),a=n[0],i=n[1];return Qo(a,i)})}}:{}}function td(t,e){var r,n=t.spanContext(),a=t.status,i=e?t.parentSpanId:t.parentSpanId!=null?Ur(t.parentSpanId):void 0;return{traceId:e?n.traceId:Ur(n.traceId),spanId:e?n.spanId:Ur(n.spanId),parentSpanId:i,traceState:(r=n.traceState)===null||r===void 0?void 0:r.serialize(),name:t.name,kind:t.kind==null?0:t.kind+1,startTimeUnixNano:Ya(t.startTime),endTimeUnixNano:Ya(t.endTime),attributes:Wn(t.attributes),droppedAttributesCount:0,events:t.events.map(nd),droppedEventsCount:0,status:{code:a.code,message:a.message},links:t.links.map(function(o){return rd(o,e)}),droppedLinksCount:0}}function rd(t,e){var r;return{attributes:t.attributes?Wn(t.attributes):[],spanId:e?t.context.spanId:Ur(t.context.spanId),traceId:e?t.context.traceId:Ur(t.context.traceId),traceState:(r=t.context.traceState)===null||r===void 0?void 0:r.serialize(),droppedAttributesCount:0}}function nd(t){return{attributes:t.attributes?Wn(t.attributes):[],name:t.name,timeUnixNano:Ya(t.time),droppedAttributesCount:0}}var ad=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},id=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i};function od(t,e){return{resourceSpans:ld(t,e)}}function sd(t){var e,r,n=new Map;try{for(var a=ad(t),i=a.next();!i.done;i=a.next()){var o=i.value,s=n.get(o.resource);s||(s=new Map,n.set(o.resource,s));var c=o.instrumentationLibrary.name+"@"+(o.instrumentationLibrary.version||"")+":"+(o.instrumentationLibrary.schemaUrl||""),h=s.get(c);h||(h=[],s.set(c,h)),h.push(o)}}catch(v){e={error:v}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return n}function ld(t,e){for(var r=sd(t),n=[],a=r.entries(),i=a.next();!i.done;){for(var o=id(i.value,2),s=o[0],c=o[1],h=[],v=c.values(),y=v.next();!y.done;){var E=y.value;if(E.length>0){var P=E[0].instrumentationLibrary,g=P.name,S=P.version,C=P.schemaUrl,R=E.map(function(ee){return td(ee,e)});h.push({scope:{name:g,version:S},spans:R,schemaUrl:C})}y=v.next()}var B={resource:{attributes:Wn(s.attributes),droppedAttributesCount:0},scopeSpans:h,schemaUrl:void 0};n.push(B),i=a.next()}return n}function ud(){return"unknown_service"}var Nn=function(){function t(e){this.attributes=e}return t.empty=function(){return t.EMPTY},t.default=function(){var e;return new t((e={},e[nt.SERVICE_NAME]=ud(),e[nt.TELEMETRY_SDK_LANGUAGE]=da[nt.TELEMETRY_SDK_LANGUAGE],e[nt.TELEMETRY_SDK_NAME]=da[nt.TELEMETRY_SDK_NAME],e[nt.TELEMETRY_SDK_VERSION]=da[nt.TELEMETRY_SDK_VERSION],e))},t.prototype.merge=function(e){if(!e||!Object.keys(e.attributes).length)return this;var r=Object.assign({},this.attributes,e.attributes);return new t(r)},t.EMPTY=new t({}),t}(),cd=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jo="v1/traces",dd="http://localhost:4318/"+Jo,Ad=function(t){cd(e,t);function e(r){r===void 0&&(r={});var n=t.call(this,r)||this;return n._headers=Object.assign(n._headers,ko(xe().OTEL_EXPORTER_OTLP_TRACES_HEADERS)),n}return e.prototype.convert=function(r){return od(r,!0)},e.prototype.getDefaultUrl=function(r){return typeof r.url=="string"?r.url:xe().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length>0?Fc(xe().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT):xe().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?Gc(xe().OTEL_EXPORTER_OTLP_ENDPOINT,Jo):dd},e}(qc),fd="exception",hd=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pd=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},md=function(){function t(e,r,n,a,i,o,s,c,h){s===void 0&&(s=[]),this.attributes={},this.links=[],this.events=[],this.status={code:Ga.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=a,this.parentSpanId=o,this.kind=i,this.links=s;var v=Date.now();this._performanceStartTime=cr.now(),this._performanceOffset=v-(this._performanceStartTime+jo()),this._startTimeProvided=c!=null,this.startTime=this._getTime(c??v),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return r==null||this._isSpanEnded()?this:e.length===0?(le.warn("Invalid attribute key: "+e),this):Mo(r)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?this:(this.attributes[e]=this._truncateToSize(r),this):(le.warn("Invalid attribute value set for key: "+e),this)},t.prototype.setAttributes=function(e){var r,n;try{for(var a=hd(Object.entries(e)),i=a.next();!i.done;i=a.next()){var o=pd(i.value,2),s=o[0],c=o[1];this.setAttribute(s,c)}}catch(h){r={error:h}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return this},t.prototype.addEvent=function(e,r,n){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return le.warn("No events allowed."),this;this.events.length>=this._spanLimits.eventCountLimit&&(le.warn("Dropping extra events."),this.events.shift()),Ri(r)&&(Ri(n)||(n=r),r=void 0);var a=In(r);return this.events.push({name:e,attributes:a,time:this._getTime(n)}),this},t.prototype.setStatus=function(e){return this._isSpanEnded()?this:(this.status=e,this)},t.prototype.updateName=function(e){return this._isSpanEnded()?this:(this.name=e,this)},t.prototype.end=function(e){if(this._isSpanEnded()){le.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=this._getTime(e),this._duration=rc(this.startTime,this.endTime),this._duration[0]<0&&(le.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._spanProcessor.onEnd(this)},t.prototype._getTime=function(e){if(typeof e=="number"&&e<cr.now())return tc(e+this._performanceOffset);if(typeof e=="number")return nr(e);if(e instanceof Date)return nr(e.getTime());if(Ho(e))return e;if(this._startTimeProvided)return nr(Date.now());var r=cr.now()-this._performanceStartTime;return Uo(this.startTime,nr(r))},t.prototype.isRecording=function(){return this._ended===!1},t.prototype.recordException=function(e,r){var n={};typeof e=="string"?n[zt.EXCEPTION_MESSAGE]=e:e&&(e.code?n[zt.EXCEPTION_TYPE]=e.code.toString():e.name&&(n[zt.EXCEPTION_TYPE]=e.name),e.message&&(n[zt.EXCEPTION_MESSAGE]=e.message),e.stack&&(n[zt.EXCEPTION_STACKTRACE]=e.stack)),n[zt.EXCEPTION_TYPE]||n[zt.EXCEPTION_MESSAGE]?this.addEvent(fd,n,r):le.warn("Failed to record an exception "+e)},Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),t.prototype._isSpanEnded=function(){return this._ended&&le.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},t.prototype._truncateToLimitUtil=function(e,r){return e.length<=r?e:e.substr(0,r)},t.prototype._truncateToSize=function(e){var r=this,n=this._attributeValueLengthLimit;return n<=0?(le.warn("Attribute value limit must be positive, got "+n),e):typeof e=="string"?this._truncateToLimitUtil(e,n):Array.isArray(e)?e.map(function(a){return typeof a=="string"?r._truncateToLimitUtil(a,n):a}):e},t}(),br;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(br||(br={}));var Mn=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:br.NOT_RECORD}},t.prototype.toString=function(){return"AlwaysOffSampler"},t}(),dr=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:br.RECORD_AND_SAMPLED}},t.prototype.toString=function(){return"AlwaysOnSampler"},t}(),pa=function(){function t(e){var r,n,a,i;this._root=e.root,this._root||(on(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new dr),this._remoteParentSampled=(r=e.remoteParentSampled)!==null&&r!==void 0?r:new dr,this._remoteParentNotSampled=(n=e.remoteParentNotSampled)!==null&&n!==void 0?n:new Mn,this._localParentSampled=(a=e.localParentSampled)!==null&&a!==void 0?a:new dr,this._localParentNotSampled=(i=e.localParentNotSampled)!==null&&i!==void 0?i:new Mn}return t.prototype.shouldSample=function(e,r,n,a,i,o){var s=ut.getSpanContext(e);return!s||!Fn(s)?this._root.shouldSample(e,r,n,a,i,o):s.isRemote?s.traceFlags&gt.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,a,i,o):this._remoteParentNotSampled.shouldSample(e,r,n,a,i,o):s.traceFlags&gt.SAMPLED?this._localParentSampled.shouldSample(e,r,n,a,i,o):this._localParentNotSampled.shouldSample(e,r,n,a,i,o)},t.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},t}(),Bi=function(){function t(e){e===void 0&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}return t.prototype.shouldSample=function(e,r){return{decision:Co(r)&&this._accumulate(r)<this._upperBound?br.RECORD_AND_SAMPLED:br.NOT_RECORD}},t.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},t.prototype._normalize=function(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e},t.prototype._accumulate=function(e){for(var r=0,n=0;n<e.length/8;n++){var a=n*8,i=parseInt(e.slice(a,a+8),16);r=(r^i)>>>0}return r},t}(),gd=xe(),yd=ft.AlwaysOn,Jt=1;function Zo(){return{sampler:qo(gd),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:xe().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:xe().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:xe().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:xe().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:xe().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:xe().OTEL_SPAN_EVENT_COUNT_LIMIT}}}function qo(t){switch(t===void 0&&(t=xe()),t.OTEL_TRACES_SAMPLER){case ft.AlwaysOn:return new dr;case ft.AlwaysOff:return new Mn;case ft.ParentBasedAlwaysOn:return new pa({root:new dr});case ft.ParentBasedAlwaysOff:return new pa({root:new Mn});case ft.TraceIdRatio:return new Bi(xi(t));case ft.ParentBasedTraceIdRatio:return new pa({root:new Bi(xi(t))});default:return le.error('OTEL_TRACES_SAMPLER value "'+t.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+yd+'".'),new dr}}function xi(t){if(t.OTEL_TRACES_SAMPLER_ARG===void 0||t.OTEL_TRACES_SAMPLER_ARG==="")return le.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+Jt+"."),Jt;var e=Number(t.OTEL_TRACES_SAMPLER_ARG);return isNaN(e)?(le.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+Jt+"."),Jt):e<0||e>1?(le.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+Jt+"."),Jt):e}function vd(t){var e={sampler:qo()},r=Zo(),n=Object.assign({},r,e,t);return n.generalLimits=Object.assign({},r.generalLimits,t.generalLimits||{}),n.spanLimits=Object.assign({},r.spanLimits,t.spanLimits||{}),n}function _d(t){var e,r,n,a,i,o,s,c,h,v,y,E,P=Object.assign({},t.spanLimits),g=Qu();return P.attributeCountLimit=(o=(i=(a=(r=(e=t.spanLimits)===null||e===void 0?void 0:e.attributeCountLimit)!==null&&r!==void 0?r:(n=t.generalLimits)===null||n===void 0?void 0:n.attributeCountLimit)!==null&&a!==void 0?a:g.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&i!==void 0?i:g.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&o!==void 0?o:$a,P.attributeValueLengthLimit=(E=(y=(v=(c=(s=t.spanLimits)===null||s===void 0?void 0:s.attributeValueLengthLimit)!==null&&c!==void 0?c:(h=t.generalLimits)===null||h===void 0?void 0:h.attributeValueLengthLimit)!==null&&v!==void 0?v:g.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&y!==void 0?y:g.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&E!==void 0?E:Wa,Object.assign({},t,{spanLimits:P})}var bd=function(){function t(e,r){this._exporter=e,this._finishedSpans=[];var n=xe();this._maxExportBatchSize=typeof(r==null?void 0:r.maxExportBatchSize)=="number"?r.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(r==null?void 0:r.maxQueueSize)=="number"?r.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(r==null?void 0:r.scheduledDelayMillis)=="number"?r.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(r==null?void 0:r.exportTimeoutMillis)=="number"?r.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new fi(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(le.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return t.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){this._shutdownOnce.isCalled||e.spanContext().traceFlags&gt.SAMPLED&&this._addToBuffer(e)},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){var e=this;return Promise.resolve().then(function(){return e.onShutdown()}).then(function(){return e._flushAll()}).then(function(){return e._exporter.shutdown()})},t.prototype._addToBuffer=function(e){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(e),this._maybeStartTimer())},t.prototype._flushAll=function(){var e=this;return new Promise(function(r,n){for(var a=[],i=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize),o=0,s=i;o<s;o++)a.push(e._flushOneBatch());Promise.all(a).then(function(){r()}).catch(n)})},t.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(r,n){var a=setTimeout(function(){n(new Error("Timeout"))},e._exportTimeoutMillis);St.with(Ro(St.active()),function(){e._exporter.export(e._finishedSpans.splice(0,e._maxExportBatchSize),function(i){var o;clearTimeout(a),i.code===Lt.SUCCESS?r():n((o=i.error)!==null&&o!==void 0?o:new Error("BatchSpanProcessor: span export failed"))})})})},t.prototype._maybeStartTimer=function(){var e=this;this._timer===void 0&&(this._timer=setTimeout(function(){e._flushOneBatch().then(function(){e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())}).catch(function(r){on(r)})},this._scheduledDelayMillis),this._timer,void 0)},t.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},t}(),Sd=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ed=function(t){Sd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.onInit(n),a}return e.prototype.onInit=function(r){var n=this;(r==null?void 0:r.disableAutoFlushOnDocumentHide)!==!0&&typeof document<"u"&&(this._visibilityChangeListener=function(){document.visibilityState==="hidden"&&n.forceFlush()},this._pageHideListener=function(){n.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},e.prototype.onShutdown=function(){typeof document<"u"&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},e}(bd),wd=8,Id=16,Cd=function(){function t(){this.generateTraceId=ji(Id),this.generateSpanId=ji(wd)}return t}(),vn=Array(32);function ji(t){return function(){for(var r=0;r<t*2;r++)vn[r]=Math.floor(Math.random()*16)+48,vn[r]>=58&&(vn[r]+=39);return String.fromCharCode.apply(null,vn.slice(0,t*2))}}var Td=function(){function t(e,r,n){this._tracerProvider=n;var a=vd(r);this._sampler=a.sampler,this._generalLimits=a.generalLimits,this._spanLimits=a.spanLimits,this._idGenerator=r.idGenerator||new Cd,this.resource=n.resource,this.instrumentationLibrary=e}return t.prototype.startSpan=function(e,r,n){var a,i;r===void 0&&(r={}),n===void 0&&(n=St.active()),r.root&&(n=ut.deleteSpan(n));var o=ut.getSpan(n);if(Ai(n)){le.debug("Instrumentation suppressed, returning Noop Span");var s=ut.wrapSpanContext(wo);return s}var c=o==null?void 0:o.spanContext(),h=this._idGenerator.generateSpanId(),v,y,E;!c||!ut.isSpanContextValid(c)?v=this._idGenerator.generateTraceId():(v=c.traceId,y=c.traceState,E=c.spanId);var P=(a=r.kind)!==null&&a!==void 0?a:za.INTERNAL,g=((i=r.links)!==null&&i!==void 0?i:[]).map(function(H){return{context:H.context,attributes:In(H.attributes)}}),S=In(r.attributes),C=this._sampler.shouldSample(n,v,e,P,S,g),R=C.decision===Dn.RECORD_AND_SAMPLED?gt.SAMPLED:gt.NONE,B={traceId:v,spanId:h,traceFlags:R,traceState:y};if(C.decision===Dn.NOT_RECORD){le.debug("Recording is off, propagating context in a non-recording span");var s=ut.wrapSpanContext(B);return s}var ee=new md(this,n,e,B,P,E,g,r.startTime),re=In(Object.assign(S,C.attributes));return ee.setAttributes(re),ee},t.prototype.startActiveSpan=function(e,r,n,a){var i,o,s;if(!(arguments.length<2)){arguments.length===2?s=r:arguments.length===3?(i=r,s=n):(i=r,o=n,s=a);var c=o??St.active(),h=this.startSpan(e,i,c),v=ut.setSpan(c,h);return St.with(v,s,void 0,h)}},t.prototype.getGeneralLimits=function(){return this._generalLimits},t.prototype.getSpanLimits=function(){return this._spanLimits},t.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},t}(),_n=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dd=function(){function t(e){this._spanProcessors=e}return t.prototype.forceFlush=function(){var e,r,n=[];try{for(var a=_n(this._spanProcessors),i=a.next();!i.done;i=a.next()){var o=i.value;n.push(o.forceFlush())}}catch(s){e={error:s}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return new Promise(function(s){Promise.all(n).then(function(){s()}).catch(function(c){on(c||new Error("MultiSpanProcessor: forceFlush failed")),s()})})},t.prototype.onStart=function(e,r){var n,a;try{for(var i=_n(this._spanProcessors),o=i.next();!o.done;o=i.next()){var s=o.value;s.onStart(e,r)}}catch(c){n={error:c}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}},t.prototype.onEnd=function(e){var r,n;try{for(var a=_n(this._spanProcessors),i=a.next();!i.done;i=a.next()){var o=i.value;o.onEnd(e)}}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},t.prototype.shutdown=function(){var e,r,n=[];try{for(var a=_n(this._spanProcessors),i=a.next();!i.done;i=a.next()){var o=i.value;n.push(o.shutdown())}}catch(s){e={error:s}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return new Promise(function(s,c){Promise.all(n).then(function(){s()},c)})},t}(),Od=function(){function t(){}return t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){},t.prototype.shutdown=function(){return Promise.resolve()},t.prototype.forceFlush=function(){return Promise.resolve()},t}(),Ft;(function(t){t[t.resolved=0]="resolved",t[t.timeout=1]="timeout",t[t.error=2]="error",t[t.unresolved=3]="unresolved"})(Ft||(Ft={}));var Rd=function(){function t(e){e===void 0&&(e={});var r;this._registeredSpanProcessors=[],this._tracers=new Map;var n=Mc({},Zo(),_d(e));this.resource=(r=n.resource)!==null&&r!==void 0?r:Nn.empty(),this.resource=Nn.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});var a=this._buildExporterFromEnv();if(a!==void 0){var i=new Ed(a);this.activeSpanProcessor=i}else this.activeSpanProcessor=new Od}return t.prototype.getTracer=function(e,r,n){var a=e+"@"+(r||"")+":"+((n==null?void 0:n.schemaUrl)||"");return this._tracers.has(a)||this._tracers.set(a,new Td({name:e,version:r,schemaUrl:n==null?void 0:n.schemaUrl},this._config,this)),this._tracers.get(a)},t.prototype.addSpanProcessor=function(e){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(r){return le.error("Error while trying to shutdown current span processor",r)}),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new Dd(this._registeredSpanProcessors)},t.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},t.prototype.register=function(e){e===void 0&&(e={}),ut.setGlobalTracerProvider(this),e.propagator===void 0&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&St.setGlobalContextManager(e.contextManager),e.propagator&&Hr.setGlobalPropagator(e.propagator)},t.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map(function(n){return new Promise(function(a){var i,o=setTimeout(function(){a(new Error("Span processor did not completed within timeout period of "+e+" ms")),i=Ft.timeout},e);n.forceFlush().then(function(){clearTimeout(o),i!==Ft.timeout&&(i=Ft.resolved,a(i))}).catch(function(s){clearTimeout(o),i=Ft.error,a(s)})})});return new Promise(function(n,a){Promise.all(r).then(function(i){var o=i.filter(function(s){return s!==Ft.resolved});o.length>0?a(o):n()}).catch(function(i){return a([i])})})},t.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},t.prototype._getPropagator=function(e){var r;return(r=this.constructor._registeredPropagators.get(e))===null||r===void 0?void 0:r()},t.prototype._getSpanExporter=function(e){var r;return(r=this.constructor._registeredExporters.get(e))===null||r===void 0?void 0:r()},t.prototype._buildPropagatorFromEnv=function(){var e=this,r=Array.from(new Set(xe().OTEL_PROPAGATORS)),n=r.map(function(i){var o=e._getPropagator(i);return o||le.warn('Propagator "'+i+'" requested through environment variable is unavailable.'),o}),a=n.reduce(function(i,o){return o&&i.push(o),i},[]);if(a.length!==0)return r.length===1?a[0]:new ac({propagators:a})},t.prototype._buildExporterFromEnv=function(){var e=xe().OTEL_TRACES_EXPORTER;if(!(e==="none"||e==="")){var r=this._getSpanExporter(e);return r||le.error('Exporter "'+e+'" requested through environment variable is unavailable.'),r}},t._registeredPropagators=new Map([["tracecontext",function(){return new bc}],["baggage",function(){return new Ou}]]),t._registeredExporters=new Map,t}(),Pd=function(){function t(e){this._exporter=e,this._shutdownOnce=new fi(this._shutdown,this)}return t.prototype.forceFlush=function(){return Promise.resolve()},t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){this._shutdownOnce.isCalled||e.spanContext().traceFlags&gt.SAMPLED&&Uc._export(this._exporter,[e]).then(function(r){var n;r.code!==Lt.SUCCESS&&on((n=r.error)!==null&&n!==void 0?n:new Error("SimpleSpanProcessor: span export failed (status "+r+")"))}).catch(function(r){on(r)})},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){return this._exporter.shutdown()},t}(),kd=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},Nd=function(t,e,r){if(r||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},Md=function(){function t(){this._enabled=!1,this._currentContext=tr}return t.prototype._bindFunction=function(e,r){e===void 0&&(e=tr);var n=this,a=function(){for(var i=this,o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n.with(e,function(){return r.apply(i,o)})};return Object.defineProperty(a,"length",{enumerable:!1,configurable:!0,writable:!1,value:r.length}),a},t.prototype.active=function(){return this._currentContext},t.prototype.bind=function(e,r){return e===void 0&&(e=this.active()),typeof r=="function"?this._bindFunction(e,r):r},t.prototype.disable=function(){return this._currentContext=tr,this._enabled=!1,this},t.prototype.enable=function(){return this._enabled?this:(this._enabled=!0,this._currentContext=tr,this)},t.prototype.with=function(e,r,n){for(var a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];var o=this._currentContext;this._currentContext=e||tr;try{return r.call.apply(r,Nd([n],kd(a),!1))}finally{this._currentContext=o}},t}(),Ld=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bd=function(t){Ld(e,t);function e(r){r===void 0&&(r={});var n=t.call(this,r)||this;if(r.contextManager)throw"contextManager should be defined in register method not in constructor";if(r.propagator)throw"propagator should be defined in register method not in constructor";return n}return e.prototype.register=function(r){r===void 0&&(r={}),r.contextManager===void 0&&(r.contextManager=new Md),r.contextManager&&r.contextManager.enable(),t.prototype.register.call(this,r)},e}(Rd);const Tt=[];let Zt;const Ae={enable:async()=>{if(Zt===void 0){const t=new Bd({resource:Nn.default().merge(new Nn({[nt.SERVICE_NAME]:Ae.state.serviceName,[nt.SERVICE_VERSION]:{BUILD_VERSION_HOMECHART:"dev+a0b23e2",NODE_ENV:"production",PUPPETEER_URL_HOMECHART:""}.BUILD_VERSION,url:Ae.state.endpoint}))});t.addSpanProcessor(new Pd(new Ad({headers:{"Content-Type":"application/json"},url:`${Ae.state.endpoint}${Ae.state.path}`}))),Zt=t.getTracer(Ae.state.serviceName)}},spanEnd:t=>{if(Zt!==void 0){const e=Tt.findIndex(r=>r.func===t);Tt[e]!==void 0&&(Tt[e].span.end(),Tt.splice(e,1))}},spanStart:t=>{if(Zt!==void 0)if(Tt.length>0){const e=Oi.trace.setSpan(Oi.context.active(),Tt[0].span);Tt.push({func:t,span:Zt.startSpan(t,void 0,e)})}else Tt.push({func:t,span:Zt.startSpan(t)})},state:{endpoint:"",path:"",serviceName:""}},Ln={values:["","January","February","March","April","May","June","July","August","September","October","November","December"]};var tt=(t=>(t[t.None=0]="None",t[t.January=1]="January",t[t.February=2]="February",t[t.March=3]="March",t[t.April=4]="April",t[t.May=5]="May",t[t.June=6]="June",t[t.July=7]="July",t[t.August=8]="August",t[t.September=9]="September",t[t.October=10]="October",t[t.November=11]="November",t[t.December=12]="December",t))(tt||{});class Vr{constructor(e,r){this.year=e,this.month=r}static fromNumber(e){const n=/^(\d{4})(0[1-9]|1[0-12])$/.exec(e.toString());if(n===null)return new Vr(0,0);const a=parseInt(n[1],10),i=parseInt(n[2],10);return new Vr(a,i)}addMonths(e){let r=this.year,n=this.month;for(n+=e;n>12;)n-=12,r++;for(;n<1;)n+=12,r--;return new Vr(r,n)}getMonth(){return`0${this.month}`.slice(-2)}getYear(){return`000${this.year}`.slice(-4)}fromInput(e){if(e.length>7)return;const r=parseInt(e.split("-")[1]),n=parseInt(e.split("-")[0]);n>0&&(this.year=n),r>0&&(this.month=r),n===0&&r===0&&(this.month=0,this.year=0)}toNumber(){return parseInt(`${this.getYear()}${this.getMonth()}`,10)}toString(){return`${Ln.values[this.month]} ${this.getYear()}`}toValue(){return`${this.getYear()}-${this.getMonth()}`}valueOf(){return this.toNumber()}}const xd=["/","-",".",","];var hi=(t=>(t[t.ForwardSlash=0]="ForwardSlash",t[t.Dash=1]="Dash",t[t.Period=2]="Period",t[t.Comma=3]="Comma",t))(hi||{});class ve{constructor(e,r,n){this.year=e,this.month=r,this.day=n}static fromString(e){const r=/^(\d{4})-(0[1-9]|1[0-12])-([0-2][0-9]|3[0-1])$/,n=/^(0?[1-9]|1[0-12])\/([0-2]?[0-9]|3[0-1])\/([0-9]+)$/;let a=r.exec(`${e}`),i=0,o=0,s=0;if(a===null){if(a=n.exec(`${e}`),a===null)return this.now();i=parseInt(a[3],10),o=parseInt(a[1],10),s=parseInt(a[2],10)}else i=parseInt(a[1],10),o=parseInt(a[2],10),s=parseInt(a[3],10);return new ve(i,o,s)}static now(){const e=new Date;return new ve(e.getFullYear(),e.getMonth()+1,e.getDate())}getDay(){return`0${this.day}`.slice(-2)}getMonth(){return`0${this.month}`.slice(-2)}getYear(){return`000${this.year}`.slice(-4)}toJSON(){return this.toString(Wt.YMD,1)}toString(e,r){let n=[];const a=xd[r];switch(e){case Wt.DMY:n=[this.getDay(),this.getMonth(),this.getYear()];break;case Wt.MDY:n=[this.getMonth(),this.getDay(),this.getYear()];break;case Wt.YMD:n=[this.getYear(),this.getMonth(),this.getDay()];break}return n.join(a)}toYearMonth(){return new Vr(this.year,this.month)}valueOf(){return parseInt(`${this.year}${this.getMonth()}${this.getDay()}`)}}var Wt=(t=>(t[t.MDY=0]="MDY",t[t.DMY=1]="DMY",t[t.YMD=2]="YMD",t))(Wt||{});const ct={getValue:t=>t===void 0||t>ct.values.length-1?ct.values[0]:ct.values[t],toString:(t,e,r)=>`var(--color_${ct.values[t].toLowerCase()}${e===void 0?"":e?"-dark":"-light"}${r===!0?"-content":""})`,values:["Default","Red","Pink","Orange","Yellow","Green","Teal","Blue","Indigo","Purple","Brown","Black","Gray","White"]};var Z=(t=>(t[t.Default=0]="Default",t[t.Red=1]="Red",t[t.Pink=2]="Pink",t[t.Orange=3]="Orange",t[t.Yellow=4]="Yellow",t[t.Green=5]="Green",t[t.Teal=6]="Teal",t[t.Blue=7]="Blue",t[t.Indigo=8]="Indigo",t[t.Purple=9]="Purple",t[t.Brown=10]="Brown",t[t.Black=11]="Black",t[t.Gray=12]="Gray",t[t.White=13]="White",t))(Z||{}),kt=(t=>(t[t.XSmall=0]="XSmall",t[t.Small=1]="Small",t[t.Medium=2]="Medium",t[t.Large=3]="Large",t[t.XLarge=4]="XLarge",t))(kt||{});function ge(t){return JSON.parse(JSON.stringify(t))}var ht=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function es(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ma,Hi;function Ht(){if(Hi)return ma;Hi=1;function t(e,r,n,a,i,o){return{tag:e,key:r,attrs:n,children:a,text:i,dom:o,domSize:void 0,state:void 0,events:void 0,instance:void 0}}return t.normalize=function(e){return Array.isArray(e)?t("[",void 0,void 0,t.normalizeChildren(e),void 0,void 0):e==null||typeof e=="boolean"?null:typeof e=="object"?e:t("#",void 0,void 0,String(e),void 0,void 0)},t.normalizeChildren=function(e){var r=[];if(e.length){for(var n=e[0]!=null&&e[0].key!=null,a=1;a<e.length;a++)if((e[a]!=null&&e[a].key!=null)!==n)throw new TypeError(n&&(e[a]!=null||typeof e[a]=="boolean")?"In fragments, vnodes must either all have keys or none have keys. You may wish to consider using an explicit keyed empty fragment, m.fragment({key: ...}), instead of a hole.":"In fragments, vnodes must either all have keys or none have keys.");for(var a=0;a<e.length;a++)r[a]=t.normalize(e[a])}return r},ma=t,ma}var jd=Ht(),ts=function(){var t=arguments[this],e=this+1,r;if(t==null?t={}:(typeof t!="object"||t.tag!=null||Array.isArray(t))&&(t={},e=this),arguments.length===e+1)r=arguments[e],Array.isArray(r)||(r=[r]);else for(r=[];e<arguments.length;)r.push(arguments[e++]);return jd("",t.key,t,r)},$n={}.hasOwnProperty,Hd=Ht(),Ud=ts,rr=$n,Vd=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,rs={};function Ui(t){for(var e in t)if(rr.call(t,e))return!1;return!0}function zd(t){for(var e,r="div",n=[],a={};e=Vd.exec(t);){var i=e[1],o=e[2];if(i===""&&o!=="")r=o;else if(i==="#")a.id=o;else if(i===".")n.push(o);else if(e[3][0]==="["){var s=e[6];s&&(s=s.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),e[4]==="class"?n.push(s):a[e[4]]=s===""?s:s||!0}}return n.length>0&&(a.className=n.join(" ")),rs[t]={tag:r,attrs:a}}function Gd(t,e){var r=e.attrs,n=rr.call(r,"class"),a=n?r.class:r.className;if(e.tag=t.tag,e.attrs={},!Ui(t.attrs)&&!Ui(r)){var i={};for(var o in r)rr.call(r,o)&&(i[o]=r[o]);r=i}for(var o in t.attrs)rr.call(t.attrs,o)&&o!=="className"&&!rr.call(r,o)&&(r[o]=t.attrs[o]);(a!=null||t.attrs.className!=null)&&(r.className=a!=null?t.attrs.className!=null?String(t.attrs.className)+" "+String(a):a:t.attrs.className!=null?t.attrs.className:null),n&&(r.class=null);for(var o in r)if(rr.call(r,o)&&o!=="key"){e.attrs=r;break}return e}function Fd(t){if(t==null||typeof t!="string"&&typeof t!="function"&&typeof t.view!="function")throw Error("The selector must be either a string or a component.");var e=Ud.apply(1,arguments);return typeof t=="string"&&(e.children=Hd.normalizeChildren(e.children),t!=="[")?Gd(rs[t]||zd(t),e):(e.tag=t,e)}var ns=Fd,Wd=Ht(),$d=function(t){return t==null&&(t=""),Wd("<",void 0,void 0,t,void 0,void 0)},Kd=Ht(),Yd=ts,Qd=function(){var t=Yd.apply(0,arguments);return t.tag="[",t.children=Kd.normalizeChildren(t.children),t},pi=ns;pi.trust=$d;pi.fragment=Qd;var Xd=pi,Bn={},ga={get exports(){return Bn},set exports(t){Bn=t}},ya,Vi;function as(){if(Vi)return ya;Vi=1;var t=function(e){if(!(this instanceof t))throw new Error("Promise must be called with 'new'.");if(typeof e!="function")throw new TypeError("executor must be a function.");var r=this,n=[],a=[],i=h(n,!0),o=h(a,!1),s=r._instance={resolvers:n,rejectors:a},c=typeof setImmediate=="function"?setImmediate:setTimeout;function h(y,E){return function P(g){var S;try{if(E&&g!=null&&(typeof g=="object"||typeof g=="function")&&typeof(S=g.then)=="function"){if(g===r)throw new TypeError("Promise can't be resolved with itself.");v(S.bind(g))}else c(function(){!E&&y.length===0&&console.error("Possible unhandled promise rejection:",g);for(var C=0;C<y.length;C++)y[C](g);n.length=0,a.length=0,s.state=E,s.retry=function(){P(g)}})}catch(C){o(C)}}}function v(y){var E=0;function P(S){return function(C){E++>0||S(C)}}var g=P(o);try{y(P(i),g)}catch(S){g(S)}}v(e)};return t.prototype.then=function(e,r){var n=this,a=n._instance;function i(h,v,y,E){v.push(function(P){if(typeof h!="function")y(P);else try{o(h(P))}catch(g){s&&s(g)}}),typeof a.retry=="function"&&E===a.state&&a.retry()}var o,s,c=new t(function(h,v){o=h,s=v});return i(e,a.resolvers,o,!0),i(r,a.rejectors,s,!1),c},t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(e){return this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){return t.reject(r)})})},t.resolve=function(e){return e instanceof t?e:new t(function(r){r(e)})},t.reject=function(e){return new t(function(r,n){n(e)})},t.all=function(e){return new t(function(r,n){var a=e.length,i=0,o=[];if(e.length===0)r([]);else for(var s=0;s<e.length;s++)(function(c){function h(v){i++,o[c]=v,i===a&&r(o)}e[c]!=null&&(typeof e[c]=="object"||typeof e[c]=="function")&&typeof e[c].then=="function"?e[c].then(h,n):h(e[c])})(s)})},t.race=function(e){return new t(function(r,n){for(var a=0;a<e.length;a++)e[a].then(r,n)})},ya=t,ya}var Mr=as();typeof window<"u"?(typeof window.Promise>"u"?window.Promise=Mr:window.Promise.prototype.finally||(window.Promise.prototype.finally=Mr.prototype.finally),ga.exports=window.Promise):typeof ht<"u"?(typeof ht.Promise>"u"?ht.Promise=Mr:ht.Promise.prototype.finally||(ht.Promise.prototype.finally=Mr.prototype.finally),ga.exports=ht.Promise):ga.exports=Mr;var va=Ht(),Jd=function(t){var e=t&&t.document,r,n={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function a(A){return A.attrs&&A.attrs.xmlns||n[A.tag]}function i(A,u){if(A.state!==u)throw new Error("'vnode.state' must not be modified.")}function o(A){var u=A.state;try{return this.apply(u,arguments)}finally{i(A,u)}}function s(){try{return e.activeElement}catch{return null}}function c(A,u,p,O,N,z,q){for(var ae=p;ae<O;ae++){var Q=u[ae];Q!=null&&h(A,Q,N,q,z)}}function h(A,u,p,O,N){var z=u.tag;if(typeof z=="string")switch(u.state={},u.attrs!=null&&ot(u.attrs,u,p),z){case"#":v(A,u,N);break;case"<":E(A,u,O,N);break;case"[":P(A,u,p,O,N);break;default:g(A,u,p,O,N)}else C(A,u,p,O,N)}function v(A,u,p){u.dom=e.createTextNode(u.children),te(A,u.dom,p)}var y={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function E(A,u,p,O){var N=u.children.match(/^\s*?<(\w+)/im)||[],z=e.createElement(y[N[1]]||"div");p==="http://www.w3.org/2000/svg"?(z.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+u.children+"</svg>",z=z.firstChild):z.innerHTML=u.children,u.dom=z.firstChild,u.domSize=z.childNodes.length,u.instance=[];for(var q=e.createDocumentFragment(),ae;ae=z.firstChild;)u.instance.push(ae),q.appendChild(ae);te(A,q,O)}function P(A,u,p,O,N){var z=e.createDocumentFragment();if(u.children!=null){var q=u.children;c(z,q,0,q.length,p,null,O)}u.dom=z.firstChild,u.domSize=z.childNodes.length,te(A,z,N)}function g(A,u,p,O,N){var z=u.tag,q=u.attrs,ae=q&&q.is;O=a(u)||O;var Q=O?ae?e.createElementNS(O,z,{is:ae}):e.createElementNS(O,z):ae?e.createElement(z,{is:ae}):e.createElement(z);if(u.dom=Q,q!=null&&et(u,q,O),te(A,Q,N),!he(u)&&u.children!=null){var ce=u.children;c(Q,ce,0,ce.length,p,null,O),u.tag==="select"&&q!=null&&yt(u,q)}}function S(A,u){var p;if(typeof A.tag.view=="function"){if(A.state=Object.create(A.tag),p=A.state.view,p.$$reentrantLock$$!=null)return;p.$$reentrantLock$$=!0}else{if(A.state=void 0,p=A.tag,p.$$reentrantLock$$!=null)return;p.$$reentrantLock$$=!0,A.state=A.tag.prototype!=null&&typeof A.tag.prototype.view=="function"?new A.tag(A):A.tag(A)}if(ot(A.state,A,u),A.attrs!=null&&ot(A.attrs,A,u),A.instance=va.normalize(o.call(A.state.view,A)),A.instance===A)throw Error("A view cannot return the vnode it received as argument");p.$$reentrantLock$$=null}function C(A,u,p,O,N){S(u,p),u.instance!=null?(h(A,u.instance,p,O,N),u.dom=u.instance.dom,u.domSize=u.dom!=null?u.instance.domSize:0):u.domSize=0}function R(A,u,p,O,N,z){if(!(u===p||u==null&&p==null))if(u==null||u.length===0)c(A,p,0,p.length,O,N,z);else if(p==null||p.length===0)ue(A,u,0,u.length);else{var q=u[0]!=null&&u[0].key!=null,ae=p[0]!=null&&p[0].key!=null,Q=0,ce=0;if(!q)for(;ce<u.length&&u[ce]==null;)ce++;if(!ae)for(;Q<p.length&&p[Q]==null;)Q++;if(q!==ae)ue(A,u,ce,u.length),c(A,p,Q,p.length,O,N,z);else if(ae){for(var He=u.length-1,Re=p.length-1,Ut,Ue,Ie,Ve,Ee,Vt;He>=ce&&Re>=Q&&(Ve=u[He],Ee=p[Re],Ve.key===Ee.key);)Ve!==Ee&&B(A,Ve,Ee,O,N,z),Ee.dom!=null&&(N=Ee.dom),He--,Re--;for(;He>=ce&&Re>=Q&&(Ue=u[ce],Ie=p[Q],Ue.key===Ie.key);)ce++,Q++,Ue!==Ie&&B(A,Ue,Ie,O,ne(u,ce,N),z);for(;He>=ce&&Re>=Q&&!(Q===Re||Ue.key!==Ee.key||Ve.key!==Ie.key);)Vt=ne(u,ce,N),be(A,Ve,Vt),Ve!==Ie&&B(A,Ve,Ie,O,Vt,z),++Q<=--Re&&be(A,Ue,N),Ue!==Ee&&B(A,Ue,Ee,O,N,z),Ee.dom!=null&&(N=Ee.dom),ce++,He--,Ve=u[He],Ee=p[Re],Ue=u[ce],Ie=p[Q];for(;He>=ce&&Re>=Q&&Ve.key===Ee.key;)Ve!==Ee&&B(A,Ve,Ee,O,N,z),Ee.dom!=null&&(N=Ee.dom),He--,Re--,Ve=u[He],Ee=p[Re];if(Q>Re)ue(A,u,ce,He+1);else if(ce>He)c(A,p,Q,Re+1,O,N,z);else{var mn=N,gn=Re-Q+1,Xe=new Array(gn),Tr=0,Ce=0,Yt=2147483647,Dr=0,Ut,Or;for(Ce=0;Ce<gn;Ce++)Xe[Ce]=-1;for(Ce=Re;Ce>=Q;Ce--){Ut==null&&(Ut=U(u,ce,He+1)),Ee=p[Ce];var Ct=Ut[Ee.key];Ct!=null&&(Yt=Ct<Yt?Ct:-1,Xe[Ce-Q]=Ct,Ve=u[Ct],u[Ct]=null,Ve!==Ee&&B(A,Ve,Ee,O,N,z),Ee.dom!=null&&(N=Ee.dom),Dr++)}if(N=mn,Dr!==He-ce+1&&ue(A,u,ce,He+1),Dr===0)c(A,p,Q,Re+1,O,N,z);else if(Yt===-1)for(Or=fe(Xe),Tr=Or.length-1,Ce=Re;Ce>=Q;Ce--)Ie=p[Ce],Xe[Ce-Q]===-1?h(A,Ie,O,z,N):Or[Tr]===Ce-Q?Tr--:be(A,Ie,N),Ie.dom!=null&&(N=p[Ce].dom);else for(Ce=Re;Ce>=Q;Ce--)Ie=p[Ce],Xe[Ce-Q]===-1&&h(A,Ie,O,z,N),Ie.dom!=null&&(N=p[Ce].dom)}}else{var Kt=u.length<p.length?u.length:p.length;for(Q=Q<ce?Q:ce;Q<Kt;Q++)Ue=u[Q],Ie=p[Q],!(Ue===Ie||Ue==null&&Ie==null)&&(Ue==null?h(A,Ie,O,z,ne(u,Q+1,N)):Ie==null?Se(A,Ue):B(A,Ue,Ie,O,ne(u,Q+1,N),z));u.length>Kt&&ue(A,u,Q,u.length),p.length>Kt&&c(A,p,Q,p.length,O,N,z)}}}function B(A,u,p,O,N,z){var q=u.tag,ae=p.tag;if(q===ae){if(p.state=u.state,p.events=u.events,pn(p,u))return;if(typeof q=="string")switch(p.attrs!=null&&Cr(p.attrs,p,O),q){case"#":ee(u,p);break;case"<":re(A,u,p,z,N);break;case"[":H(A,u,p,O,N,z);break;default:J(u,p,O,z)}else K(A,u,p,O,N,z)}else Se(A,u),h(A,p,O,z,N)}function ee(A,u){A.children.toString()!==u.children.toString()&&(A.dom.nodeValue=u.children),u.dom=A.dom}function re(A,u,p,O,N){u.children!==p.children?(De(A,u),E(A,p,O,N)):(p.dom=u.dom,p.domSize=u.domSize,p.instance=u.instance)}function H(A,u,p,O,N,z){R(A,u.children,p.children,O,N,z);var q=0,ae=p.children;if(p.dom=null,ae!=null){for(var Q=0;Q<ae.length;Q++){var ce=ae[Q];ce!=null&&ce.dom!=null&&(p.dom==null&&(p.dom=ce.dom),q+=ce.domSize||1)}q!==1&&(p.domSize=q)}}function J(A,u,p,O){var N=u.dom=A.dom;O=a(u)||O,u.tag==="textarea"&&u.attrs==null&&(u.attrs={}),Jn(u,A.attrs,u.attrs,O),he(u)||R(N,A.children,u.children,p,null,O)}function K(A,u,p,O,N,z){if(p.instance=va.normalize(o.call(p.state.view,p)),p.instance===p)throw Error("A view cannot return the vnode it received as argument");Cr(p.state,p,O),p.attrs!=null&&Cr(p.attrs,p,O),p.instance!=null?(u.instance==null?h(A,p.instance,O,z,N):B(A,u.instance,p.instance,O,N,z),p.dom=p.instance.dom,p.domSize=p.instance.domSize):u.instance!=null?(Se(A,u.instance),p.dom=void 0,p.domSize=0):(p.dom=u.dom,p.domSize=u.domSize)}function U(A,u,p){for(var O=Object.create(null);u<p;u++){var N=A[u];if(N!=null){var z=N.key;z!=null&&(O[z]=u)}}return O}var F=[];function fe(A){for(var u=[0],p=0,O=0,N=0,z=F.length=A.length,N=0;N<z;N++)F[N]=A[N];for(var N=0;N<z;++N)if(A[N]!==-1){var q=u[u.length-1];if(A[q]<A[N]){F[N]=q,u.push(N);continue}for(p=0,O=u.length-1;p<O;){var ae=(p>>>1)+(O>>>1)+(p&O&1);A[u[ae]]<A[N]?p=ae+1:O=ae}A[N]<A[u[p]]&&(p>0&&(F[N]=u[p-1]),u[p]=N)}for(p=u.length,O=u[p-1];p-- >0;)u[p]=O,O=F[O];return F.length=0,u}function ne(A,u,p){for(;u<A.length;u++)if(A[u]!=null&&A[u].dom!=null)return A[u].dom;return p}function be(A,u,p){var O=e.createDocumentFragment();se(A,O,u),te(A,O,p)}function se(A,u,p){for(;p.dom!=null&&p.dom.parentNode===A;){if(typeof p.tag!="string"){if(p=p.instance,p!=null)continue}else if(p.tag==="<")for(var O=0;O<p.instance.length;O++)u.appendChild(p.instance[O]);else if(p.tag!=="[")u.appendChild(p.dom);else if(p.children.length===1){if(p=p.children[0],p!=null)continue}else for(var O=0;O<p.children.length;O++){var N=p.children[O];N!=null&&se(A,u,N)}break}}function te(A,u,p){p!=null?A.insertBefore(u,p):A.appendChild(u)}function he(A){if(A.attrs==null||A.attrs.contenteditable==null&&A.attrs.contentEditable==null)return!1;var u=A.children;if(u!=null&&u.length===1&&u[0].tag==="<"){var p=u[0].children;A.dom.innerHTML!==p&&(A.dom.innerHTML=p)}else if(u!=null&&u.length!==0)throw new Error("Child node of a contenteditable must be trusted.");return!0}function ue(A,u,p,O){for(var N=p;N<O;N++){var z=u[N];z!=null&&Se(A,z)}}function Se(A,u){var p=0,O=u.state,N,z;if(typeof u.tag!="string"&&typeof u.state.onbeforeremove=="function"){var q=o.call(u.state.onbeforeremove,u);q!=null&&typeof q.then=="function"&&(p=1,N=q)}if(u.attrs&&typeof u.attrs.onbeforeremove=="function"){var q=o.call(u.attrs.onbeforeremove,u);q!=null&&typeof q.then=="function"&&(p|=2,z=q)}if(i(u,O),!p)je(u),pe(A,u);else{if(N!=null){var ae=function(){p&1&&(p&=2,p||Q())};N.then(ae,ae)}if(z!=null){var ae=function(){p&2&&(p&=1,p||Q())};z.then(ae,ae)}}function Q(){i(u,O),je(u),pe(A,u)}}function De(A,u){for(var p=0;p<u.instance.length;p++)A.removeChild(u.instance[p])}function pe(A,u){for(;u.dom!=null&&u.dom.parentNode===A;){if(typeof u.tag!="string"){if(u=u.instance,u!=null)continue}else if(u.tag==="<")De(A,u);else{if(u.tag!=="["&&(A.removeChild(u.dom),!Array.isArray(u.children)))break;if(u.children.length===1){if(u=u.children[0],u!=null)continue}else for(var p=0;p<u.children.length;p++){var O=u.children[p];O!=null&&pe(A,O)}}break}}function je(A){if(typeof A.tag!="string"&&typeof A.state.onremove=="function"&&o.call(A.state.onremove,A),A.attrs&&typeof A.attrs.onremove=="function"&&o.call(A.attrs.onremove,A),typeof A.tag!="string")A.instance!=null&&je(A.instance);else{var u=A.children;if(Array.isArray(u))for(var p=0;p<u.length;p++){var O=u[p];O!=null&&je(O)}}}function et(A,u,p){A.tag==="input"&&u.type!=null&&A.dom.setAttribute("type",u.type);var O=u!=null&&A.tag==="input"&&u.type==="file";for(var N in u)wt(A,N,null,u[N],p,O)}function wt(A,u,p,O,N,z){if(!(u==="key"||u==="is"||O==null||dn(u)||p===O&&!Zn(A,u)&&typeof O!="object"||u==="type"&&A.tag==="input")){if(u[0]==="o"&&u[1]==="n")return hn(A,u,O);if(u.slice(0,6)==="xlink:")A.dom.setAttributeNS("http://www.w3.org/1999/xlink",u.slice(6),O);else if(u==="style")fn(A.dom,p,O);else if(An(A,u,N)){if(u==="value"){if((A.tag==="input"||A.tag==="textarea")&&A.dom.value===""+O&&(z||A.dom===s())||A.tag==="select"&&p!==null&&A.dom.value===""+O||A.tag==="option"&&p!==null&&A.dom.value===""+O)return;if(z&&""+O!=""){console.error("`value` is read-only on file inputs!");return}}A.dom[u]=O}else typeof O=="boolean"?O?A.dom.setAttribute(u,""):A.dom.removeAttribute(u):A.dom.setAttribute(u==="className"?"class":u,O)}}function It(A,u,p,O){if(!(u==="key"||u==="is"||p==null||dn(u)))if(u[0]==="o"&&u[1]==="n")hn(A,u,void 0);else if(u==="style")fn(A.dom,p,null);else if(An(A,u,O)&&u!=="className"&&u!=="title"&&!(u==="value"&&(A.tag==="option"||A.tag==="select"&&A.dom.selectedIndex===-1&&A.dom===s()))&&!(A.tag==="input"&&u==="type"))A.dom[u]=null;else{var N=u.indexOf(":");N!==-1&&(u=u.slice(N+1)),p!==!1&&A.dom.removeAttribute(u==="className"?"class":u)}}function yt(A,u){if("value"in u)if(u.value===null)A.dom.selectedIndex!==-1&&(A.dom.value=null);else{var p=""+u.value;(A.dom.value!==p||A.dom.selectedIndex===-1)&&(A.dom.value=p)}"selectedIndex"in u&&wt(A,"selectedIndex",null,u.selectedIndex,void 0)}function Jn(A,u,p,O){if(u&&u===p&&console.warn("Don't reuse attrs object, use new object for every redraw, this will throw in next major"),p!=null){A.tag==="input"&&p.type!=null&&A.dom.setAttribute("type",p.type);var N=A.tag==="input"&&p.type==="file";for(var z in p)wt(A,z,u&&u[z],p[z],O,N)}var q;if(u!=null)for(var z in u)(q=u[z])!=null&&(p==null||p[z]==null)&&It(A,z,q,O)}function Zn(A,u){return u==="value"||u==="checked"||u==="selectedIndex"||u==="selected"&&A.dom===s()||A.tag==="option"&&A.dom.parentNode===e.activeElement}function dn(A){return A==="oninit"||A==="oncreate"||A==="onupdate"||A==="onremove"||A==="onbeforeremove"||A==="onbeforeupdate"}function An(A,u,p){return p===void 0&&(A.tag.indexOf("-")>-1||A.attrs!=null&&A.attrs.is||u!=="href"&&u!=="list"&&u!=="form"&&u!=="width"&&u!=="height")&&u in A.dom}var qn=/[A-Z]/g;function ea(A){return"-"+A.toLowerCase()}function wr(A){return A[0]==="-"&&A[1]==="-"?A:A==="cssFloat"?"float":A.replace(qn,ea)}function fn(A,u,p){if(u!==p)if(p==null)A.style.cssText="";else if(typeof p!="object")A.style.cssText=p;else if(u==null||typeof u!="object"){A.style.cssText="";for(var O in p){var N=p[O];N!=null&&A.style.setProperty(wr(O),String(N))}}else{for(var O in p){var N=p[O];N!=null&&(N=String(N))!==String(u[O])&&A.style.setProperty(wr(O),N)}for(var O in u)u[O]!=null&&p[O]==null&&A.style.removeProperty(wr(O))}}function Ir(){this._=r}Ir.prototype=Object.create(null),Ir.prototype.handleEvent=function(A){var u=this["on"+A.type],p;typeof u=="function"?p=u.call(A.currentTarget,A):typeof u.handleEvent=="function"&&u.handleEvent(A),this._&&A.redraw!==!1&&(0,this._)(),p===!1&&(A.preventDefault(),A.stopPropagation())};function hn(A,u,p){if(A.events!=null){if(A.events._=r,A.events[u]===p)return;p!=null&&(typeof p=="function"||typeof p=="object")?(A.events[u]==null&&A.dom.addEventListener(u.slice(2),A.events,!1),A.events[u]=p):(A.events[u]!=null&&A.dom.removeEventListener(u.slice(2),A.events,!1),A.events[u]=void 0)}else p!=null&&(typeof p=="function"||typeof p=="object")&&(A.events=new Ir,A.dom.addEventListener(u.slice(2),A.events,!1),A.events[u]=p)}function ot(A,u,p){typeof A.oninit=="function"&&o.call(A.oninit,u),typeof A.oncreate=="function"&&p.push(o.bind(A.oncreate,u))}function Cr(A,u,p){typeof A.onupdate=="function"&&p.push(o.bind(A.onupdate,u))}function pn(A,u){do{if(A.attrs!=null&&typeof A.attrs.onbeforeupdate=="function"){var p=o.call(A.attrs.onbeforeupdate,A,u);if(p!==void 0&&!p)break}if(typeof A.tag!="string"&&typeof A.state.onbeforeupdate=="function"){var p=o.call(A.state.onbeforeupdate,A,u);if(p!==void 0&&!p)break}return!1}while(!1);return A.dom=u.dom,A.domSize=u.domSize,A.instance=u.instance,A.attrs=u.attrs,A.children=u.children,A.text=u.text,!0}var dt;return function(A,u,p){if(!A)throw new TypeError("DOM element being rendered to does not exist.");if(dt!=null&&A.contains(dt))throw new TypeError("Node is currently being rendered to and thus is locked.");var O=r,N=dt,z=[],q=s(),ae=A.namespaceURI;dt=A,r=typeof p=="function"?p:void 0;try{A.vnodes==null&&(A.textContent=""),u=va.normalizeChildren(Array.isArray(u)?u:[u]),R(A,A.vnodes,u,z,null,ae==="http://www.w3.org/1999/xhtml"?void 0:ae),A.vnodes=u,q!=null&&s()!==q&&typeof q.focus=="function"&&q.focus();for(var Q=0;Q<z.length;Q++)z[Q]()}finally{r=O,dt=N}}},is=Jd(typeof window<"u"?window:null),zi=Ht(),Zd=function(t,e,r){var n=[],a=!1,i=-1;function o(){for(i=0;i<n.length;i+=2)try{t(n[i],zi(n[i+1]),s)}catch(h){r.error(h)}i=-1}function s(){a||(a=!0,e(function(){a=!1,o()}))}s.sync=o;function c(h,v){if(v!=null&&v.view==null&&typeof v!="function")throw new TypeError("m.mount expects a component, not a vnode.");var y=n.indexOf(h);y>=0&&(n.splice(y,2),y<=i&&(i-=2),t(h,[])),v!=null&&(n.push(h,v),t(h,zi(v),s))}return{mount:c,redraw:s}},qd=is,mi=Zd(qd,typeof requestAnimationFrame<"u"?requestAnimationFrame:null,typeof console<"u"?console:null),_a,Gi;function os(){return Gi||(Gi=1,_a=function(t){if(Object.prototype.toString.call(t)!=="[object Object]")return"";var e=[];for(var r in t)n(r,t[r]);return e.join("&");function n(a,i){if(Array.isArray(i))for(var o=0;o<i.length;o++)n(a+"["+o+"]",i[o]);else if(Object.prototype.toString.call(i)==="[object Object]")for(var o in i)n(a+"["+o+"]",i[o]);else e.push(encodeURIComponent(a)+(i!=null&&i!==""?"="+encodeURIComponent(i):""))}}),_a}var ba,Fi;function ss(){if(Fi)return ba;Fi=1;var t=$n;return ba=Object.assign||function(e,r){for(var n in r)t.call(r,n)&&(e[n]=r[n])},ba}var Sa,Wi;function gi(){if(Wi)return Sa;Wi=1;var t=os(),e=ss();return Sa=function(r,n){if(/:([^\/\.-]+)(\.{3})?:/.test(r))throw new SyntaxError("Template parameter names must be separated by either a '/', '-', or '.'.");if(n==null)return r;var a=r.indexOf("?"),i=r.indexOf("#"),o=i<0?r.length:i,s=a<0?o:a,c=r.slice(0,s),h={};e(h,n);var v=c.replace(/:([^\/\.-]+)(\.{3})?/g,function(R,B,ee){return delete h[B],n[B]==null?R:ee?n[B]:encodeURIComponent(String(n[B]))}),y=v.indexOf("?"),E=v.indexOf("#"),P=E<0?v.length:E,g=y<0?P:y,S=v.slice(0,g);a>=0&&(S+=r.slice(a,o)),y>=0&&(S+=(a<0?"?":"&")+v.slice(y,P));var C=t(h);return C&&(S+=(a<0&&y<0?"?":"&")+C),i>=0&&(S+=r.slice(i)),E>=0&&(S+=(i<0?"":"&")+v.slice(E)),S},Sa}var eA=gi(),$i=$n,tA=function(t,e,r){var n=0;function a(s){return new e(s)}a.prototype=e.prototype,a.__proto__=e;function i(s){return function(c,h){typeof c!="string"?(h=c,c=c.url):h==null&&(h={});var v=new e(function(g,S){s(eA(c,h.params),h,function(C){if(typeof h.type=="function")if(Array.isArray(C))for(var R=0;R<C.length;R++)C[R]=new h.type(C[R]);else C=new h.type(C);g(C)},S)});if(h.background===!0)return v;var y=0;function E(){--y===0&&typeof r=="function"&&r()}return P(v);function P(g){var S=g.then;return g.constructor=a,g.then=function(){y++;var C=S.apply(g,arguments);return C.then(E,function(R){if(E(),y===0)throw R}),P(C)},g}}}function o(s,c){for(var h in s.headers)if($i.call(s.headers,h)&&h.toLowerCase()===c)return!0;return!1}return{request:i(function(s,c,h,v){var y=c.method!=null?c.method.toUpperCase():"GET",E=c.body,P=(c.serialize==null||c.serialize===JSON.serialize)&&!(E instanceof t.FormData||E instanceof t.URLSearchParams),g=c.responseType||(typeof c.extract=="function"?"":"json"),S=new t.XMLHttpRequest,C=!1,R=!1,B=S,ee,re=S.abort;S.abort=function(){C=!0,re.call(this)},S.open(y,s,c.async!==!1,typeof c.user=="string"?c.user:void 0,typeof c.password=="string"?c.password:void 0),P&&E!=null&&!o(c,"content-type")&&S.setRequestHeader("Content-Type","application/json; charset=utf-8"),typeof c.deserialize!="function"&&!o(c,"accept")&&S.setRequestHeader("Accept","application/json, text/*"),c.withCredentials&&(S.withCredentials=c.withCredentials),c.timeout&&(S.timeout=c.timeout),S.responseType=g;for(var H in c.headers)$i.call(c.headers,H)&&S.setRequestHeader(H,c.headers[H]);S.onreadystatechange=function(J){if(!C&&J.target.readyState===4)try{var K=J.target.status>=200&&J.target.status<300||J.target.status===304||/^file:\/\//i.test(s),U=J.target.response,F;if(g==="json"){if(!J.target.responseType&&typeof c.extract!="function")try{U=JSON.parse(J.target.responseText)}catch{U=null}}else(!g||g==="text")&&U==null&&(U=J.target.responseText);if(typeof c.extract=="function"?(U=c.extract(J.target,c),K=!0):typeof c.deserialize=="function"&&(U=c.deserialize(U)),K)h(U);else{var fe=function(){try{F=J.target.responseText}catch{F=U}var ne=new Error(F);ne.code=J.target.status,ne.response=U,v(ne)};S.status===0?setTimeout(function(){R||fe()}):fe()}}catch(ne){v(ne)}},S.ontimeout=function(J){R=!0;var K=new Error("Request timed out");K.code=J.target.status,v(K)},typeof c.config=="function"&&(S=c.config(S,c,s)||S,S!==B&&(ee=S.abort,S.abort=function(){C=!0,ee.call(this)})),E==null?S.send():typeof c.serialize=="function"?S.send(c.serialize(E)):E instanceof t.FormData||E instanceof t.URLSearchParams?S.send(E):S.send(JSON.stringify(E))}),jsonp:i(function(s,c,h,v){var y=c.callbackName||"_mithril_"+Math.round(Math.random()*1e16)+"_"+n++,E=t.document.createElement("script");t[y]=function(P){delete t[y],E.parentNode.removeChild(E),h(P)},E.onerror=function(){delete t[y],E.parentNode.removeChild(E),v(new Error("JSONP request failed"))},E.src=s+(s.indexOf("?")<0?"?":"&")+encodeURIComponent(c.callbackKey||"callback")+"="+encodeURIComponent(y),t.document.documentElement.appendChild(E)})}},rA=Bn,nA=mi,aA=tA(typeof window<"u"?window:null,rA,nA.redraw),Ea,Ki;function ls(){if(Ki)return Ea;Ki=1;function t(e){try{return decodeURIComponent(e)}catch{return e}}return Ea=function(e){if(e===""||e==null)return{};e.charAt(0)==="?"&&(e=e.slice(1));for(var r=e.split("&"),n={},a={},i=0;i<r.length;i++){var o=r[i].split("="),s=t(o[0]),c=o.length===2?t(o[1]):"";c==="true"?c=!0:c==="false"&&(c=!1);var h=s.split(/\]\[?|\[/),v=a;s.indexOf("[")>-1&&h.pop();for(var y=0;y<h.length;y++){var E=h[y],P=h[y+1],g=P==""||!isNaN(parseInt(P,10));if(E===""){var s=h.slice(0,y).join();n[s]==null&&(n[s]=Array.isArray(v)?v.length:0),E=n[s]++}else if(E==="__proto__")break;if(y===h.length-1)v[E]=c;else{var S=Object.getOwnPropertyDescriptor(v,E);S!=null&&(S=S.value),S==null&&(v[E]=S=g?[]:{}),v=S}}}return a},Ea}var wa,Yi;function yi(){if(Yi)return wa;Yi=1;var t=ls();return wa=function(e){var r=e.indexOf("?"),n=e.indexOf("#"),a=n<0?e.length:n,i=r<0?a:r,o=e.slice(0,i).replace(/\/{2,}/g,"/");return o?(o[0]!=="/"&&(o="/"+o),o.length>1&&o[o.length-1]==="/"&&(o=o.slice(0,-1))):o="/",{path:o,params:r<0?{}:t(e.slice(r+1,a))}},wa}var Ia,Qi;function iA(){if(Qi)return Ia;Qi=1;var t=yi();return Ia=function(e){var r=t(e),n=Object.keys(r.params),a=[],i=new RegExp("^"+r.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,function(o,s,c){return s==null?"\\"+o:(a.push({k:s,r:c==="..."}),c==="..."?"(.*)":c==="."?"([^/]+)\\.":"([^/]+)"+(c||""))})+"$");return function(o){for(var s=0;s<n.length;s++)if(r.params[n[s]]!==o.params[n[s]])return!1;if(!a.length)return i.test(o.path);var c=i.exec(o.path);if(c==null)return!1;for(var s=0;s<a.length;s++)o.params[a[s].k]=a[s].r?c[s+1]:decodeURIComponent(c[s+1]);return!0}},Ia}var Ca,Xi;function us(){if(Xi)return Ca;Xi=1;var t=$n,e=new RegExp("^(?:key|oninit|oncreate|onbeforeupdate|onupdate|onbeforeremove|onremove)$");return Ca=function(r,n){var a={};if(n!=null)for(var i in r)t.call(r,i)&&!e.test(i)&&n.indexOf(i)<0&&(a[i]=r[i]);else for(var i in r)t.call(r,i)&&!e.test(i)&&(a[i]=r[i]);return a},Ca}var Ta,Ji;function oA(){if(Ji)return Ta;Ji=1;var t=Ht(),e=ns,r=Bn,n=gi(),a=yi(),i=iA(),o=ss(),s=us(),c={};function h(v){try{return decodeURIComponent(v)}catch{return v}}return Ta=function(v,y){var E=v==null?null:typeof v.setImmediate=="function"?v.setImmediate:v.setTimeout,P=r.resolve(),g=!1,S=!1,C=0,R,B,ee=c,re,H,J,K,U={onbeforeupdate:function(){return C=C?2:1,!(!C||c===ee)},onremove:function(){v.removeEventListener("popstate",ne,!1),v.removeEventListener("hashchange",fe,!1)},view:function(){if(!(!C||c===ee)){var te=[t(re,H.key,H)];return ee&&(te=ee.render(te[0])),te}}},F=se.SKIP={};function fe(){g=!1;var te=v.location.hash;se.prefix[0]!=="#"&&(te=v.location.search+te,se.prefix[0]!=="?"&&(te=v.location.pathname+te,te[0]!=="/"&&(te="/"+te)));var he=te.concat().replace(/(?:%[a-f89][a-f0-9])+/gim,h).slice(se.prefix.length),ue=a(he);o(ue.params,v.history.state);function Se(pe){console.error(pe),be(B,null,{replace:!0})}De(0);function De(pe){for(;pe<R.length;pe++)if(R[pe].check(ue)){var je=R[pe].component,et=R[pe].route,wt=je,It=K=function(yt){if(It===K){if(yt===F)return De(pe+1);re=yt!=null&&(typeof yt.view=="function"||typeof yt=="function")?yt:"div",H=ue.params,J=he,K=null,ee=je.render?je:null,C===2?y.redraw():(C=2,y.redraw.sync())}};je.view||typeof je=="function"?(je={},It(wt)):je.onmatch?P.then(function(){return je.onmatch(ue.params,he,et)}).then(It,he===B?null:Se):It("div");return}if(he===B)throw new Error("Could not resolve default route "+B+".");be(B,null,{replace:!0})}}function ne(){g||(g=!0,E(fe))}function be(te,he,ue){if(te=n(te,he),S){ne();var Se=ue?ue.state:null,De=ue?ue.title:null;ue&&ue.replace?v.history.replaceState(Se,De,se.prefix+te):v.history.pushState(Se,De,se.prefix+te)}else v.location.href=se.prefix+te}function se(te,he,ue){if(!te)throw new TypeError("DOM element being rendered to does not exist.");if(R=Object.keys(ue).map(function(De){if(De[0]!=="/")throw new SyntaxError("Routes must start with a '/'.");if(/:([^\/\.-]+)(\.{3})?:/.test(De))throw new SyntaxError("Route parameter names must be separated with either '/', '.', or '-'.");return{route:De,component:ue[De],check:i(De)}}),B=he,he!=null){var Se=a(he);if(!R.some(function(De){return De.check(Se)}))throw new ReferenceError("Default route doesn't match any known routes.")}typeof v.history.pushState=="function"?v.addEventListener("popstate",ne,!1):se.prefix[0]==="#"&&v.addEventListener("hashchange",fe,!1),S=!0,y.mount(te,U),fe()}return se.set=function(te,he,ue){K!=null&&(ue=ue||{},ue.replace=!0),K=null,be(te,he,ue)},se.get=function(){return J},se.prefix="#!",se.Link={view:function(te){var he=e(te.attrs.selector||"a",s(te.attrs,["options","params","selector","onclick"]),te.children),ue,Se,De;return(he.attrs.disabled=Boolean(he.attrs.disabled))?(he.attrs.href=null,he.attrs["aria-disabled"]="true"):(ue=te.attrs.options,Se=te.attrs.onclick,De=n(he.attrs.href,te.attrs.params),he.attrs.href=se.prefix+De,he.attrs.onclick=function(pe){var je;typeof Se=="function"?je=Se.call(pe.currentTarget,pe):Se==null||typeof Se!="object"||typeof Se.handleEvent=="function"&&Se.handleEvent(pe),je!==!1&&!pe.defaultPrevented&&(pe.button===0||pe.which===0||pe.which===1)&&(!pe.currentTarget.target||pe.currentTarget.target==="_self")&&!pe.ctrlKey&&!pe.metaKey&&!pe.shiftKey&&!pe.altKey&&(pe.preventDefault(),pe.redraw=!1,se.set(De,null,ue))}),he}},se.param=function(te){return H&&te!=null?H[te]:H},se},Ta}var Da,Zi;function sA(){if(Zi)return Da;Zi=1;var t=mi;return Da=oA()(typeof window<"u"?window:null,t),Da}var Kn=Xd,cs=aA,ds=mi,Fe=function(){return Kn.apply(this,arguments)};Fe.m=Kn;Fe.trust=Kn.trust;Fe.fragment=Kn.fragment;Fe.Fragment="[";Fe.mount=ds.mount;Fe.route=sA();Fe.render=is;Fe.redraw=ds.redraw;Fe.request=cs.request;Fe.jsonp=cs.jsonp;Fe.parseQueryString=ls();Fe.buildQueryString=os();Fe.parsePathname=yi();Fe.buildPathname=gi();Fe.vnode=Ht();Fe.PromisePolyfill=as();Fe.censor=us();var X=Fe,Ja={},lA={get exports(){return Ja},set exports(t){Ja=t}},Za={},uA={get exports(){return Za},set exports(t){Za=t}};(function(t){(function(){r.SKIP={},r.lift=s,r.scan=i,r.merge=a,r.combine=n,r.scanMerge=o,r["fantasy-land/of"]=r;var e=!1;Object.defineProperty(r,"HALT",{get:function(){return e||console.log("HALT is deprecated and has been renamed to SKIP"),e=!0,r.SKIP}});function r(h){var v=[],y=[];function E(S){return arguments.length&&S!==r.SKIP&&(h=S,c(E)&&(E._changing(),E._state="active",v.slice().forEach(function(C,R){c(C)&&C(this[R](h))},y.slice()))),h}E.constructor=r,E._state=arguments.length&&h!==r.SKIP?"active":"pending",E._parents=[],E._changing=function(){c(E)&&(E._state="changing"),v.forEach(function(S){S._changing()})},E._map=function(S,C){var R=C?r():r(S(h));return R._parents.push(E),v.push(R),y.push(S),R},E.map=function(S){return E._map(S,E._state!=="active")};var P;function g(){return P=r(),P.map(function(S){return S===!0&&(E._parents.forEach(function(C){C._unregisterChild(E)}),E._state="ended",E._parents.length=v.length=y.length=0),S}),P}return E.toJSON=function(){return h!=null&&typeof h.toJSON=="function"?h.toJSON():h},E["fantasy-land/map"]=E.map,E["fantasy-land/ap"]=function(S){return n(function(C,R){return C()(R())},[S,E])},E._unregisterChild=function(S){var C=v.indexOf(S);C!==-1&&(v.splice(C,1),y.splice(C,1))},Object.defineProperty(E,"end",{get:function(){return P||g()}}),E}function n(h,v){var y=v.every(function(C){if(C.constructor!==r)throw new Error("Ensure that each item passed to stream.combine/stream.merge/lift is a stream.");return C._state==="active"}),E=y?r(h.apply(null,v.concat([v]))):r(),P=[],g=v.map(function(C){return C._map(function(R){return P.push(C),(y||v.every(function(B){return B._state!=="pending"}))&&(y=!0,E(h.apply(null,v.concat([P]))),P=[]),R},!0)}),S=E.end.map(function(C){C===!0&&(g.forEach(function(R){R.end(!0)}),S.end(!0))});return E}function a(h){return n(function(){return h.map(function(v){return v()})},h)}function i(h,v,y){var E=y.map(function(P){var g=h(v,P);return g!==r.SKIP&&(v=g),g});return E(v),E}function o(h,v){var y=h.map(function(P){return P[0]}),E=n(function(){var P=arguments[arguments.length-1];return y.forEach(function(g,S){P.indexOf(g)>-1&&(v=h[S][1](v,g()))}),v},y);return E(v),E}function s(){var h=arguments[0],v=Array.prototype.slice.call(arguments,1);return a(v).map(function(y){return h.apply(void 0,y)})}function c(h){return h._state==="pending"||h._state==="active"||h._state==="changing"}t.exports=r})()})(uA);(function(t){t.exports=Za})(lA);var ze=es(Ja),cA={webm:"data:video/webm;base64,GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4EEQoWBAhhTgGcBAAAAAAAVkhFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsghV17AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU1LjMzLjEwMFdBjUxhdmY1NS4zMy4xMDBzpJBlrrXf3DCDVB8KcgbMpcr+RImIQJBgAAAAAAAWVK5rAQAAAAAAD++uAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDiDgQEj44OEAmJaAOABAAAAAAAABrCBsLqBkK4BAAAAAAAPq9eBAnPFgQKcgQAitZyDdW5khohBX1ZPUkJJU4OBAuEBAAAAAAAAEZ+BArWIQOdwAAAAAABiZIEgY6JPbwIeVgF2b3JiaXMAAAAAAoC7AAAAAAAAgLUBAAAAAAC4AQN2b3JiaXMtAAAAWGlwaC5PcmcgbGliVm9yYmlzIEkgMjAxMDExMDEgKFNjaGF1ZmVudWdnZXQpAQAAABUAAABlbmNvZGVyPUxhdmM1NS41Mi4xMDIBBXZvcmJpcyVCQ1YBAEAAACRzGCpGpXMWhBAaQlAZ4xxCzmvsGUJMEYIcMkxbyyVzkCGkoEKIWyiB0JBVAABAAACHQXgUhIpBCCGEJT1YkoMnPQghhIg5eBSEaUEIIYQQQgghhBBCCCGERTlokoMnQQgdhOMwOAyD5Tj4HIRFOVgQgydB6CCED0K4moOsOQghhCQ1SFCDBjnoHITCLCiKgsQwuBaEBDUojILkMMjUgwtCiJqDSTX4GoRnQXgWhGlBCCGEJEFIkIMGQcgYhEZBWJKDBjm4FITLQagahCo5CB+EIDRkFQCQAACgoiiKoigKEBqyCgDIAAAQQFEUx3EcyZEcybEcCwgNWQUAAAEACAAAoEiKpEiO5EiSJFmSJVmSJVmS5omqLMuyLMuyLMsyEBqyCgBIAABQUQxFcRQHCA1ZBQBkAAAIoDiKpViKpWiK54iOCISGrAIAgAAABAAAEDRDUzxHlETPVFXXtm3btm3btm3btm3btm1blmUZCA1ZBQBAAAAQ0mlmqQaIMAMZBkJDVgEACAAAgBGKMMSA0JBVAABAAACAGEoOogmtOd+c46BZDppKsTkdnEi1eZKbirk555xzzsnmnDHOOeecopxZDJoJrTnnnMSgWQqaCa0555wnsXnQmiqtOeeccc7pYJwRxjnnnCateZCajbU555wFrWmOmkuxOeecSLl5UptLtTnnnHPOOeecc84555zqxekcnBPOOeecqL25lpvQxTnnnE/G6d6cEM4555xzzjnnnHPOOeecIDRkFQAABABAEIaNYdwpCNLnaCBGEWIaMulB9+gwCRqDnELq0ehopJQ6CCWVcVJKJwgNWQUAAAIAQAghhRRSSCGFFFJIIYUUYoghhhhyyimnoIJKKqmooowyyyyzzDLLLLPMOuyssw47DDHEEEMrrcRSU2011lhr7jnnmoO0VlprrbVSSimllFIKQkNWAQAgAAAEQgYZZJBRSCGFFGKIKaeccgoqqIDQkFUAACAAgAAAAABP8hzRER3RER3RER3RER3R8RzPESVREiVREi3TMjXTU0VVdWXXlnVZt31b2IVd933d933d+HVhWJZlWZZlWZZlWZZlWZZlWZYgNGQVAAACAAAghBBCSCGFFFJIKcYYc8w56CSUEAgNWQUAAAIACAAAAHAUR3EcyZEcSbIkS9IkzdIsT/M0TxM9URRF0zRV0RVdUTdtUTZl0zVdUzZdVVZtV5ZtW7Z125dl2/d93/d93/d93/d93/d9XQdCQ1YBABIAADqSIymSIimS4ziOJElAaMgqAEAGAEAAAIriKI7jOJIkSZIlaZJneZaomZrpmZ4qqkBoyCoAABAAQAAAAAAAAIqmeIqpeIqoeI7oiJJomZaoqZoryqbsuq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq4LhIasAgAkAAB0JEdyJEdSJEVSJEdygNCQVQCADACAAAAcwzEkRXIsy9I0T/M0TxM90RM901NFV3SB0JBVAAAgAIAAAAAAAAAMybAUy9EcTRIl1VItVVMt1VJF1VNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVN0zRNEwgNWQkAkAEAkBBTLS3GmgmLJGLSaqugYwxS7KWxSCpntbfKMYUYtV4ah5RREHupJGOKQcwtpNApJq3WVEKFFKSYYyoVUg5SIDRkhQAQmgHgcBxAsixAsiwAAAAAAAAAkDQN0DwPsDQPAAAAAAAAACRNAyxPAzTPAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAA0DwP8DwR8EQRAAAAAAAAACzPAzTRAzxRBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAAsDwP8EQR0DwRAAAAAAAAACzPAzxRBDzRAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAEOAAABBgIRQasiIAiBMAcEgSJAmSBM0DSJYFTYOmwTQBkmVB06BpME0AAAAAAAAAAAAAJE2DpkHTIIoASdOgadA0iCIAAAAAAAAAAAAAkqZB06BpEEWApGnQNGgaRBEAAAAAAAAAAAAAzzQhihBFmCbAM02IIkQRpgkAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAGHAAAAgwoQwUGrIiAIgTAHA4imUBAIDjOJYFAACO41gWAABYliWKAABgWZooAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAYcAAACDChDBQashIAiAIAcCiKZQHHsSzgOJYFJMmyAJYF0DyApgFEEQAIAAAocAAACLBBU2JxgEJDVgIAUQAABsWxLE0TRZKkaZoniiRJ0zxPFGma53meacLzPM80IYqiaJoQRVE0TZimaaoqME1VFQAAUOAAABBgg6bE4gCFhqwEAEICAByKYlma5nmeJ4qmqZokSdM8TxRF0TRNU1VJkqZ5niiKommapqqyLE3zPFEURdNUVVWFpnmeKIqiaaqq6sLzPE8URdE0VdV14XmeJ4qiaJqq6roQRVE0TdNUTVV1XSCKpmmaqqqqrgtETxRNU1Vd13WB54miaaqqq7ouEE3TVFVVdV1ZBpimaaqq68oyQFVV1XVdV5YBqqqqruu6sgxQVdd1XVmWZQCu67qyLMsCAAAOHAAAAoygk4wqi7DRhAsPQKEhKwKAKAAAwBimFFPKMCYhpBAaxiSEFEImJaXSUqogpFJSKRWEVEoqJaOUUmopVRBSKamUCkIqJZVSAADYgQMA2IGFUGjISgAgDwCAMEYpxhhzTiKkFGPOOScRUoox55yTSjHmnHPOSSkZc8w556SUzjnnnHNSSuacc845KaVzzjnnnJRSSuecc05KKSWEzkEnpZTSOeecEwAAVOAAABBgo8jmBCNBhYasBABSAQAMjmNZmuZ5omialiRpmud5niiapiZJmuZ5nieKqsnzPE8URdE0VZXneZ4oiqJpqirXFUXTNE1VVV2yLIqmaZqq6rowTdNUVdd1XZimaaqq67oubFtVVdV1ZRm2raqq6rqyDFzXdWXZloEsu67s2rIAAPAEBwCgAhtWRzgpGgssNGQlAJABAEAYg5BCCCFlEEIKIYSUUggJAAAYcAAACDChDBQashIASAUAAIyx1lprrbXWQGettdZaa62AzFprrbXWWmuttdZaa6211lJrrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmstpZRSSimllFJKKaWUUkoppZRSSgUA+lU4APg/2LA6wknRWGChISsBgHAAAMAYpRhzDEIppVQIMeacdFRai7FCiDHnJKTUWmzFc85BKCGV1mIsnnMOQikpxVZjUSmEUlJKLbZYi0qho5JSSq3VWIwxqaTWWoutxmKMSSm01FqLMRYjbE2ptdhqq7EYY2sqLbQYY4zFCF9kbC2m2moNxggjWywt1VprMMYY3VuLpbaaizE++NpSLDHWXAAAd4MDAESCjTOsJJ0VjgYXGrISAAgJACAQUooxxhhzzjnnpFKMOeaccw5CCKFUijHGnHMOQgghlIwx5pxzEEIIIYRSSsaccxBCCCGEkFLqnHMQQgghhBBKKZ1zDkIIIYQQQimlgxBCCCGEEEoopaQUQgghhBBCCKmklEIIIYRSQighlZRSCCGEEEIpJaSUUgohhFJCCKGElFJKKYUQQgillJJSSimlEkoJJYQSUikppRRKCCGUUkpKKaVUSgmhhBJKKSWllFJKIYQQSikFAAAcOAAABBhBJxlVFmGjCRcegEJDVgIAZAAAkKKUUiktRYIipRikGEtGFXNQWoqocgxSzalSziDmJJaIMYSUk1Qy5hRCDELqHHVMKQYtlRhCxhik2HJLoXMOAAAAQQCAgJAAAAMEBTMAwOAA4XMQdAIERxsAgCBEZohEw0JweFAJEBFTAUBigkIuAFRYXKRdXECXAS7o4q4DIQQhCEEsDqCABByccMMTb3jCDU7QKSp1IAAAAAAADADwAACQXAAREdHMYWRobHB0eHyAhIiMkAgAAAAAABcAfAAAJCVAREQ0cxgZGhscHR4fICEiIyQBAIAAAgAAAAAggAAEBAQAAAAAAAIAAAAEBB9DtnUBAAAAAAAEPueBAKOFggAAgACjzoEAA4BwBwCdASqwAJAAAEcIhYWIhYSIAgIABhwJ7kPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99YAD+/6tQgKOFggADgAqjhYIAD4AOo4WCACSADqOZgQArADECAAEQEAAYABhYL/QACIBDmAYAAKOFggA6gA6jhYIAT4AOo5mBAFMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAGSADqOFggB6gA6jmYEAewAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAj4AOo5mBAKMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAKSADqOFggC6gA6jmYEAywAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAz4AOo4WCAOSADqOZgQDzADECAAEQEAAYABhYL/QACIBDmAYAAKOFggD6gA6jhYIBD4AOo5iBARsAEQIAARAQFGAAYWC/0AAiAQ5gGACjhYIBJIAOo4WCATqADqOZgQFDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggFPgA6jhYIBZIAOo5mBAWsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAXqADqOFggGPgA6jmYEBkwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIBpIAOo4WCAbqADqOZgQG7ADECAAEQEAAYABhYL/QACIBDmAYAAKOFggHPgA6jmYEB4wAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIB5IAOo4WCAfqADqOZgQILADECAAEQEAAYABhYL/QACIBDmAYAAKOFggIPgA6jhYICJIAOo5mBAjMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAjqADqOFggJPgA6jmYECWwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYICZIAOo4WCAnqADqOZgQKDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggKPgA6jhYICpIAOo5mBAqsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCArqADqOFggLPgA6jmIEC0wARAgABEBAUYABhYL/QACIBDmAYAKOFggLkgA6jhYIC+oAOo5mBAvsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAw+ADqOZgQMjADECAAEQEAAYABhYL/QACIBDmAYAAKOFggMkgA6jhYIDOoAOo5mBA0sAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA0+ADqOFggNkgA6jmYEDcwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIDeoAOo4WCA4+ADqOZgQObADECAAEQEAAYABhYL/QACIBDmAYAAKOFggOkgA6jhYIDuoAOo5mBA8MAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA8+ADqOFggPkgA6jhYID+oAOo4WCBA+ADhxTu2sBAAAAAAAAEbuPs4EDt4r3gQHxghEr8IEK",mp4:"data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"};const{webm:dA,mp4:AA}=cA,Oa=()=>typeof navigator<"u"&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,Ra=()=>"wakeLock"in navigator;class fA{constructor(){if(this.enabled=!1,Ra()){this._wakeLock=null;const e=()=>{this._wakeLock!==null&&document.visibilityState==="visible"&&this.enable()};document.addEventListener("visibilitychange",e),document.addEventListener("fullscreenchange",e)}else Oa()?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("title","No Sleep"),this.noSleepVideo.setAttribute("playsinline",""),this._addSourceToVideo(this.noSleepVideo,"webm",dA),this._addSourceToVideo(this.noSleepVideo,"mp4",AA),this.noSleepVideo.addEventListener("loadedmetadata",()=>{this.noSleepVideo.duration<=1?this.noSleepVideo.setAttribute("loop",""):this.noSleepVideo.addEventListener("timeupdate",()=>{this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())})}))}_addSourceToVideo(e,r,n){var a=document.createElement("source");a.src=n,a.type=`video/${r}`,e.appendChild(a)}get isEnabled(){return this.enabled}enable(){return Ra()?navigator.wakeLock.request("screen").then(e=>{this._wakeLock=e,this.enabled=!0,console.log("Wake Lock active."),this._wakeLock.addEventListener("release",()=>{console.log("Wake Lock released.")})}).catch(e=>{throw this.enabled=!1,console.error(`${e.name}, ${e.message}`),e}):Oa()?(this.disable(),console.warn(`
        NoSleep enabled for older iOS devices. This can interrupt
        active or long-running network requests from completing successfully.
        See https://github.com/richtr/NoSleep.js/issues/15 for more details.
      `),this.noSleepTimer=window.setInterval(()=>{document.hidden||(window.location.href=window.location.href.split("#")[0],window.setTimeout(window.stop,0))},15e3),this.enabled=!0,Promise.resolve()):this.noSleepVideo.play().then(r=>(this.enabled=!0,r)).catch(r=>{throw this.enabled=!1,r})}disable(){Ra()?(this._wakeLock&&this._wakeLock.release(),this._wakeLock=null):Oa()?this.noSleepTimer&&(console.warn(`
          NoSleep now disabled for older iOS devices.
        `),window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause(),this.enabled=!1}}var hA=fA;let qa;typeof document<"u"&&(qa=new hA);function qi(){return{componentsButtonLoading:"",componentsDropdownMenu:"",componentsDropdownMenuAbove:!1,layoutAppAlerts:[],layoutAppBreadCrumbs:[],layoutAppForm:{component:null,data:{}},layoutAppHelpLink:"",layoutAppHelpOpen:!1,layoutAppMenuOpen:!1,layoutAppMenuPath:"",layoutAppToolbarActionButtons:[],sessionAdmin:!1,sessionAuthenticated:!1,sessionDebug:!1,sessionDisplay:kt.XLarge,sessionHideMOTD:!1,sessionInstallPrompt:null,sessionInstallPromptDismissed:!1,sessionOnline:!0,sessionRedirects:[],sessionServiceWorkerRegistration:null,sessionSleepDisabled:!1}}const b={clearLayoutAppAlert:t=>{const e=b.data.layoutAppAlerts,r=e.findIndex(n=>n.message===t);r>=0&&e.splice(r,1),b.set({layoutAppAlerts:e}),X.redraw()},data:qi(),formatCivilDate:t=>typeof t=="object"&&t!==null?t.toString(b.preferences().formatDateOrder,b.preferences().formatDateSeparator):ve.fromString(t).toString(b.preferences().formatDateOrder,b.preferences().formatDateSeparator),formatTimestamp:t=>t.toPrettyString(b.preferences().formatDateOrder,b.preferences().formatDateSeparator,b.preferences().formatTime24),getComponentsButtonLoading:()=>b.data.componentsButtonLoading,getComponentsDropdownMenu:()=>b.data.componentsDropdownMenu,getComponentsDropdownMenuAbove:()=>b.data.componentsDropdownMenuAbove,getLayoutAppAlerts:()=>b.data.layoutAppAlerts,getLayoutAppBreadcrumbs:()=>b.data.layoutAppBreadCrumbs,getLayoutAppForm:()=>b.data.layoutAppForm,getLayoutAppMenuPath:()=>b.data.layoutAppMenuPath,getLayoutAppToolbarActionButtons:()=>b.data.layoutAppToolbarActionButtons,getSessionDisplay:()=>b.data.sessionDisplay,getSessionInstallPrompt:()=>b.data.sessionInstallPrompt,getSessionRedirects:()=>b.data.sessionRedirects,getSessionServiceWorkerRegistration:()=>b.data.sessionServiceWorkerRegistration,init:(t,e,r,n,a,i,o)=>{b.motd=t,b.oncreate=e,b.ondebug=r,b.parserFormItemAutocomplete=n,b.parserMarkdown=a,b.preferences.end(!0),b.preferences=i.map(s=>({...s,styleAccent:`_${ct.getValue(s.colorAccent).toLowerCase()}`,styleMode:`-${s.darkMode?"dark":"light"}`,styleModeInvert:`-${s.darkMode?"light":"dark"}`,styleNegative:`_${s.colorNegative===0?"pink":ct.getValue(s.colorNegative).toLowerCase()}`,stylePositive:`_${s.colorPositive===0?"teal":ct.getValue(s.colorPositive).toLowerCase()}`,stylePrimary:`_${ct.getValue(s.colorPrimary).toLowerCase()}`,styleSecondary:`_${ct.getValue(s.colorSecondary).toLowerCase()}`})),b.product=o,b.updateSize(),X.route.prefix="",window.addEventListener("resize",()=>{b.updateSize()})},isLayoutAppHelpOpen:()=>b.data.layoutAppHelpOpen,isLayoutAppMenuOpen:()=>b.data.layoutAppMenuOpen,isSessionAdmin:()=>b.data.sessionAdmin,isSessionAuthenticated:()=>b.data.sessionAuthenticated,isSessionDebug:()=>b.data.sessionDebug,isSessionHideMOTD:()=>b.data.sessionHideMOTD,isSessionOnline:()=>b.data.sessionOnline,isSessionSleepDisabled:()=>b.data.sessionSleepDisabled,motd:()=>{},oncreate:async()=>{},ondebug:()=>({endpoint:"",path:"",serviceName:""}),parserFormItemAutocomplete:{options:ze([]),parse:()=>({options:[],splice:"",visible:!1})},parserMarkdown:{match:/a^/,parse:()=>({link:"",name:""})},preferences:ze({colorAccent:Z.Default,colorNegative:Z.Default,colorPositive:Z.Default,colorPrimary:Z.Default,colorSecondary:Z.Default,darkMode:!1,formatDateOrder:Wt.MDY,formatDateSeparator:hi.ForwardSlash,formatTime24:!1,styleAccent:"",styleMode:"",styleModeInvert:"",styleNegative:"",stylePositive:"",stylePrimary:"",styleSecondary:"",translations:{actionAdd:"Add",actionCancel:"Cancel",actionClose:"Close",actionConfirm:"Confirm",actionDelete:"Delete",actionDeleteConfirm:"Confirm Delete",actionDeselectAll:"Deselect All",actionDismiss:"Dismiss",actionEdit:"Edit",actionImport:"Import",actionKeepAwake:"Keep Awake",actionNew:"New",actionPreview:"Preview",actionSearch:"Search",actionShow:"Show",actionUpdate:"Update",alertNewVersion:"",appToolbarActionsOnThisPage:"On this page",formCreated:"Created",formImageSelect:"Select",formImportCSVField:"",formImportCSVSelectCSV:"Select CSV",formImportCSVTooltip:"",formItemDurationHour:"Hour",formItemDurationHours:"Hours",formItemDurationMinute:"Minute",formItemDurationMinutes:"Minutes",formItemInputIconName:"Icon",formItemInputIconTooltip:"tooltip",formItemNewPasswordPassword:"Password",formItemNewPasswordTooltip:"",formItemSelectColorName:"Color",formItemSelectColorTooltip:"",formItemSelectColorValues:ct.values.map((t,e)=>({color:e,id:`${e}`,key:e,name:t})),formItemSelectCurrencyFormat:"Currency Format",formItemSelectCurrencyFormatTooltip:"",formItemTextAreaScanText:"Scan Text From Picture",formLastUpdated:"Last Updated",formPermissionTypes:["Edit","View","None"],formRecurrenceDays:"Days",formRecurrenceEnd:"End Recurrence on",formRecurrenceEndTooltip:"",formRecurrenceFirst:"First",formRecurrenceFourth:"Fourth",formRecurrenceFourthToLast:"Fourth To Last",formRecurrenceLabel:"Repeat every...",formRecurrenceLast:"Last",formRecurrenceMonths:"Months",formRecurrenceNextDate:"Next Date",formRecurrenceSecond:"Second",formRecurrenceSecondToLast:"Second To Last",formRecurrenceSpecificDate:"Specific Date",formRecurrenceThird:"Third",formRecurrenceThirdToLast:"Third To Last",formRecurrenceTooltip:"",formRecurrenceWeekdays:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],formRecurrenceWeeks:"Weeks",formRecurrenceYears:"Years",help:"Help",noImage:"No Image",or:"Or",tableHeaderFilterTooltip:"",tableNothingFound:"Nothing Found",tableShowColumns:"SHow Columns",tooltipMarkdown:"markdown",undo:"Undo"}}),product:"",redirect:()=>{const t=b.data.sessionRedirects;t.length>0?(Mt.debug(`Redirect: ${t[0]} from ${X.route.get()}`),X.route.set(t[0],{},{replace:!0,state:{key:Date.now()}}),t.shift(),b.set({sessionRedirects:t})):(X.route.get()===void 0||X.route.get()!=="/home"&&!X.route.get().includes("/about")&&!X.route.get().includes("/cook/recipes/")&&!X.route.get().includes("/payment"))&&X.route.set("/home",{},{replace:!0,state:{key:Date.now()}})},reset:()=>{b.data=qi(),b.updateSize()},set:t=>{Mt.debug(`App state change: ${JSON.stringify(t)}`),b.data={...b.data,...t}},setComponentsButtonLoading:t=>{b.set({componentsButtonLoading:t})},setComponentsDropdownMenu:(t,e)=>{b.set({componentsDropdownMenu:t===b.data.componentsDropdownMenu?"":t,componentsDropdownMenuAbove:e>window.innerHeight*.75})},setLayoutApp:t=>{b.set({layoutAppBreadCrumbs:t.breadcrumbs,layoutAppHelpLink:t.helpLink,layoutAppToolbarActionButtons:t.toolbarActionButtons}),t.breadcrumbs.length===0?document.title=b.product:document.title=`${b.product} - ${t.breadcrumbs.map(e=>e.name).join(" - ")}`,X.redraw()},setLayoutAppAlert:(t,e)=>{if(typeof window>"u"||(Mt.debug(t.message),t.message===""||e===!0))return;const r=ge(b.data.layoutAppAlerts);r.findIndex(a=>a.message===t.message)>=0||(t.actions===void 0&&(t.actions=[]),t.actions.unshift({name:b.preferences().translations.actionDismiss,onclick:async()=>{b.clearLayoutAppAlert(t.message)}}),r.push(t),t.persist!==!0&&setTimeout(()=>{b.clearLayoutAppAlert(t.message)},3e3),b.set({layoutAppAlerts:r}),X.redraw())},setLayoutAppAlertNewVersion:()=>{const t=b.preferences().translations.alertNewVersion;b.setLayoutAppAlert({actions:[{name:"Activate",onclick:async()=>{b.clearLayoutAppAlert(t),window.location.reload()}}],message:t,persist:!0})},setLayoutAppForm:(t,e)=>{b.set({layoutAppForm:{component:t===void 0?null:t,data:e===void 0?b.data.layoutAppForm.data:ge(e)}}),X.redraw()},setLayoutAppMenuPath:t=>{b.set({layoutAppMenuPath:t})},setSessionAdmin:t=>{b.set({sessionAdmin:t})},setSessionAuthenticated:t=>{b.set({sessionAuthenticated:t})},setSessionHideMOTD:()=>{b.set({sessionHideMOTD:!0})},setSessionInstallPrompt:t=>{b.data.sessionInstallPromptDismissed||b.set({sessionInstallPrompt:t}),t===null&&b.set({sessionInstallPromptDismissed:!0})},setSessionRedirect:t=>{if(Array.isArray(t)){b.set({sessionRedirects:t});return}if(b.data.sessionRedirects.includes(t)||(Mt.debug(`Redirect set: ${t} from ${X.route.get()}`),t.includes("/reset")&&t.includes("/signin")&&t.includes("/signup")))return;const e=ge(b.data.sessionRedirects);e.unshift(t),b.set({sessionRedirects:e})},setSessionServiceWorkerRegistration:t=>{b.set({sessionServiceWorkerRegistration:t})},toggleLayoutAppHelpOpen:t=>{t===!0||t===!1?b.set({layoutAppHelpOpen:t}):b.set({layoutAppHelpOpen:!b.data.layoutAppHelpOpen})},toggleLayoutAppMenuOpen:t=>{t===!0||t===!1?b.set({layoutAppMenuOpen:t}):b.set({layoutAppMenuOpen:!b.data.layoutAppMenuOpen})},toggleSessionDebug:()=>{Ae.state=b.ondebug(),b.set({sessionDebug:!0})},toggleSessionSleepDisabled:()=>{b.set({sessionSleepDisabled:!b.data.sessionSleepDisabled}),b.data.sessionSleepDisabled?qa.enable():qa.disable()},updateSize:()=>{let t=kt.XSmall;window.matchMedia("(min-width: 1280px)").matches?(t=kt.XLarge,b.data.sessionAuthenticated&&(b.toggleLayoutAppMenuOpen(!0),X.redraw())):window.matchMedia("(min-width: 1024px)").matches?t=kt.Large:window.matchMedia("(min-width: 768px)").matches?t=kt.Medium:window.matchMedia("(min-width: 640px)").matches&&(t=kt.Small),t!==b.data.sessionDisplay&&(b.set({sessionDisplay:t}),X.redraw())}};class sn{constructor(e,r){this.hour=e,this.minute=r}static fromString(e){const n=/^([0-1][0-9]|2[0-3]):([0-5]\d)$/.exec(e);if(n===null)return this.now();const a=parseInt(n[1],10),i=parseInt(n[2],10);return new sn(a,i)}static now(){const e=new Date;return new sn(e.getHours(),e.getMinutes())}getMinute(){return`0${this.minute}`.slice(-2)}toJSON(){return this.toString(!0)}toString(e){const r=`0${this.minute}`.slice(-2);return e?`${`0${this.hour}`.slice(-2)}:${r}`:this.hour>12?`${this.hour-12}:${r} PM`:this.hour===12?`12:${r} PM`:this.hour===0?`12:${r} AM`:`${this.hour}:${r} AM`}valueOf(){return parseInt(`${this.hour}${this.getMinute()}`)}}const eo={getValues(t){return t?b.preferences().translations.formRecurrenceWeekdays:[b.preferences().translations.formRecurrenceWeekdays[6],...b.preferences().translations.formRecurrenceWeekdays.slice(0,6)]},values:["","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]};class G{constructor(e){this.timestamp=e}static fromCivilDate(e){return new G(new Date(e.year,e.month-1,e.day,0,0,0))}static fromString(e){return/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3,6})?Z$/.exec(`${e}`)===null?this.now():new G(new Date(`${e}`))}static getCivilDatesFromDateRange(e){const r=[],n=G.fromCivilDate(e.to),a=G.fromCivilDate(e.from);for(;a.timestamp<=n.timestamp;)r.push(a.toCivilDate()),a.addDays(1);return r}static midnight(e){let r=G.now();return e!==void 0&&(r=G.fromString(e)),r.toMidnight(),r}static now(){return new G(new Date)}addDays(e){this.timestamp.setDate(this.timestamp.getDate()+e)}addMinutes(e){this.timestamp.setMinutes(this.timestamp.getMinutes()+e)}addMonths(e){this.timestamp.setMonth(this.timestamp.getMonth()+e)}getDiffDays(e){return Math.round(Math.abs((e.timestamp.getTime()-this.timestamp.getTime())/(24*60*60*1e3)))}getDiffMinutes(e){return Math.floor((e.timestamp.getTime()-this.timestamp.getTime())/6e4)}getMonth(){return this.timestamp.getMonth()+1}getWeekStart(e){const r=new Date(this.timestamp.getTime());if(r.getDay()!==0&&(e===void 0||!e)&&r.setDate(r.getDate()-r.getDay()),r.getDay()!==1&&e!==void 0&&e){let n=1;r.getDay()===0&&(n=-6),r.setDate(r.getDate()-r.getDay()+n)}return new G(r)}getWeekday(){return this.timestamp.getDay()===0?7:this.timestamp.getDay()}setDate(e){this.timestamp=new Date(e.year,e.month-1,e.day,this.timestamp.getHours(),this.timestamp.getMinutes(),this.timestamp.getSeconds(),this.timestamp.getMilliseconds())}toCivilDate(){return new ve(this.timestamp.getFullYear(),this.timestamp.getMonth()+1,this.timestamp.getDate())}toCivilDateRangeCalendar(e){let r=new G(new Date(this.timestamp.getFullYear(),this.timestamp.getMonth(),1));r=r.getWeekStart(e);const n=new G(new Date(this.timestamp.getFullYear(),this.timestamp.getMonth()+1,0)),a=n.getWeekStart(e);return(n.timestamp.getTime()===a.timestamp.getTime()||n.timestamp.getTime()>a.timestamp.getTime())&&a.timestamp.setDate(a.timestamp.getDate()+6),{from:r.toCivilDate(),to:a.toCivilDate()}}toCivilDateRangeWeek(e){const r=this.getWeekStart(e),n=G.fromString(r.toString());return n.addDays(6),{from:r.toCivilDate(),to:n.toCivilDate()}}toCivilDateWeekFrom(e){const r=G.fromString(this.toString());return e?r.addDays(-7):r.addDays(7),r.toCivilDate()}toCivilTime(){return new sn(this.timestamp.getHours(),this.timestamp.getMinutes())}toDay(){return this.timestamp.getDay()===0?eo.values[7]:eo.values[this.timestamp.getDay()]}toDueDate(e){const r=G.now();if(r.timestamp.getFullYear()===this.timestamp.getFullYear()&&r.timestamp.getMonth()===this.timestamp.getMonth()&&r.timestamp.getDate()===this.timestamp.getDate())return this.timestamp.getHours()===0&&this.timestamp.getMinutes()===0?"Today":this.toCivilTime().toString(e);const n=G.fromString(r.toString());n.addDays(7);const a=G.fromString(r.toString());a.addMonths(-11);const i=G.fromString(r.toString());i.addMonths(11);const o=G.fromString(r.toString());return o.addDays(1),this.timestamp<n.timestamp&&this.timestamp>r.timestamp?this.timestamp.getDate()===o.timestamp.getDate()?"Tomorrow":this.toDay():this.timestamp<i.timestamp&&this.timestamp>a.timestamp?`${Ln.values[this.timestamp.getMonth()+1]} ${this.timestamp.getDate()}`:`${Ln.values[this.timestamp.getMonth()+1]} ${this.timestamp.getDate()} ${this.timestamp.getFullYear()}`}toHTMLDate(){return`${this.timestamp.getFullYear()}-${`0${this.timestamp.getMonth()+1}`.slice(-2)}-${`0${this.timestamp.getDate()}`.slice(-2)}T${`0${this.timestamp.getHours()}`.slice(-2)}:${`0${this.timestamp.getMinutes()}`.slice(-2)}`}toJSON(){return this.toString()}toMidnight(){this.timestamp.setHours(0),this.timestamp.setMinutes(0),this.timestamp.setSeconds(0),this.timestamp.setMilliseconds(0)}toString(){return this.timestamp.toISOString()}toPrettyString(e,r,n){return`${this.toCivilDate().toString(e,r)} ${this.toCivilTime().toString(n)}`}}const Ke={About:"info",AboutAPI:"api",AboutNew:"new_releases",AboutOSS:"plus_one",AboutPolicy:"gavel",Add:"add",Admin:"lock_open",After:"arrow_downward",All:"select_all",Assistant:"assistant",Awake:"local_cafe",Backup:"backup",Before:"arrow_upward",Bold:"format_bold",Bookmark:"bookmark_border",Browse:"toc",Budget:"savings",BudgetAccount:"account_balance",BudgetCategory:"payments",BudgetPayee:"store",BudgetTransaction:"receipt_long",Calendar:"calendar_month",CalendarAstronomy:"flare",CalendarHoliday:"notifications_paused",Cancel:"cancel",Chart:"insert_chart_outlined",CheckNo:"check_box_outline_blank",CheckYes:"check_box",Clear:"clear_all",Clipboard:"content_paste",Close:"close",Cloud:"cloud",Cook:"local_dining",CookMealPlan:"local_dining",CookMealTime:"schedule",CookRecipe:"menu_book",DateRange:"date_range",Delete:"delete",DeleteForever:"delete_forever",Download:"download",Drag:"drag_indicator",Edit:"edit",Expand:"expand_less",Filter:"filter_alt",HeaderMenu:"more_vert",Health:"accessibility",HealthItemInput:"lunch_dining",HealthItemOutput:"face_retouching_natural",HealthLog:"accessibility",Help:"help_outline",Hide:"visibility_off",Home:"home",Household:"house",ImportExport:"import_export",InProgress:"assignment",Install:"get_app",Inventory:"inventory",InventoryCollection:"inventory_2",Invite:"person_add",Italic:"format_italic",Link:"insert_link",ListBulleted:"format_list_bulleted",ListNumbered:"format_list_numbered",Loading:"cached",Location:"place",Mapping:"east",Menu:"menu",Mobile:"smartphone",More:"more_horiz",Next:"keyboard_arrow_right",NotFound:"filter_none",Notes:"notes",Notification:"notifications",Personal:"person",Plan:"checklist",PlanProject:"label",PlanTask:"done",Previous:"keyboard_arrow_left",Privacy:"lock",RatingSelect:"star",RatingUnselect:"star_border",Recurring:"repeat",Redeemable:"check_circle_outline",Refresh:"refresh",Restore:"restore_from_trash",Reward:"redeem",Roadmap:"map",Save:"save",Scan:"camera_alt",Schedule:"schedule",Search:"search",SecretsValue:"password",SecretsVault:"lock",Send:"send",Session:"devices",Settings:"settings",Shop:"storefront",ShopCategory:"category",ShopItem:"shopping_cart",ShopItemInCart:"add_shopping_cart",ShopItemToGet:"remove_shopping_cart",ShopList:"list",Shortcut:"shortcut",Show:"visibility",ShowColumn:"view_column",SignIn:"exit_to_app",Sort:"sort",SortAscending:"arrow_upward",SortDescending:"arrow_downward",Sub:"subdirectory_arrow_left",Subscription:"loyalty",Support:"support",SwitchUser:"supervised_user_circle",Tag:"tag",Template:"content_copy",Today:"event",TrendingUp:"trending_up",UnfoldLess:"unfold_less",UnfoldMore:"unfold_more",Unsorted:"inbox",Upcoming:"upcoming",Upload:"upload",Warning:"warning"};function pA(t){return String.fromCharCode(...new Uint8Array(t))}function Sr(t){return btoa(pA(t))}function Yn(t){return mA(atob(t))}function mA(t){return Uint8Array.from(t,e=>e.charCodeAt(0))}async function As(t){return crypto.subtle.importKey("raw",Yn(t),"AES-GCM",!0,["encrypt","decrypt"])}async function gA(t,e){const r=await As(t),n=crypto.getRandomValues(new Uint8Array(12)),a=await crypto.subtle.encrypt({iv:n,name:"AES-GCM"},r,new TextEncoder().encode(e)).catch(o=>_e(`aesEncrypt: ${o}`,"Error encrypting value"));if(W(a))return a;if(a===void 0)return"";const i=new Uint8Array(n.byteLength+a.byteLength);return i.set(new Uint8Array(n),0),i.set(new Uint8Array(a),n.byteLength),Sr(i)}async function yA(t,e){const r=await As(t),n=Yn(e),a=n.slice(0,12),i=n.slice(12),o=await crypto.subtle.decrypt({iv:a,name:"AES-GCM"},r,i).catch(s=>_e(`aesDecrypt: ${s}`,"Error decrypting value"));return W(o)?o:o===void 0?"":new TextDecoder().decode(o)}async function vA(){const t=await crypto.subtle.generateKey({hash:"SHA-256",modulusLength:2048,name:"RSA-OAEP",publicExponent:new Uint8Array([1,0,1])},!0,["encrypt","decrypt"]).catch(e=>_e(`NewRSAKey: ${e}`,"Error creating key"));return W(t)?t:{privateKey:Sr(await crypto.subtle.exportKey("pkcs8",t.privateKey)),publicKey:Sr(await crypto.subtle.exportKey("spki",t.publicKey))}}async function fs(t,e){return crypto.subtle.importKey(e===!0?"spki":"pkcs8",Yn(t),{hash:"SHA-256",name:"RSA-OAEP"},!0,[e===!0?"encrypt":"decrypt"]).catch(r=>_e(`importRSAKey: ${r}`,"Error importing key"))}async function _A(t,e){const r=await fs(t,!0);if(W(r))return r;const n=await crypto.subtle.encrypt({name:"RSA-OAEP"},r,new TextEncoder().encode(e)).catch(a=>_e(`rsaEncrypt: ${a}`,"Error encrypting value"));return W(n)?n:Sr(n)}async function bA(t,e){const r=await fs(t);if(W(r))return r;const n=await crypto.subtle.decrypt({name:"RSA-OAEP"},r,Yn(e)).catch(a=>_e(`rsaDecrypt: ${a}`,"Error decrypting value"));return W(n)?n:new TextDecoder().decode(n)}const xn="none",jt="aes128gcm",ln="rsa2048";class hs{constructor(e,r){this.ciphertext=e,this.encryption=r}async decrypt(e){switch(this.encryption){case xn:return this.ciphertext;case jt:return yA(e,this.ciphertext);case ln:return bA(e,this.ciphertext)}return _e("decrypt: unknown encryption","Error decrypting value")}string(){return`${this.encryption}$${this.ciphertext}`}}function zr(t){const e=t.split("$");let r="";if(e.length===2){switch(e[0]){case xn:r=xn;break;case jt:r=jt;break;case ln:r=ln;break}if(r!=="")return new hs(e[1],r)}return _e("ParseEncryptedValue: unknown encryption","Error reading encrypted value")}async function Gr(t,e,r){let n="";switch(t){case xn:n=r;break;case jt:n=await gA(e,r);break;case ln:n=await _A(e,r);break}return W(n)?n:n!==""?new hs(n,t):_e("EncryptValue: unknown encryption","Error encrypting value")}async function to(t,e){let r=await crypto.subtle.importKey("raw",new TextEncoder().encode(t),"PBKDF2",!1,["deriveBits","deriveKey"]).catch(n=>_e(`NewPBDKF2AES128Key: error importing: ${n}`,"Error generating key"));return W(r)||(r=await crypto.subtle.deriveKey({hash:"SHA-256",iterations:1e5,name:"PBKDF2",salt:new TextEncoder().encode(e)},r,{length:128,name:"AES-GCM"},!0,["encrypt","decrypt"]).catch(n=>_e(`NewPBDKF2AES128Key: error deriving: ${n}`,"Error generating key")),W(r))?r:Sr(await crypto.subtle.exportKey("raw",r))}var M=(t=>(t[t.Create=0]="Create",t[t.Delete=1]="Delete",t[t.Update=2]="Update",t))(M||{}),ar=(t=>(t[t.None=0]="None",t[t.Test=1]="Test",t[t.Google=2]="Google",t[t.Apple=3]="Apple",t))(ar||{});const SA="unknown",EA="chrome",wA="edge",IA="firefox",CA="safari";function vi(){return navigator.userAgent.includes("Edg")?wA:navigator.userAgent.includes("Chrome")?EA:navigator.userAgent.includes("Firefox")?IA:navigator.userAgent.includes("Safari")?CA:SA}function bn(t,e){const r=ge(e);if(t!==null)if(r.includes(t)){const n=r.indexOf(t);r.splice(n,1)}else r.push(t);return r}function Sn(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ei={},TA={get exports(){return ei},set exports(t){ei=t}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(t,e){(function(r){t.exports=r()})(function(){return function r(n,a,i){function o(h,v){if(!a[h]){if(!n[h]){var y=typeof Sn=="function"&&Sn;if(!v&&y)return y(h,!0);if(s)return s(h,!0);var E=new Error("Cannot find module '"+h+"'");throw E.code="MODULE_NOT_FOUND",E}var P=a[h]={exports:{}};n[h][0].call(P.exports,function(g){var S=n[h][1][g];return o(S||g)},P,P.exports,r,n,a,i)}return a[h].exports}for(var s=typeof Sn=="function"&&Sn,c=0;c<i.length;c++)o(i[c]);return o}({1:[function(r,n,a){(function(i){var o=i.MutationObserver||i.WebKitMutationObserver,s;if(o){var c=0,h=new o(g),v=i.document.createTextNode("");h.observe(v,{characterData:!0}),s=function(){v.data=c=++c%2}}else if(!i.setImmediate&&typeof i.MessageChannel<"u"){var y=new i.MessageChannel;y.port1.onmessage=g,s=function(){y.port2.postMessage(0)}}else"document"in i&&"onreadystatechange"in i.document.createElement("script")?s=function(){var C=i.document.createElement("script");C.onreadystatechange=function(){g(),C.onreadystatechange=null,C.parentNode.removeChild(C),C=null},i.document.documentElement.appendChild(C)}:s=function(){setTimeout(g,0)};var E,P=[];function g(){E=!0;for(var C,R,B=P.length;B;){for(R=P,P=[],C=-1;++C<B;)R[C]();B=P.length}E=!1}n.exports=S;function S(C){P.push(C)===1&&!E&&s()}}).call(this,typeof ht<"u"?ht:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,n,a){var i=r(1);function o(){}var s={},c=["REJECTED"],h=["FULFILLED"],v=["PENDING"];n.exports=y;function y(H){if(typeof H!="function")throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,H!==o&&S(this,H)}y.prototype.catch=function(H){return this.then(null,H)},y.prototype.then=function(H,J){if(typeof H!="function"&&this.state===h||typeof J!="function"&&this.state===c)return this;var K=new this.constructor(o);if(this.state!==v){var U=this.state===h?H:J;P(K,U,this.outcome)}else this.queue.push(new E(K,H,J));return K};function E(H,J,K){this.promise=H,typeof J=="function"&&(this.onFulfilled=J,this.callFulfilled=this.otherCallFulfilled),typeof K=="function"&&(this.onRejected=K,this.callRejected=this.otherCallRejected)}E.prototype.callFulfilled=function(H){s.resolve(this.promise,H)},E.prototype.otherCallFulfilled=function(H){P(this.promise,this.onFulfilled,H)},E.prototype.callRejected=function(H){s.reject(this.promise,H)},E.prototype.otherCallRejected=function(H){P(this.promise,this.onRejected,H)};function P(H,J,K){i(function(){var U;try{U=J(K)}catch(F){return s.reject(H,F)}U===H?s.reject(H,new TypeError("Cannot resolve promise with itself")):s.resolve(H,U)})}s.resolve=function(H,J){var K=C(g,J);if(K.status==="error")return s.reject(H,K.value);var U=K.value;if(U)S(H,U);else{H.state=h,H.outcome=J;for(var F=-1,fe=H.queue.length;++F<fe;)H.queue[F].callFulfilled(J)}return H},s.reject=function(H,J){H.state=c,H.outcome=J;for(var K=-1,U=H.queue.length;++K<U;)H.queue[K].callRejected(J);return H};function g(H){var J=H&&H.then;if(H&&(typeof H=="object"||typeof H=="function")&&typeof J=="function")return function(){J.apply(H,arguments)}}function S(H,J){var K=!1;function U(be){K||(K=!0,s.reject(H,be))}function F(be){K||(K=!0,s.resolve(H,be))}function fe(){J(F,U)}var ne=C(fe);ne.status==="error"&&U(ne.value)}function C(H,J){var K={};try{K.value=H(J),K.status="success"}catch(U){K.status="error",K.value=U}return K}y.resolve=R;function R(H){return H instanceof this?H:s.resolve(new this(o),H)}y.reject=B;function B(H){var J=new this(o);return s.reject(J,H)}y.all=ee;function ee(H){var J=this;if(Object.prototype.toString.call(H)!=="[object Array]")return this.reject(new TypeError("must be an array"));var K=H.length,U=!1;if(!K)return this.resolve([]);for(var F=new Array(K),fe=0,ne=-1,be=new this(o);++ne<K;)se(H[ne],ne);return be;function se(te,he){J.resolve(te).then(ue,function(Se){U||(U=!0,s.reject(be,Se))});function ue(Se){F[he]=Se,++fe===K&&!U&&(U=!0,s.resolve(be,F))}}}y.race=re;function re(H){var J=this;if(Object.prototype.toString.call(H)!=="[object Array]")return this.reject(new TypeError("must be an array"));var K=H.length,U=!1;if(!K)return this.resolve([]);for(var F=-1,fe=new this(o);++F<K;)ne(H[F]);return fe;function ne(be){J.resolve(be).then(function(se){U||(U=!0,s.resolve(fe,se))},function(se){U||(U=!0,s.reject(fe,se))})}}},{1:1}],3:[function(r,n,a){(function(i){typeof i.Promise!="function"&&(i.Promise=r(2))}).call(this,typeof ht<"u"?ht:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,n,a){var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d};function o(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}function s(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var c=s();function h(){try{if(!c||!c.open)return!1;var d=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),m=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!d||m)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function v(d,m){d=d||[],m=m||{};try{return new Blob(d,m)}catch(w){if(w.name!=="TypeError")throw w;for(var f=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,I=new f,T=0;T<d.length;T+=1)I.append(d[T]);return I.getBlob(m.type)}}typeof Promise>"u"&&r(3);var y=Promise;function E(d,m){m&&d.then(function(f){m(null,f)},function(f){m(f)})}function P(d,m,f){typeof m=="function"&&d.then(m),typeof f=="function"&&d.catch(f)}function g(d){return typeof d!="string"&&(console.warn(d+" used as a key, but it is not a string."),d=String(d)),d}function S(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var C="local-forage-detect-blob-support",R=void 0,B={},ee=Object.prototype.toString,re="readonly",H="readwrite";function J(d){for(var m=d.length,f=new ArrayBuffer(m),I=new Uint8Array(f),T=0;T<m;T++)I[T]=d.charCodeAt(T);return f}function K(d){return new y(function(m){var f=d.transaction(C,H),I=v([""]);f.objectStore(C).put(I,"key"),f.onabort=function(T){T.preventDefault(),T.stopPropagation(),m(!1)},f.oncomplete=function(){var T=navigator.userAgent.match(/Chrome\/(\d+)/),w=navigator.userAgent.match(/Edge\//);m(w||!T||parseInt(T[1],10)>=43)}}).catch(function(){return!1})}function U(d){return typeof R=="boolean"?y.resolve(R):K(d).then(function(m){return R=m,R})}function F(d){var m=B[d.name],f={};f.promise=new y(function(I,T){f.resolve=I,f.reject=T}),m.deferredOperations.push(f),m.dbReady?m.dbReady=m.dbReady.then(function(){return f.promise}):m.dbReady=f.promise}function fe(d){var m=B[d.name],f=m.deferredOperations.pop();if(f)return f.resolve(),f.promise}function ne(d,m){var f=B[d.name],I=f.deferredOperations.pop();if(I)return I.reject(m),I.promise}function be(d,m){return new y(function(f,I){if(B[d.name]=B[d.name]||wt(),d.db)if(m)F(d),d.db.close();else return f(d.db);var T=[d.name];m&&T.push(d.version);var w=c.open.apply(c,T);m&&(w.onupgradeneeded=function(k){var L=w.result;try{L.createObjectStore(d.storeName),k.oldVersion<=1&&L.createObjectStore(C)}catch(x){if(x.name==="ConstraintError")console.warn('The database "'+d.name+'" has been upgraded from version '+k.oldVersion+" to version "+k.newVersion+', but the storage "'+d.storeName+'" already exists.');else throw x}}),w.onerror=function(k){k.preventDefault(),I(w.error)},w.onsuccess=function(){var k=w.result;k.onversionchange=function(L){L.target.close()},f(k),fe(d)}})}function se(d){return be(d,!1)}function te(d){return be(d,!0)}function he(d,m){if(!d.db)return!0;var f=!d.db.objectStoreNames.contains(d.storeName),I=d.version<d.db.version,T=d.version>d.db.version;if(I&&(d.version!==m&&console.warn('The database "'+d.name+`" can't be downgraded from version `+d.db.version+" to version "+d.version+"."),d.version=d.db.version),T||f){if(f){var w=d.db.version+1;w>d.version&&(d.version=w)}return!0}return!1}function ue(d){return new y(function(m,f){var I=new FileReader;I.onerror=f,I.onloadend=function(T){var w=btoa(T.target.result||"");m({__local_forage_encoded_blob:!0,data:w,type:d.type})},I.readAsBinaryString(d)})}function Se(d){var m=J(atob(d.data));return v([m],{type:d.type})}function De(d){return d&&d.__local_forage_encoded_blob}function pe(d){var m=this,f=m._initReady().then(function(){var I=B[m._dbInfo.name];if(I&&I.dbReady)return I.dbReady});return P(f,d,d),f}function je(d){F(d);for(var m=B[d.name],f=m.forages,I=0;I<f.length;I++){var T=f[I];T._dbInfo.db&&(T._dbInfo.db.close(),T._dbInfo.db=null)}return d.db=null,se(d).then(function(w){return d.db=w,he(d)?te(d):w}).then(function(w){d.db=m.db=w;for(var k=0;k<f.length;k++)f[k]._dbInfo.db=w}).catch(function(w){throw ne(d,w),w})}function et(d,m,f,I){I===void 0&&(I=1);try{var T=d.db.transaction(d.storeName,m);f(null,T)}catch(w){if(I>0&&(!d.db||w.name==="InvalidStateError"||w.name==="NotFoundError"))return y.resolve().then(function(){if(!d.db||w.name==="NotFoundError"&&!d.db.objectStoreNames.contains(d.storeName)&&d.version<=d.db.version)return d.db&&(d.version=d.db.version+1),te(d)}).then(function(){return je(d).then(function(){et(d,m,f,I-1)})}).catch(f);f(w)}}function wt(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function It(d){var m=this,f={db:null};if(d)for(var I in d)f[I]=d[I];var T=B[f.name];T||(T=wt(),B[f.name]=T),T.forages.push(m),m._initReady||(m._initReady=m.ready,m.ready=pe);var w=[];function k(){return y.resolve()}for(var L=0;L<T.forages.length;L++){var x=T.forages[L];x!==m&&w.push(x._initReady().catch(k))}var j=T.forages.slice(0);return y.all(w).then(function(){return f.db=T.db,se(f)}).then(function(V){return f.db=V,he(f,m._defaultConfig.version)?te(f):V}).then(function(V){f.db=T.db=V,m._dbInfo=f;for(var $=0;$<j.length;$++){var ie=j[$];ie!==m&&(ie._dbInfo.db=f.db,ie._dbInfo.version=f.version)}})}function yt(d,m){var f=this;d=g(d);var I=new y(function(T,w){f.ready().then(function(){et(f._dbInfo,re,function(k,L){if(k)return w(k);try{var x=L.objectStore(f._dbInfo.storeName),j=x.get(d);j.onsuccess=function(){var V=j.result;V===void 0&&(V=null),De(V)&&(V=Se(V)),T(V)},j.onerror=function(){w(j.error)}}catch(V){w(V)}})}).catch(w)});return E(I,m),I}function Jn(d,m){var f=this,I=new y(function(T,w){f.ready().then(function(){et(f._dbInfo,re,function(k,L){if(k)return w(k);try{var x=L.objectStore(f._dbInfo.storeName),j=x.openCursor(),V=1;j.onsuccess=function(){var $=j.result;if($){var ie=$.value;De(ie)&&(ie=Se(ie));var me=d(ie,$.key,V++);me!==void 0?T(me):$.continue()}else T()},j.onerror=function(){w(j.error)}}catch($){w($)}})}).catch(w)});return E(I,m),I}function Zn(d,m,f){var I=this;d=g(d);var T=new y(function(w,k){var L;I.ready().then(function(){return L=I._dbInfo,ee.call(m)==="[object Blob]"?U(L.db).then(function(x){return x?m:ue(m)}):m}).then(function(x){et(I._dbInfo,H,function(j,V){if(j)return k(j);try{var $=V.objectStore(I._dbInfo.storeName);x===null&&(x=void 0);var ie=$.put(x,d);V.oncomplete=function(){x===void 0&&(x=null),w(x)},V.onabort=V.onerror=function(){var me=ie.error?ie.error:ie.transaction.error;k(me)}}catch(me){k(me)}})}).catch(k)});return E(T,f),T}function dn(d,m){var f=this;d=g(d);var I=new y(function(T,w){f.ready().then(function(){et(f._dbInfo,H,function(k,L){if(k)return w(k);try{var x=L.objectStore(f._dbInfo.storeName),j=x.delete(d);L.oncomplete=function(){T()},L.onerror=function(){w(j.error)},L.onabort=function(){var V=j.error?j.error:j.transaction.error;w(V)}}catch(V){w(V)}})}).catch(w)});return E(I,m),I}function An(d){var m=this,f=new y(function(I,T){m.ready().then(function(){et(m._dbInfo,H,function(w,k){if(w)return T(w);try{var L=k.objectStore(m._dbInfo.storeName),x=L.clear();k.oncomplete=function(){I()},k.onabort=k.onerror=function(){var j=x.error?x.error:x.transaction.error;T(j)}}catch(j){T(j)}})}).catch(T)});return E(f,d),f}function qn(d){var m=this,f=new y(function(I,T){m.ready().then(function(){et(m._dbInfo,re,function(w,k){if(w)return T(w);try{var L=k.objectStore(m._dbInfo.storeName),x=L.count();x.onsuccess=function(){I(x.result)},x.onerror=function(){T(x.error)}}catch(j){T(j)}})}).catch(T)});return E(f,d),f}function ea(d,m){var f=this,I=new y(function(T,w){if(d<0){T(null);return}f.ready().then(function(){et(f._dbInfo,re,function(k,L){if(k)return w(k);try{var x=L.objectStore(f._dbInfo.storeName),j=!1,V=x.openKeyCursor();V.onsuccess=function(){var $=V.result;if(!$){T(null);return}d===0||j?T($.key):(j=!0,$.advance(d))},V.onerror=function(){w(V.error)}}catch($){w($)}})}).catch(w)});return E(I,m),I}function wr(d){var m=this,f=new y(function(I,T){m.ready().then(function(){et(m._dbInfo,re,function(w,k){if(w)return T(w);try{var L=k.objectStore(m._dbInfo.storeName),x=L.openKeyCursor(),j=[];x.onsuccess=function(){var V=x.result;if(!V){I(j);return}j.push(V.key),V.continue()},x.onerror=function(){T(x.error)}}catch(V){T(V)}})}).catch(T)});return E(f,d),f}function fn(d,m){m=S.apply(this,arguments);var f=this.config();d=typeof d!="function"&&d||{},d.name||(d.name=d.name||f.name,d.storeName=d.storeName||f.storeName);var I=this,T;if(!d.name)T=y.reject("Invalid arguments");else{var w=d.name===f.name&&I._dbInfo.db,k=w?y.resolve(I._dbInfo.db):se(d).then(function(L){var x=B[d.name],j=x.forages;x.db=L;for(var V=0;V<j.length;V++)j[V]._dbInfo.db=L;return L});d.storeName?T=k.then(function(L){if(L.objectStoreNames.contains(d.storeName)){var x=L.version+1;F(d);var j=B[d.name],V=j.forages;L.close();for(var $=0;$<V.length;$++){var ie=V[$];ie._dbInfo.db=null,ie._dbInfo.version=x}var me=new y(function(ye,Me){var Pe=c.open(d.name,x);Pe.onerror=function(st){var Pr=Pe.result;Pr.close(),Me(st)},Pe.onupgradeneeded=function(){var st=Pe.result;st.deleteObjectStore(d.storeName)},Pe.onsuccess=function(){var st=Pe.result;st.close(),ye(st)}});return me.then(function(ye){j.db=ye;for(var Me=0;Me<V.length;Me++){var Pe=V[Me];Pe._dbInfo.db=ye,fe(Pe._dbInfo)}}).catch(function(ye){throw(ne(d,ye)||y.resolve()).catch(function(){}),ye})}}):T=k.then(function(L){F(d);var x=B[d.name],j=x.forages;L.close();for(var V=0;V<j.length;V++){var $=j[V];$._dbInfo.db=null}var ie=new y(function(me,ye){var Me=c.deleteDatabase(d.name);Me.onerror=function(){var Pe=Me.result;Pe&&Pe.close(),ye(Me.error)},Me.onblocked=function(){console.warn('dropInstance blocked for database "'+d.name+'" until all open connections are closed')},Me.onsuccess=function(){var Pe=Me.result;Pe&&Pe.close(),me(Pe)}});return ie.then(function(me){x.db=me;for(var ye=0;ye<j.length;ye++){var Me=j[ye];fe(Me._dbInfo)}}).catch(function(me){throw(ne(d,me)||y.resolve()).catch(function(){}),me})})}return E(T,m),T}var Ir={_driver:"asyncStorage",_initStorage:It,_support:h(),iterate:Jn,getItem:yt,setItem:Zn,removeItem:dn,clear:An,length:qn,key:ea,keys:wr,dropInstance:fn};function hn(){return typeof openDatabase=="function"}var ot="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Cr="~~local_forage_type~",pn=/^~~local_forage_type~([^~]+)~/,dt="__lfsc__:",A=dt.length,u="arbf",p="blob",O="si08",N="ui08",z="uic8",q="si16",ae="si32",Q="ur16",ce="ui32",Kt="fl32",He="fl64",Re=A+u.length,Ut=Object.prototype.toString;function Ue(d){var m=d.length*.75,f=d.length,I,T=0,w,k,L,x;d[d.length-1]==="="&&(m--,d[d.length-2]==="="&&m--);var j=new ArrayBuffer(m),V=new Uint8Array(j);for(I=0;I<f;I+=4)w=ot.indexOf(d[I]),k=ot.indexOf(d[I+1]),L=ot.indexOf(d[I+2]),x=ot.indexOf(d[I+3]),V[T++]=w<<2|k>>4,V[T++]=(k&15)<<4|L>>2,V[T++]=(L&3)<<6|x&63;return j}function Ie(d){var m=new Uint8Array(d),f="",I;for(I=0;I<m.length;I+=3)f+=ot[m[I]>>2],f+=ot[(m[I]&3)<<4|m[I+1]>>4],f+=ot[(m[I+1]&15)<<2|m[I+2]>>6],f+=ot[m[I+2]&63];return m.length%3===2?f=f.substring(0,f.length-1)+"=":m.length%3===1&&(f=f.substring(0,f.length-2)+"=="),f}function Ve(d,m){var f="";if(d&&(f=Ut.call(d)),d&&(f==="[object ArrayBuffer]"||d.buffer&&Ut.call(d.buffer)==="[object ArrayBuffer]")){var I,T=dt;d instanceof ArrayBuffer?(I=d,T+=u):(I=d.buffer,f==="[object Int8Array]"?T+=O:f==="[object Uint8Array]"?T+=N:f==="[object Uint8ClampedArray]"?T+=z:f==="[object Int16Array]"?T+=q:f==="[object Uint16Array]"?T+=Q:f==="[object Int32Array]"?T+=ae:f==="[object Uint32Array]"?T+=ce:f==="[object Float32Array]"?T+=Kt:f==="[object Float64Array]"?T+=He:m(new Error("Failed to get type for BinaryArray"))),m(T+Ie(I))}else if(f==="[object Blob]"){var w=new FileReader;w.onload=function(){var k=Cr+d.type+"~"+Ie(this.result);m(dt+p+k)},w.readAsArrayBuffer(d)}else try{m(JSON.stringify(d))}catch(k){console.error("Couldn't convert value into a JSON string: ",d),m(null,k)}}function Ee(d){if(d.substring(0,A)!==dt)return JSON.parse(d);var m=d.substring(Re),f=d.substring(A,Re),I;if(f===p&&pn.test(m)){var T=m.match(pn);I=T[1],m=m.substring(T[0].length)}var w=Ue(m);switch(f){case u:return w;case p:return v([w],{type:I});case O:return new Int8Array(w);case N:return new Uint8Array(w);case z:return new Uint8ClampedArray(w);case q:return new Int16Array(w);case Q:return new Uint16Array(w);case ae:return new Int32Array(w);case ce:return new Uint32Array(w);case Kt:return new Float32Array(w);case He:return new Float64Array(w);default:throw new Error("Unkown type: "+f)}}var Vt={serialize:Ve,deserialize:Ee,stringToBuffer:Ue,bufferToString:Ie};function mn(d,m,f,I){d.executeSql("CREATE TABLE IF NOT EXISTS "+m.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],f,I)}function gn(d){var m=this,f={db:null};if(d)for(var I in d)f[I]=typeof d[I]!="string"?d[I].toString():d[I];var T=new y(function(w,k){try{f.db=openDatabase(f.name,String(f.version),f.description,f.size)}catch(L){return k(L)}f.db.transaction(function(L){mn(L,f,function(){m._dbInfo=f,w()},function(x,j){k(j)})},k)});return f.serializer=Vt,T}function Xe(d,m,f,I,T,w){d.executeSql(f,I,T,function(k,L){L.code===L.SYNTAX_ERR?k.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[m.storeName],function(x,j){j.rows.length?w(x,L):mn(x,m,function(){x.executeSql(f,I,T,w)},w)},w):w(k,L)},w)}function Tr(d,m){var f=this;d=g(d);var I=new y(function(T,w){f.ready().then(function(){var k=f._dbInfo;k.db.transaction(function(L){Xe(L,k,"SELECT * FROM "+k.storeName+" WHERE key = ? LIMIT 1",[d],function(x,j){var V=j.rows.length?j.rows.item(0).value:null;V&&(V=k.serializer.deserialize(V)),T(V)},function(x,j){w(j)})})}).catch(w)});return E(I,m),I}function Ce(d,m){var f=this,I=new y(function(T,w){f.ready().then(function(){var k=f._dbInfo;k.db.transaction(function(L){Xe(L,k,"SELECT * FROM "+k.storeName,[],function(x,j){for(var V=j.rows,$=V.length,ie=0;ie<$;ie++){var me=V.item(ie),ye=me.value;if(ye&&(ye=k.serializer.deserialize(ye)),ye=d(ye,me.key,ie+1),ye!==void 0){T(ye);return}}T()},function(x,j){w(j)})})}).catch(w)});return E(I,m),I}function Yt(d,m,f,I){var T=this;d=g(d);var w=new y(function(k,L){T.ready().then(function(){m===void 0&&(m=null);var x=m,j=T._dbInfo;j.serializer.serialize(m,function(V,$){$?L($):j.db.transaction(function(ie){Xe(ie,j,"INSERT OR REPLACE INTO "+j.storeName+" (key, value) VALUES (?, ?)",[d,V],function(){k(x)},function(me,ye){L(ye)})},function(ie){if(ie.code===ie.QUOTA_ERR){if(I>0){k(Yt.apply(T,[d,x,f,I-1]));return}L(ie)}})})}).catch(L)});return E(w,f),w}function Dr(d,m,f){return Yt.apply(this,[d,m,f,1])}function Or(d,m){var f=this;d=g(d);var I=new y(function(T,w){f.ready().then(function(){var k=f._dbInfo;k.db.transaction(function(L){Xe(L,k,"DELETE FROM "+k.storeName+" WHERE key = ?",[d],function(){T()},function(x,j){w(j)})})}).catch(w)});return E(I,m),I}function Ct(d){var m=this,f=new y(function(I,T){m.ready().then(function(){var w=m._dbInfo;w.db.transaction(function(k){Xe(k,w,"DELETE FROM "+w.storeName,[],function(){I()},function(L,x){T(x)})})}).catch(T)});return E(f,d),f}function Bs(d){var m=this,f=new y(function(I,T){m.ready().then(function(){var w=m._dbInfo;w.db.transaction(function(k){Xe(k,w,"SELECT COUNT(key) as c FROM "+w.storeName,[],function(L,x){var j=x.rows.item(0).c;I(j)},function(L,x){T(x)})})}).catch(T)});return E(f,d),f}function xs(d,m){var f=this,I=new y(function(T,w){f.ready().then(function(){var k=f._dbInfo;k.db.transaction(function(L){Xe(L,k,"SELECT key FROM "+k.storeName+" WHERE id = ? LIMIT 1",[d+1],function(x,j){var V=j.rows.length?j.rows.item(0).key:null;T(V)},function(x,j){w(j)})})}).catch(w)});return E(I,m),I}function js(d){var m=this,f=new y(function(I,T){m.ready().then(function(){var w=m._dbInfo;w.db.transaction(function(k){Xe(k,w,"SELECT key FROM "+w.storeName,[],function(L,x){for(var j=[],V=0;V<x.rows.length;V++)j.push(x.rows.item(V).key);I(j)},function(L,x){T(x)})})}).catch(T)});return E(f,d),f}function Hs(d){return new y(function(m,f){d.transaction(function(I){I.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(T,w){for(var k=[],L=0;L<w.rows.length;L++)k.push(w.rows.item(L).name);m({db:d,storeNames:k})},function(T,w){f(w)})},function(I){f(I)})})}function Us(d,m){m=S.apply(this,arguments);var f=this.config();d=typeof d!="function"&&d||{},d.name||(d.name=d.name||f.name,d.storeName=d.storeName||f.storeName);var I=this,T;return d.name?T=new y(function(w){var k;d.name===f.name?k=I._dbInfo.db:k=openDatabase(d.name,"","",0),d.storeName?w({db:k,storeNames:[d.storeName]}):w(Hs(k))}).then(function(w){return new y(function(k,L){w.db.transaction(function(x){function j(me){return new y(function(ye,Me){x.executeSql("DROP TABLE IF EXISTS "+me,[],function(){ye()},function(Pe,st){Me(st)})})}for(var V=[],$=0,ie=w.storeNames.length;$<ie;$++)V.push(j(w.storeNames[$]));y.all(V).then(function(){k()}).catch(function(me){L(me)})},function(x){L(x)})})}):T=y.reject("Invalid arguments"),E(T,m),T}var Vs={_driver:"webSQLStorage",_initStorage:gn,_support:hn(),iterate:Ce,getItem:Tr,setItem:Dr,removeItem:Or,clear:Ct,length:Bs,key:xs,keys:js,dropInstance:Us};function zs(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Ei(d,m){var f=d.name+"/";return d.storeName!==m.storeName&&(f+=d.storeName+"/"),f}function Gs(){var d="_localforage_support_test";try{return localStorage.setItem(d,!0),localStorage.removeItem(d),!1}catch{return!0}}function Fs(){return!Gs()||localStorage.length>0}function Ws(d){var m=this,f={};if(d)for(var I in d)f[I]=d[I];return f.keyPrefix=Ei(d,m._defaultConfig),Fs()?(m._dbInfo=f,f.serializer=Vt,y.resolve()):y.reject()}function $s(d){var m=this,f=m.ready().then(function(){for(var I=m._dbInfo.keyPrefix,T=localStorage.length-1;T>=0;T--){var w=localStorage.key(T);w.indexOf(I)===0&&localStorage.removeItem(w)}});return E(f,d),f}function Ks(d,m){var f=this;d=g(d);var I=f.ready().then(function(){var T=f._dbInfo,w=localStorage.getItem(T.keyPrefix+d);return w&&(w=T.serializer.deserialize(w)),w});return E(I,m),I}function Ys(d,m){var f=this,I=f.ready().then(function(){for(var T=f._dbInfo,w=T.keyPrefix,k=w.length,L=localStorage.length,x=1,j=0;j<L;j++){var V=localStorage.key(j);if(V.indexOf(w)===0){var $=localStorage.getItem(V);if($&&($=T.serializer.deserialize($)),$=d($,V.substring(k),x++),$!==void 0)return $}}});return E(I,m),I}function Qs(d,m){var f=this,I=f.ready().then(function(){var T=f._dbInfo,w;try{w=localStorage.key(d)}catch{w=null}return w&&(w=w.substring(T.keyPrefix.length)),w});return E(I,m),I}function Xs(d){var m=this,f=m.ready().then(function(){for(var I=m._dbInfo,T=localStorage.length,w=[],k=0;k<T;k++){var L=localStorage.key(k);L.indexOf(I.keyPrefix)===0&&w.push(L.substring(I.keyPrefix.length))}return w});return E(f,d),f}function Js(d){var m=this,f=m.keys().then(function(I){return I.length});return E(f,d),f}function Zs(d,m){var f=this;d=g(d);var I=f.ready().then(function(){var T=f._dbInfo;localStorage.removeItem(T.keyPrefix+d)});return E(I,m),I}function qs(d,m,f){var I=this;d=g(d);var T=I.ready().then(function(){m===void 0&&(m=null);var w=m;return new y(function(k,L){var x=I._dbInfo;x.serializer.serialize(m,function(j,V){if(V)L(V);else try{localStorage.setItem(x.keyPrefix+d,j),k(w)}catch($){($.name==="QuotaExceededError"||$.name==="NS_ERROR_DOM_QUOTA_REACHED")&&L($),L($)}})})});return E(T,f),T}function el(d,m){if(m=S.apply(this,arguments),d=typeof d!="function"&&d||{},!d.name){var f=this.config();d.name=d.name||f.name,d.storeName=d.storeName||f.storeName}var I=this,T;return d.name?T=new y(function(w){d.storeName?w(Ei(d,I._defaultConfig)):w(d.name+"/")}).then(function(w){for(var k=localStorage.length-1;k>=0;k--){var L=localStorage.key(k);L.indexOf(w)===0&&localStorage.removeItem(L)}}):T=y.reject("Invalid arguments"),E(T,m),T}var tl={_driver:"localStorageWrapper",_initStorage:Ws,_support:zs(),iterate:Ys,getItem:Ks,setItem:qs,removeItem:Zs,clear:$s,length:Js,key:Qs,keys:Xs,dropInstance:el},rl=function(m,f){return m===f||typeof m=="number"&&typeof f=="number"&&isNaN(m)&&isNaN(f)},nl=function(m,f){for(var I=m.length,T=0;T<I;){if(rl(m[T],f))return!0;T++}return!1},wi=Array.isArray||function(d){return Object.prototype.toString.call(d)==="[object Array]"},Rr={},Ii={},Qt={INDEXEDDB:Ir,WEBSQL:Vs,LOCALSTORAGE:tl},al=[Qt.INDEXEDDB._driver,Qt.WEBSQL._driver,Qt.LOCALSTORAGE._driver],yn=["dropInstance"],ta=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(yn),il={description:"",driver:al.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ol(d,m){d[m]=function(){var f=arguments;return d.ready().then(function(){return d[m].apply(d,f)})}}function ra(){for(var d=1;d<arguments.length;d++){var m=arguments[d];if(m)for(var f in m)m.hasOwnProperty(f)&&(wi(m[f])?arguments[0][f]=m[f].slice():arguments[0][f]=m[f])}return arguments[0]}var sl=function(){function d(m){o(this,d);for(var f in Qt)if(Qt.hasOwnProperty(f)){var I=Qt[f],T=I._driver;this[f]=T,Rr[T]||this.defineDriver(I)}this._defaultConfig=ra({},il),this._config=ra({},this._defaultConfig,m),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return d.prototype.config=function(f){if((typeof f>"u"?"undefined":i(f))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var I in f){if(I==="storeName"&&(f[I]=f[I].replace(/\W/g,"_")),I==="version"&&typeof f[I]!="number")return new Error("Database version must be a number.");this._config[I]=f[I]}return"driver"in f&&f.driver?this.setDriver(this._config.driver):!0}else return typeof f=="string"?this._config[f]:this._config},d.prototype.defineDriver=function(f,I,T){var w=new y(function(k,L){try{var x=f._driver,j=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!f._driver){L(j);return}for(var V=ta.concat("_initStorage"),$=0,ie=V.length;$<ie;$++){var me=V[$],ye=!nl(yn,me);if((ye||f[me])&&typeof f[me]!="function"){L(j);return}}var Me=function(){for(var Pr=function(cl){return function(){var dl=new Error("Method "+cl+" is not implemented by the current driver"),Ci=y.reject(dl);return E(Ci,arguments[arguments.length-1]),Ci}},na=0,ul=yn.length;na<ul;na++){var aa=yn[na];f[aa]||(f[aa]=Pr(aa))}};Me();var Pe=function(Pr){Rr[x]&&console.info("Redefining LocalForage driver: "+x),Rr[x]=f,Ii[x]=Pr,k()};"_support"in f?f._support&&typeof f._support=="function"?f._support().then(Pe,L):Pe(!!f._support):Pe(!0)}catch(st){L(st)}});return P(w,I,T),w},d.prototype.driver=function(){return this._driver||null},d.prototype.getDriver=function(f,I,T){var w=Rr[f]?y.resolve(Rr[f]):y.reject(new Error("Driver not found."));return P(w,I,T),w},d.prototype.getSerializer=function(f){var I=y.resolve(Vt);return P(I,f),I},d.prototype.ready=function(f){var I=this,T=I._driverSet.then(function(){return I._ready===null&&(I._ready=I._initDriver()),I._ready});return P(T,f,f),T},d.prototype.setDriver=function(f,I,T){var w=this;wi(f)||(f=[f]);var k=this._getSupportedDrivers(f);function L(){w._config.driver=w.driver()}function x($){return w._extend($),L(),w._ready=w._initStorage(w._config),w._ready}function j($){return function(){var ie=0;function me(){for(;ie<$.length;){var ye=$[ie];return ie++,w._dbInfo=null,w._ready=null,w.getDriver(ye).then(x).catch(me)}L();var Me=new Error("No available storage method found.");return w._driverSet=y.reject(Me),w._driverSet}return me()}}var V=this._driverSet!==null?this._driverSet.catch(function(){return y.resolve()}):y.resolve();return this._driverSet=V.then(function(){var $=k[0];return w._dbInfo=null,w._ready=null,w.getDriver($).then(function(ie){w._driver=ie._driver,L(),w._wrapLibraryMethodsWithReady(),w._initDriver=j(k)})}).catch(function(){L();var $=new Error("No available storage method found.");return w._driverSet=y.reject($),w._driverSet}),P(this._driverSet,I,T),this._driverSet},d.prototype.supports=function(f){return!!Ii[f]},d.prototype._extend=function(f){ra(this,f)},d.prototype._getSupportedDrivers=function(f){for(var I=[],T=0,w=f.length;T<w;T++){var k=f[T];this.supports(k)&&I.push(k)}return I},d.prototype._wrapLibraryMethodsWithReady=function(){for(var f=0,I=ta.length;f<I;f++)ol(this,ta[f])},d.prototype.createInstance=function(f){return new d(f)},d}(),ll=new sl;n.exports=ll},{3:3}]},{},[4])(4)})})(TA);var Lr=ei;const Oe={clear:async()=>{await Lr.clear().then(()=>{}).catch(t=>{_e(`IndexedDB.clear:
${t}`,"")})},delete:async t=>{await Lr.removeItem(t).then(()=>{}).catch(e=>{_e(`IndexedDB.delete ${t}:
${e}`,"")})},get:async t=>Lr.getItem(t).then(e=>(Mt.debug(`IndexedDB get ${t}: ${JSON.stringify(e)}`),e)).catch(e=>_e(`IndexedDB.get ${t}:
${e}`,"Error retrieving value from cache")),init:()=>{Lr.config({name:"homechart",storeName:"data",version:1})},set:async(t,e)=>Lr.setItem(t,e).then(()=>{Mt.debug(`IndexedDB.set ${t}:
${JSON.stringify(e)}`)}).catch(r=>_e(`IndexedDB.set ${t}:
${r}`,"Error retrieving value from cache"))},En=()=>({dataHash:"",dataIDs:[],dataTotal:0,dataType:"",dataValue:[],message:"",requestID:"",status:0,success:!1});let DA=fetch;const Je={error:"unknown response",message:"Client error, try again later"},ro=t=>typeof t=="object"&&t!==null&&"dataValue"in t,OA=t=>typeof t=="object"&&t!==null&&"status"in t&&"statusText"in t,ke=ze({debug:!1,hostname:null,id:"",key:""}),Y={clearAPIEndpoint:()=>{ke({debug:!1,hostname:null,id:"",key:""})},create:async(t,e)=>Y.fetch("POST",t,{body:e}),delete:async(t,e)=>Y.fetch("DELETE",t,{body:e}),fetch:async(t,e,{body:r,hash:n,updated:a})=>{const i={};return a!=null&&(i["x-homechart-updated"]=a),n!==void 0&&n!==""&&(i["x-homechart-hash"]=n),ke().id===""&&await Oe.get("APIAuth").then(o=>{o!==null&&(ke().id=o.id,ke().key=o.key)}),i["x-homechart-id"]=ke().id,i["x-homechart-key"]=ke().key,e==="/api?type=client"&&(i["x-homechart-version"]={BUILD_VERSION_HOMECHART:"dev+a0b23e2",NODE_ENV:"production",PUPPETEER_URL_HOMECHART:""}.BUILD_VERSION),ke().debug&&(i["x-homechart-debug"]="true"),DA(`${await Y.getHostname()}${e}`,{body:JSON.stringify(r),headers:i,method:t}).then(async o=>o.status===204||o.status===404?(Mt.debug(`API.fetch ${t} ${e} returned ${o.status}`),{...En(),status:204,success:!0}):o.json().then(s=>{if(!o.ok)throw s;return ro(s)?(Mt.debug(`API.fetch ${t} ${e} returned:
${JSON.stringify(s)}`),s):{...En(),message:"",status:204,success:!0}})).catch(o=>ro(o)?_e("API error",o.message):(OA(o)||o.status===void 0)&&(o.status===void 0||o.status===0||o.status===502)?{...En(),message:"Homechart is offline"}:(e!=="/this/should/fail"&&_e(`API.fetch: unknown response for ${e}:
${JSON.stringify(o)}`,"Unknown response received"),{...En(),message:"Server error",status:500}))},getHostname:async()=>(ke().hostname===null&&await Oe.get("APIHostname").then(async t=>{if(t!==null){ke().hostname=t;return}ke().hostname=""}),ke().hostname),getLink:()=>`${ke().hostname===""?window.location.origin:ke().hostname}`,read:async(t,e)=>{let r=t;const n=[];return e.filter!==void 0&&n.push(`filter=${e.filter}`),e.offset!==void 0&&n.push(`offset=${e.offset}`),n.length>0&&(r+=`?${n.join("&")}`),Y.fetch("GET",r,{hash:e.hash,updated:e.updated})},setAuth:async t=>(ke().id=t.id,ke().key=t.key,await Oe.set("APIHostname",ke().hostname),Oe.set("APIAuth",t)),setHostname:t=>{ke().hostname=t},toggleDebug:()=>{ke({...ke(),debug:!ke().debug})},update:async(t,e)=>Y.fetch("PUT",t,{body:e})};var D=(t=>(t[t.AuthAccount=0]="AuthAccount",t[t.AuthAccountAuthHousehold=1]="AuthAccountAuthHousehold",t[t.AuthHousehold=2]="AuthHousehold",t[t.AuthSession=3]="AuthSession",t[t.Bookmark=4]="Bookmark",t[t.BudgetAccount=5]="BudgetAccount",t[t.BudgetCategory=6]="BudgetCategory",t[t.BudgetMonth=7]="BudgetMonth",t[t.BudgetMonthCategory=8]="BudgetMonthCategory",t[t.BudgetPayee=9]="BudgetPayee",t[t.BudgetRecurrence=10]="BudgetRecurrence",t[t.BudgetTransaction=11]="BudgetTransaction",t[t.CalendarEvent=12]="CalendarEvent",t[t.CalendarICalendar=13]="CalendarICalendar",t[t.Change=14]="Change",t[t.CookMealPlan=15]="CookMealPlan",t[t.CookMealTime=16]="CookMealTime",t[t.CookRecipe=17]="CookRecipe",t[t.Data=18]="Data",t[t.HealthItem=19]="HealthItem",t[t.HealthLog=20]="HealthLog",t[t.InventoryCollection=21]="InventoryCollection",t[t.InventoryItem=22]="InventoryItem",t[t.NotesPage=23]="NotesPage",t[t.NotesPageVersion=24]="NotesPageVersion",t[t.PlanProject=25]="PlanProject",t[t.PlanTask=26]="PlanTask",t[t.RewardCard=27]="RewardCard",t[t.SecretsValue=28]="SecretsValue",t[t.SecretsVault=29]="SecretsVault",t[t.ShopCategory=30]="ShopCategory",t[t.ShopItem=31]="ShopItem",t[t.ShopList=32]="ShopList",t))(D||{});const jn={getArray:t=>{switch(t){case 6:return"BudgetCategories";case 30:return"ShopCategories";default:return`${D[t]}s`}},getObject:t=>D[t]};var it=(t=>(t[t.Edit=0]="Edit",t[t.View=1]="View",t[t.None=2]="None",t))(it||{}),oe=(t=>(t[t.Auth=0]="Auth",t[t.Budget=1]="Budget",t[t.Calendar=2]="Calendar",t[t.Cook=3]="Cook",t[t.Health=4]="Health",t[t.Inventory=5]="Inventory",t[t.Notes=6]="Notes",t[t.Plan=7]="Plan",t[t.Reward=8]="Reward",t[t.Secrets=9]="Secrets",t[t.Shop=10]="Shop",t))(oe||{});const Ge={components:["auth","budget","calendar","cook","health","inventory","notes","plan","reward","secrets","shop"],isPermitted:(t,e,r,n)=>{if(t!==null){for(const a of t)if(a.permissions[Ge.components[e]]<=r&&(n===void 0||a.authHouseholdID===n))return!0}return!1},new:()=>({auth:0,budget:0,calendar:0,cook:0,health:0,inventory:0,notes:0,plan:0,reward:0,secrets:0,shop:0})},no={ar:"",de:"Deutsch",en:"English",es:"Espaol",fr:"Francais",hi:"",nl:"Nederlands",zh:""};function rt(t,e){const r=t.split("-")[0];return e[r]!==void 0?e[r]:e.en}const RA={ar:"",de:"Konto",en:"Account",es:"Cuenta",fr:"Compte",hi:"",nl:"Rekening",zh:""},ps={ar:"  ",de:"Account erstellt",en:"Account created",es:"Cuenta creada",fr:"Compte cr",hi:"  ",nl:"Account aangemaakt",zh:""},ms={ar:"  ",de:"Konto gelscht",en:"Account deleted",es:"Cuenta borrada",fr:"Compte supprim",hi:"   ",nl:"Account verwijderd",zh:""},gs={ar:"  ",de:"Konto aktualisiert",en:"Account updated",es:"Cuenta actualizada",fr:"Compte mis  jour",hi:"   ",nl:"Account bijgewerkt",zh:""},PA={ar:"   ",de:"Konto verifiziert",en:"Account verified",es:"Cuenta verificada",fr:"Compte vrifi",hi:" ",nl:"Account geverifieerd",zh:""},kA={ar:"",de:"Konten",en:"Accounts",es:"cuentas",fr:"Comptes",hi:" ",nl:"rekeningen",zh:""},NA={ar:"   ",de:"Lesezeichen erstellt",en:"Bookmark created",es:"Marcador creado",fr:"Marque-page cr",hi:"  ",nl:"Bladwijzer gemaakt",zh:""},MA={ar:"   ",de:"Lesezeichen gelscht",en:"Bookmark deleted",es:"Marcador eliminado",fr:"Marque-page supprim",hi:"   ",nl:"Bladwijzer verwijderd",zh:""},LA={ar:"   ",de:"Lesezeichen aktualisiert",en:"Bookmark updated",es:"Marcador actualizado",fr:"Signet mis  jour",hi:"   ",nl:"Bladwijzer bijgewerkt",zh:""},ys={ar:" ",de:"Lesezeichen",en:"Bookmarks",es:"Marcadores",fr:"Signets",hi:"",nl:"Bladwijzers",zh:""},At={ar:"",de:"Budget",en:"Budget",es:"Presupuesto",fr:"Budget",hi:"",nl:"Begroting",zh:""},Hn={ar:"",de:"Kalender",en:"Calendar",es:"Calendario",fr:"Calendrier",hi:"",nl:"Kalender",zh:""},BA={ar:"",de:"Karte",en:"Card",es:"Tarjeta",fr:"Carte",hi:"",nl:"Kaart",zh:""},xA={ar:"  ",de:"Karte erstellt",en:"Card created",es:"Tarjeta creada",fr:"Carte cre",hi:"  ",nl:"Kaart gemaakt",zh:""},jA={ar:"  ",de:"Karte gelscht",en:"Card deleted",es:"Tarjeta eliminada",fr:"Carte supprime",hi:"  ",nl:"Kaart verwijderd",zh:""},HA={ar:"  ",de:"Karte aktualisiert",en:"Card updated",es:"Tarjeta actualizada",fr:"Carte mise  jour",hi:"   ",nl:"Kaart bijgewerkt",zh:""},UA={ar:"",de:"Karten",en:"Cards",es:"Tarjetas",fr:"Cartes",hi:"",nl:"Kaarten",zh:""},ao={ar:"",de:"Kategorien",en:"Categories",es:"Categoras",fr:"Catgories",hi:"",nl:"Categorien",zh:""},io={ar:"",de:"Kategorie",en:"Category",es:"Categora",fr:"Catgorie",hi:"",nl:"Categorie",zh:""},vs={ar:"  ",de:"Kategorie erstellt",en:"Category created",es:"Categora creada",fr:"Catgorie cre",hi:"  ",nl:"Categorie aangemaakt",zh:""},_s={ar:"  ",de:"Kategorie gelscht",en:"Category deleted",es:"Categora eliminada",fr:"Catgorie supprime",hi:"  ",nl:"Categorie verwijderd",zh:""},bs={ar:"  ",de:"Kategorie aktualisiert",en:"Category updated",es:"Categora actualizada",fr:"Catgorie mise  jour",hi:"   ",nl:"Categorie bijgewerkt",zh:""},oo={ar:"",de:"ndern",en:"Change",es:"Cambiar",fr:"Changement",hi:"",nl:"Wijziging",zh:""},VA={ar:"  ",de:"nderung erstellt",en:"Change created",es:"Cambio creado",fr:"Changement cr",hi:"  ",nl:"Wijziging gemaakt",zh:""},zA={ar:"  ",de:"nderung gelscht",en:"Change deleted",es:"Cambio eliminado",fr:"Modification supprime",hi:"  ",nl:"Wijziging verwijderd",zh:""},GA={ar:"  ",de:"nderung aktualisiert",en:"Change updated",es:"Cambio actualizado",fr:"Changement mis  jour",hi:"   ",nl:"Wijziging bijgewerkt",zh:""},FA={ar:"",de:"Sammlung",en:"Collection",es:"Recopilacin",fr:"Collection",hi:"",nl:"Verzameling",zh:""},WA={ar:"  ",de:"Sammlung erstellt",en:"Collection created",es:"Coleccin creada",fr:"Collecte cre",hi:"  ",nl:"Collectie gemaakt",zh:""},$A={ar:"  ",de:"Sammlung gelscht",en:"Collection deleted",es:"Coleccin eliminada",fr:"Collecte supprime",hi:"  ",nl:"Collectie verwijderd",zh:""},KA={ar:"  ",de:"Sammlung aktualisiert",en:"Collection updated",es:"Coleccin actualizada",fr:"Collection mise  jour",hi:"   ",nl:"Collectie bijgewerkt",zh:""},YA={ar:"",de:"Sammlungen",en:"Collections",es:"Colecciones",fr:"Collections",hi:"",nl:"Collecties",zh:""},Rt={ar:"",de:"Kochen",en:"Cook",es:"Cocinar",fr:"Cuisiner",hi:" ",nl:"Kok",zh:""},QA={ar:"",de:"Ereignis",en:"Event",es:"Evento",fr:"vnement",hi:"",nl:"Evenement",zh:""},XA={ar:"  ",de:"Ereignis erstellt",en:"Event created",es:"Evento creado",fr:"vnement cr",hi:"  ",nl:"Evenement gemaakt",zh:""},JA={ar:"  ",de:"Veranstaltung gelscht",en:"Event deleted",es:"Evento eliminado",fr:"vnement supprim",hi:"  ",nl:"Evenement verwijderd",zh:""},ZA={ar:"  ",de:"Veranstaltung aktualisiert",en:"Event updated",es:"Evento actualizado",fr:"vnement mis  jour",hi:"   ",nl:"Evenement bijgewerkt",zh:""},qA={ar:"",de:"Ereignis",en:"Events",es:"Eventos",fr:"vnements",hi:"",nl:"Evenementen",zh:""},ir={ar:"",de:"Gesundheit",en:"Health",es:"Salud",fr:"Sant",hi:"",nl:"Gezondheid",zh:""},Ss={ar:"",de:"Haushalt",en:"Household",es:"Familiar",fr:"Mnage",hi:"",nl:"Huishouden",zh:""},ef={ar:" ",de:"Haushalt erstellt",en:"Household created",es:"Hogar creado",fr:"Mnage cr",hi:" ",nl:"huishouden gemaakt",zh:""},tf={ar:"  ",de:"Haushalt gelscht",en:"Household deleted",es:"Hogar eliminado",fr:"Foyer supprim",hi:"  ",nl:"Huishouden verwijderd",zh:""},rf={ar:" ",de:"Haushalt aktualisiert",en:"Household updated",es:"Hogar actualizado",fr:"Mnage mis  jour",hi:"   ",nl:"Huishouden bijgewerkt",zh:""},or={ar:"",de:"Inventar",en:"Inventory",es:"Inventario",fr:"Inventaire",hi:"",nl:"Inventaris",zh:""},Pa={ar:"",de:"Artikel",en:"Item",es:"Artculo",fr:"Article",hi:"",nl:"Item",zh:""},_i={ar:"  ",de:"Artikel erstellt",en:"Item created",es:"Elemento creado",fr:"Article cr",hi:"  ",nl:"Artikel gemaakt",zh:""},bi={ar:"  ",de:"Artikel gelscht",en:"Item deleted",es:"Elemento eliminado",fr:"Article supprim",hi:"  ",nl:"Artikel verwijderd",zh:""},Si={ar:"  ",de:"Artikel aktualisiert",en:"Item updated",es:"Artculo actualizado",fr:"Article mis  jour",hi:"   ",nl:"Artikel bijgewerkt",zh:""},ka={ar:"",de:"Artikel",en:"Items",es:"Elementos",fr:"Articles",hi:"",nl:"Artikelen",zh:""},nf={ar:"",de:"Liste",en:"List",es:"Lista",fr:"Liste",hi:"",nl:"Lijst",zh:""},af={ar:"  ",de:"Liste erstellt",en:"List created",es:"Lista creada",fr:"Liste cre",hi:"  ",nl:"Lijst gemaakt",zh:""},of={ar:"  ",de:"Liste gelscht",en:"List deleted",es:"Lista eliminada",fr:"Liste supprime",hi:"  ",nl:"Lijst verwijderd",zh:""},sf={ar:"  ",de:"Liste aktualisiert",en:"List updated",es:"Lista actualizada",fr:"Liste mise  jour",hi:"   ",nl:"Lijst bijgewerkt",zh:""},lf={ar:"",de:"Listen",en:"Lists",es:"Liza",fr:"Listes",hi:"",nl:"Lijsten",zh:""},uf={ar:"",de:"Protokoll",en:"Log",es:"Registro",fr:"Enregistrer",hi:"  ",nl:"Logboek",zh:""},cf={ar:"  ",de:"Protokoll erstellt",en:"Log created",es:"Registro creado",fr:"Journal cr",hi:"  ",nl:"Logboek gemaakt",zh:""},df={ar:"  ",de:"Protokoll gelscht",en:"Log deleted",es:"Registro eliminado",fr:"Journal supprim",hi:"  ",nl:"Log verwijderd",zh:""},Af={ar:"  ",de:"Protokoll aktualisiert",en:"Log updated",es:"Registro actualizado",fr:"Journal mis  jour",hi:"   ",nl:"Logboek bijgewerkt",zh:""},ff={ar:"",de:"Protokolle",en:"Logs",es:"Registros",fr:"Journaux",hi:"",nl:"Logboeken",zh:""},hf={ar:" ",de:"Essensplan",en:"Meal Plan",es:"Rgimen de comidas",fr:"Plan de repas",hi:"  ",nl:"Maaltijdplan",zh:""},pf={ar:"   ",de:"Speiseplan erstellt",en:"Meal plan created",es:"Plan de comidas creado",fr:"Plan de repas cr",hi:"  ",nl:"Maaltijdplan gemaakt",zh:""},mf={ar:"   ",de:"Speiseplan gelscht",en:"Meal plan deleted",es:"Plan de comidas eliminado",fr:"Plan de repas supprim",hi:"   ",nl:"Maaltijdplan verwijderd",zh:""},gf={ar:"   ",de:"Speiseplan aktualisiert",en:"Meal plan updated",es:"Plan de comidas actualizado",fr:"Plan de repas mis  jour",hi:"    ",nl:"Maaltijdplan bijgewerkt",zh:""},yf={ar:" ",de:"Essensplne",en:"Meal Plans",es:"Planes de alimentacin",fr:"Plans de repas",hi:" ",nl:"Maaltijdplannen",zh:""},vf={ar:" ",de:"Essenszeit",en:"Meal Time",es:"Hora de la comida",fr:"Heure du repas",hi:"  ",nl:"Maaltijd tijd",zh:""},_f={ar:"   ",de:"Essenszeit erstellt",en:"Meal time created",es:"Hora de la comida creada",fr:"L'heure du repas cre",hi:"    ",nl:"Maaltijd gecreerd",zh:""},bf={ar:"   ",de:"Essenszeit gelscht",en:"Meal time deleted",es:"Hora de comer eliminada",fr:"Heure du repas supprime",hi:"    ",nl:"Etenstijd geschrapt",zh:""},Sf={ar:"  ",de:"Essenszeit aktualisiert",en:"Meal time updated",es:"Hora de la comida actualizada",fr:"L'heure du repas mise  jour",hi:"     ",nl:"Maaltijd bijgewerkt",zh:""},Ef={ar:" ",de:"Essenszeiten",en:"Meal Times",es:"Horas de comida",fr:"Heures de repas",hi:"  ",nl:"Maaltijden",zh:""},wf={ar:"",de:"Notiz",en:"Note",es:"Nota",fr:"Note",hi:"",nl:"Opmerking",zh:""},If={ar:"  ",de:"Notiz erstellt",en:"Note created",es:"Nota creada",fr:"Remarque cre",hi:"  ",nl:"Notitie gemaakt",zh:""},Cf={ar:"  ",de:"Hinweis gelscht",en:"Note deleted",es:"Nota eliminada",fr:"Remarque supprime",hi:"  ",nl:"Opmerking verwijderd",zh:""},Tf={ar:"  ",de:"Kategorie aktualisiert",en:"Category updated",es:"Categora actualizada",fr:"Catgorie mise  jour",hi:"   ",nl:"Categorie bijgewerkt",zh:""},ti={ar:"",de:"Notizen",en:"Notes",es:"notas",fr:"Remarques",hi:"",nl:"Notities",zh:""},Df={ar:"",de:"Zahlungsempfnger",en:"Payee",es:"Tenedor",fr:"Bnficiaire",hi:"",nl:"Begunstigde",zh:""},Of={ar:"   ",de:"Zahlungsempfnger erstellt",en:"Payee created",es:"Beneficiario creado",fr:"Bnficiaire cr",hi:"  ",nl:"Begunstigde gemaakt",zh:""},Rf={ar:"   ",de:"Zahlungsempfnger gelscht",en:"Payee deleted",es:"Beneficiario eliminado",fr:"Bnficiaire supprim",hi:"   ",nl:"Begunstigde verwijderd",zh:""},Pf={ar:"  ",de:"Zahlungsempfnger aktualisiert",en:"Payee updated",es:"Beneficiario actualizado",fr:"Bnficiaire mis  jour",hi:"   ",nl:"Begunstigde bijgewerkt",zh:""},kf={ar:" ",de:"Zahlungsempfnger",en:"Payees",es:"Beneficiarios",fr:"Bnficiaires",hi:"",nl:"Begunstigden",zh:""},sr={ar:"",de:"Planen",en:"Plan",es:"Plan",fr:"Plan",hi:"",nl:"Plan",zh:""},Nf={ar:"",de:"Projekt",en:"Project",es:"Proyecto",fr:"Projet",hi:"",nl:"projecteren",zh:""},Mf={ar:"  ",de:"Projekt erstellt",en:"Project created",es:"Proyecto creado",fr:"Projet cr",hi:" ",nl:"Project gemaakt",zh:""},Lf={ar:"  ",de:"Projekt gelscht",en:"Project deleted",es:"Proyecto eliminado",fr:"Projet supprim",hi:"  ",nl:"Project verwijderd",zh:""},Bf={ar:"  ",de:"Projekt aktualisiert",en:"Project updated",es:"Proyecto actualizado",fr:"Projet mis  jour",hi:"   ",nl:"Project bijgewerkt",zh:""},xf={ar:"",de:"Projekte",en:"Projects",es:"Proyectos",fr:"Projets",hi:"",nl:"Projecten",zh:""},jf={ar:"",de:"Rezept",en:"Recipe",es:"Receta",fr:"Recette",hi:" ",nl:"Recept",zh:""},Hf={ar:"  ",de:"Rezept erstellt",en:"Recipe created",es:"Receta creada",fr:"Recette cre",hi:" ",nl:"Recept gemaakt",zh:""},Uf={ar:" ",de:"Rezept gelscht",en:"Recipe deleted",es:"Receta eliminada",fr:"Recette supprime",hi:"  ",nl:"Recept verwijderd",zh:""},Vf={ar:" ",de:"Rezept aktualisiert",en:"Recipe updated",es:"Receta actualizada",fr:"Recette mise  jour",hi:"   ",nl:"Recept bijgewerkt",zh:""},zf={ar:"",de:"Rezepte",en:"Recipes",es:"Recetas",fr:"Recettes",hi:"",nl:"Recepten",zh:""},Gf={ar:" ",de:"Wiederkehrende Transaktion",en:"Recurring Transaction",es:"Transaccin recurrente",fr:"Transaction rcurrente",hi:" ",nl:"Terugkerende transactie",zh:""},Ff={ar:"   ",de:"Wiederkehrende Transaktion erstellt",en:"Recurring Transaction created",es:"Transaccin recurrente creada",fr:"Transaction rcurrente cre",hi:"   ",nl:"Terugkerende transactie gemaakt",zh:""},Wf={ar:"   ",de:"Wiederkehrende Transaktion gelscht",en:"Recurring Transaction deleted",es:"Transaccin recurrente eliminada",fr:"Transaction rcurrente supprime",hi:" -  ",nl:"Terugkerende transactie verwijderd",zh:""},$f={ar:"   ",de:"Wiederkehrende Transaktion aktualisiert",en:"Recurring Transaction updated",es:"Transaccin recurrente actualizada",fr:"Transaction rcurrente mise  jour",hi:" -   ",nl:"Terugkerende transactie bijgewerkt",zh:""},Kf={ar:" ",de:"Wiederkehrende Transaktionen",en:"Recurring Transactions",es:"Transacciones Recurrentes",fr:"Transactions rcurrentes",hi:" ",nl:"Terugkerende transacties",zh:""},Un={ar:"",de:"Belohnung",en:"Reward",es:"Premio",fr:"Rcompense",hi:"",nl:"Beloning",zh:""},Vn={ar:"",de:"Sicherheit",en:"Secrets",es:"Misterios",fr:"secrets",hi:"",nl:"Geheimen",zh:""},Yf={ar:"  ",de:"Sitzung erstellt",en:"Session created",es:"Sesin creada",fr:"Session cre",hi:"  ",nl:"Sessie gemaakt",zh:""},Qf={ar:"  ",de:"Sitzung gelscht",en:"Session deleted",es:"Sesin eliminada",fr:"Session supprime",hi:"  ",nl:"Sessie verwijderd",zh:""},Xf={ar:"  ",de:"Sitzung aktualisiert",en:"Session updated",es:"Sesin actualizada",fr:"Session mise  jour",hi:"   ",nl:"Sessie bijgewerkt",zh:""},Pt={ar:"",de:"Einkaufen",en:"Shop",es:"Comercio",fr:"Boutique",hi:"",nl:"Winkel",zh:""},Jf={ar:"",de:"Aufgabe",en:"Task",es:"Tarea",fr:"Tche",hi:"",nl:"Taak",zh:""},Zf={ar:" ",de:"Aufgabe erledigt",en:"Task completed",es:"Tarea terminada",fr:"Tche termine",hi:"   ",nl:"Taak volbracht",zh:""},qf={ar:"  ",de:"Aufgabe erstellt",en:"Task created",es:"Tarea creada",fr:"Tche cre",hi:"  ",nl:"Taak gemaakt",zh:""},eh={ar:"  ",de:"Aufgabe gelscht",en:"Task deleted",es:"Tarea eliminada",fr:"Tche supprime",hi:"  ",nl:"Taak verwijderd",zh:""},th={ar:"  ",de:"Nchstes Flligkeitsdatum",en:"Next due date",es:"Fecha de vencimiento Siguiente",fr:"Prochaine date d'chance",hi:"  ",nl:"Volgende vervaldatum",zh:""},rh={ar:"  ",de:"Aufgabe aktualisiert",en:"Task updated",es:"Tarea actualizada",fr:"Tche mise  jour",hi:"   ",nl:"Taak bijgewerkt",zh:""},nh={ar:"",de:"Aufgaben",en:"Tasks",es:"Tareas",fr:"Tches",hi:"",nl:"Taken",zh:""},ah={ar:"  ",de:"Transaktion erstellt",en:"Transaction created",es:"Transaccin creada",fr:"Opration cre",hi:"- ",nl:"Transactie aangemaakt",zh:""},ih={ar:"  ",de:"Transaktion gelscht",en:"Transaction deleted",es:"Transaccin eliminada",fr:"Opration supprime",hi:"-   ",nl:"Transactie verwijderd",zh:""},oh={ar:"  ",de:"Transaktion aktualisiert",en:"Transaction updated",es:"Transaccin actualizada",fr:"Transaction mise  jour",hi:"-   ",nl:"Transactie bijgewerkt",zh:""},sh={ar:"  ",de:"Wert geschaffen",en:"Value created",es:"valor creado",fr:"Valeur cre",hi:" ",nl:"Waarde gecreerd",zh:""},lh={ar:"  ",de:"Wert gelscht",en:"Value deleted",es:"Valor eliminado",fr:"Valeur supprime",hi:"  ",nl:"Waarde verwijderd",zh:""},uh={ar:"  ",de:"Wert aktualisiert",en:"Value updated",es:"Valor actualizado",fr:"Valeur mise  jour",hi:"   ",nl:"Waarde bijgewerkt",zh:""},ch={ar:"",de:"Tresor",en:"Vault",es:"Bveda",fr:"Sauter",hi:"",nl:"Kluis",zh:""},dh={ar:"  Vault",de:"Tresor erstellt",en:"Vault created",es:"Bveda creada",fr:"Coffre-fort cr",hi:" ",nl:"Kluis gemaakt",zh:""},Ah={ar:"  Vault",de:"Tresor gelscht",en:"Vault deleted",es:"Bveda eliminada",fr:"Coffre-fort supprim",hi:"  ",nl:"Kluis verwijderd",zh:""},fh={ar:"  Vault",de:"Tresor aktualisiert",en:"Vault updated",es:"Bveda actualizada",fr:"Coffre-fort mis  jour",hi:"   ",nl:"Kluis gepdatet",zh:""},hh={ar:"",de:"Gewlbe",en:"Vaults",es:"Bvedas",fr:"coffres",hi:"",nl:"Gewelven",zh:""},ph={ar:"  ",de:"Kategorie erstellt",en:"Category created",es:"Categora creada",fr:"Catgorie cre",hi:"  ",nl:"Categorie aangemaakt",zh:""},mh={ar:"  ",de:"Fassung gelscht",en:"Version deleted",es:"Versin eliminada",fr:"Version supprime",hi:"  ",nl:"Versie verwijderd",zh:""},gh={ar:"  ",de:"Version aktualisiert",en:"Version updated",es:"Versin actualizada",fr:"Version mise  jour",hi:"   ",nl:"Versie bijgewerkt",zh:""},yh={ar:"  iCalendar",de:"iCalendar erstellt",en:"iCalendar created",es:"iCalendar creado",fr:"iCalendar cr",hi:" ",nl:"iCalendar gemaakt",zh:"iCalendar "},vh={ar:"  iCalendar",de:"iCalendar gelscht",en:"iCalendar deleted",es:"iCalendar eliminado",fr:"iCalendar supprim",hi:"iCalendar   ",nl:"iCalendar verwijderd",zh:"iCalendar "},_h={ar:"  iCalendar",de:"iCalendar aktualisiert",en:"iCalendar updated",es:"iCalendar actualizado",fr:"iCalendar mis  jour",hi:"   ",nl:"iCalendar bijgewerkt",zh:"iCalendar "},so={ar:"Homechart  ",de:"Homechart ist offline",en:"Homechart is offline",es:"Homechart est fuera de lnea",fr:"Homechart est hors ligne",hi:"  ",nl:"Homechart is offline",zh:""},bh={ar:"Homechart  ",de:"Homechart ist online",en:"Homechart is online",es:"Homechart est en lnea",fr:"Homechart est en ligne",hi:"  ",nl:"Thuiskaart is online",zh:""},Sh={ar:"  Homechart!",de:"Vielen Dank fr den Kauf von Homechart!",en:"Thank you for purchasing Homechart!",es:"Gracias por comprar Homechart!",fr:"Merci d'avoir achet Homechart !",hi:"    !",nl:"Bedankt voor het kopen van Homechart!",zh:" Homechart"},Eh={ar:"   Homechart ",de:"Ihr Homechart-Abonnement ist am abgelaufen",en:"Your Homechart subscription expired on",es:"Su suscripcin a Homechart expir el",fr:"Votre abonnement Homechart a expir le",hi:"     ",nl:"Uw Homechart-abonnement is verlopen op",zh:" Homechart "},wh={ar:"    Homechart!",de:"Bitte erneuern Sie es, um Homechart weiterhin zu verwenden!",en:"Please renew it to keep using Homechart!",es:"Renuvala para seguir usando Homechart!",fr:"Veuillez le renouveler pour continuer  utiliser Homechart!",hi:"          !",nl:"Verleng deze om Homechart te blijven gebruiken!",zh:" Homechart"},Ih={ar:"   Homechart ",de:"Ihr Homechart-Abonnement luft am ab",en:"Your Homechart subscription will expire on",es:"Su suscripcin a Homechart caducar el",fr:"Votre abonnement Homechart expirera le",hi:"      ",nl:"Uw Homechart-abonnement loopt af op",zh:" Homechart "},Ch={ar:"    Homechart!",de:"Bitte erneuern Sie es, um Homechart weiterhin zu verwenden!",en:"Please renew it to keep using Homechart!",es:"Renuvala para seguir usando Homechart!",fr:"Veuillez le renouveler pour continuer  utiliser Homechart!",hi:"          !",nl:"Verleng deze om Homechart te blijven gebruiken!",zh:" Homechart"},Th={ar:"     Homechart   ",de:"Schlieen Sie die Einrichtung Ihres Homechart-Abonnements ab, um Haushaltsfunktionen zu nutzen",en:"Finish setting up your Homechart subscription to use household features",es:"Termine de configurar su suscripcin a Homechart para usar las funciones del hogar",fr:"Terminez la configuration de votre abonnement Homechart pour utiliser les fonctionnalits du foyer",hi:"             ",nl:"Voltooi het instellen van uw Homechart-abonnement om huishoudelijke functies te gebruiken",zh:" Homechart "},Dh={ar:"       ",de:"E-Mail zum Zurcksetzen des Passworts gesendet",en:"Password reset email sent",es:"Correo electrnico de restablecimiento de contrasea enviado",fr:"E-mail de rinitialisation du mot de passe envoy",hi:"    ",nl:"Wachtwoord reset e-mail verzonden",zh:""},Oh={ar:"    ",de:"Besttigungs-E-Mail gesendet",en:"Verification email sent",es:"El mensaje de verificacin ha sido enviado",fr:"L'email de vrification a t envoy",hi:"     ",nl:"verificatie email verzonden",zh:""},Rh={ar:"       ",de:"Bitte besttigen Sie Ihre E-Mail-Adresse, um Benachrichtigungen zu erhalten",en:"Please verify your email address to receive notifications",es:"Por favor verifique su direccin de correo electrnico para recibir notificaciones",fr:"Veuillez vrifier votre adresse e-mail pour recevoir des notifications",hi:"          ",nl:"Verifieer uw e-mailadres om meldingen te ontvangen",zh:""},Ph={ar:" 10 ",de:"10 Minuten vorher",en:"10 minutes before",es:"10 minutos antes",fr:"10 minutes avant",hi:"10  ",nl:"10 minuten ervoor",zh:"10"},kh={ar:"  ",de:"1 Stunde vorher",en:"1 hour before",es:"1 hora antes",fr:"1 heure avant",hi:"1  ",nl:"1 uur ervoor",zh:"1 "},Nh={ar:"  ",de:"1 Stunde vorher",en:"1 hour before",es:"1 hora antes",fr:"1 heure avant",hi:"1  ",nl:"1 uur ervoor",zh:"1 "},Mh={ar:" 30 ",de:"30 Minuten vorher",en:"30 minutes before",es:"30 minutos antes",fr:"30 minutes avant",hi:"30  ",nl:"30 minuten ervoor",zh:"30"},Lh={ar:"       ",de:"Berechtigungen zum Bearbeiten oder Anzeigen von Budgetkonten, Kategorien und Transaktionen",en:"Permissions to edit or view budgeting accounts, categories, and transactions",es:"Permisos para editar o ver cuentas presupuestarias, categoras y transacciones",fr:"Autorisations de modifier ou d'afficher les comptes, les catgories et les transactions de budgtisation",hi:" ,   -       ",nl:"Machtigingen om budgetrekeningen, categorien en transacties te bewerken of te bekijken",zh:""},Bh={ar:"     ",de:"Berechtigungen zum Bearbeiten oder Anzeigen von Kalenderereignissen",en:"Permissions to edit or view calendar events",es:"Permisos para editar o ver eventos del calendario",fr:"Autorisations de modifier ou d'afficher les vnements du calendrier",hi:"       ",nl:"Rechten om agenda-afspraken te bewerken of te bekijken",zh:""},xh={ar:"         ",de:"Berechtigungen zum Bearbeiten oder Anzeigen von Kochzeiten, Speiseplnen und Rezepten",en:"Permissions to edit or view cooking meal times, meal plans, and recipes",es:"Permisos para editar o ver los horarios de las comidas, los planes de comidas y las recetas",fr:"Autorisations de modifier ou d'afficher les heures de repas, les plans de repas et les recettes",hi:"     ,            ",nl:"Rechten om kookmaaltijden, maaltijdplannen en recepten te bewerken of te bekijken",zh:""},jh={ar:"      ",de:"Berechtigungen zum Bearbeiten oder Anzeigen von Zustandselementen und Protokollen",en:"Permissions to edit or view health items and logs",es:"Permisos para editar o ver registros y elementos de salud",fr:"Autorisations de modifier ou d'afficher des lments de sant et des journaux",hi:"          ",nl:"Rechten om gezondheidsitems en logboeken te bewerken of te bekijken",zh:""},Hh={ar:"        ",de:"Berechtigungen zum Bearbeiten oder Anzeigen von Inventarelementen oder -ansichten",en:"Permissions to edit or view inventory items or views",es:"Permisos para editar o ver artculos de inventario o vistas",fr:"Autorisations de modifier ou d'afficher des lments d'inventaire ou des vues",hi:"          ",nl:"Rechten om inventarisitems of weergaven te bewerken of te bekijken",zh:""},Uh={ar:"    ",de:"Berechtigungen zum Bearbeiten oder Anzeigen von Notizen",en:"Permissions to edit or view notes",es:"Permisos para editar o ver notas",fr:"Autorisations de modifier ou d'afficher des notes",hi:"      ",nl:"Rechten om notities te bewerken of te bekijken",zh:""},Vh={ar:"      ",de:"Berechtigungen zum Bearbeiten oder Anzeigen von Planungsprojekten und -aufgaben",en:"Permissions to edit or view planning projects and tasks",es:"Permisos para editar o ver proyectos y tareas de planificacin",fr:"Autorisations de modifier ou d'afficher des projets et des tches de planification",hi:"          ",nl:"Rechten om planningsprojecten en -taken te bewerken of te bekijken",zh:""},zh={ar:"     ",de:"Berechtigungen zum Bearbeiten oder Anzeigen von Prmienkarten",en:"Permissions to edit or view reward cards",es:"Permisos para editar o ver tarjetas de recompensa",fr:"Autorisations de modifier ou d'afficher des cartes de rcompense",hi:"       ",nl:"Rechten om beloningskaarten te bewerken of te bekijken",zh:""},Gh={ar:"    ",de:"Berechtigungen zum Bearbeiten oder Anzeigen von Geheimnissen",en:"Permissions to edit or view secrets",es:"Permisos para editar o ver secretos",fr:"Autorisations de modifier ou d'afficher des secrets",hi:"       ",nl:"Rechten om geheimen te bewerken of te bekijken",zh:""},Fh={ar:"    ",de:"Berechtigungen zum Bearbeiten oder Anzeigen von Einstellungen",en:"Permissions to edit or view settings",es:"Permisos para editar o ver la configuracin",fr:"Autorisations de modifier ou d'afficher les paramtres",hi:"      ",nl:"Rechten om instellingen te bewerken of te bekijken",zh:""},Wh={ar:"        ",de:"Berechtigungen zum Bearbeiten oder Anzeigen von Einkaufskategorien, Artikeln, Listen und Geschften",en:"Permissions to edit or view shopping categories, items, lists, and stores",es:"Permisos para editar o ver categoras de compras, artculos, listas y tiendas",fr:"Autorisations de modifier ou d'afficher les catgories d'achats, les articles, les listes et les magasins",hi:" , ,          ",nl:"Rechten om winkelcategorien, items, lijsten en winkels te bewerken of te bekijken",zh:""},$h={ar:"",de:"Bearbeiten",en:"Edit",es:"Editar",fr:"Modifier",hi:" ",nl:"Bewerking",zh:""},lo={ar:"  ",de:"Rezept kann nicht importiert werden",en:"Unable to import recipe",es:"No se puede importar la receta",fr:"Impossible d'importer la recette",hi:"    ",nl:"Kan recept niet importeren",zh:""},Kh={ar:" ",de:"Rezept importiert",en:"Recipe imported",es:"Receta importada",fr:"Recette importe",hi:"  ",nl:"Recept gemporteerd",zh:""},Yh={ar:" ",de:"Keiner",en:"None",es:"Ninguno",fr:"Aucun",hi:" ",nl:"Geen",zh:""},Qh={ar:" ",de:"Erneut senden",en:"Resend",es:"reenviar",fr:"Renvoyer",hi:": ",nl:"Opnieuw versturen",zh:""},uo={ar:"",de:"Abonnieren",en:"Subscribe",es:"Suscribir",fr:"S'abonner",hi:" ",nl:"Abonneren",zh:""},co={ar:" ",de:"Rckgngig machen",en:"Undo",es:"Deshacer",fr:"annuler",hi:"",nl:"Ongedaan maken",zh:""},Xh={ar:"",de:"Sicht",en:"View",es:"Vista",fr:"Voir",hi:"",nl:"Weergave",zh:""},Jh={ar:"",de:"Schwarz",en:"Black",es:"Negro",fr:"Noir",hi:"",nl:"Zwart",zh:""},Zh={ar:"",de:"Blau",en:"Blue",es:"Azul",fr:"Bleu",hi:"",nl:"Blauw",zh:""},qh={ar:"",de:"Braun",en:"Brown",es:"Marrn",fr:"Brun",hi:"",nl:"Bruin",zh:""},ep={ar:"",de:"Grau",en:"Gray",es:"Gris",fr:"Gris",hi:"",nl:"Grijs",zh:""},tp={ar:"",de:"Grn",en:"Green",es:"Verde",fr:"Vert",hi:"",nl:"Groente",zh:""},rp={ar:"",de:"Indigo",en:"Indigo",es:"ndigo",fr:"Indigo",hi:"",nl:"Indigo",zh:""},np={ar:"",de:"Orange",en:"Orange",es:"Naranja",fr:"Orange",hi:"",nl:"Oranje",zh:""},ap={ar:" ",de:"Rosa",en:"Pink",es:"Rosa",fr:"Rose",hi:"",nl:"Roze",zh:""},ip={ar:"",de:"Lila",en:"Purple",es:"Prpura",fr:"Violet",hi:"",nl:"Paars",zh:""},op={ar:"",de:"Rot",en:"Red",es:"Rojo",fr:"Rouge",hi:"",nl:"Rood",zh:""},sp={ar:"  ",de:"Blaugrn",en:"Teal",es:"verde azulado",fr:"Sarcelle",hi:"",nl:"Wintertaling",zh:""},lp={ar:"",de:"Weiss",en:"White",es:"Blanco",fr:"Blanc",hi:"",nl:"Wit",zh:""},up={ar:"",de:"Gelb",en:"Yellow",es:"Amarillo",fr:"Jaune",hi:"",nl:"Geel",zh:""},cp={ar:"",de:"Brauch",en:"Custom",es:"Costumbre",fr:"Coutume",hi:"",nl:"Aangepast",zh:""},dp={ar:"",de:"Standard",en:"Default",es:"Por defecto",fr:"Dfaut",hi:" ",nl:"Standaard",zh:""},Na={ar:"",de:"Versteckt",en:"Hidden",es:"Oculto",fr:"Cach",hi:" ",nl:"Verborgen",zh:""},Ap={ar:"",de:"Standort",en:"Location",es:"Ubicacin",fr:"Emplacement",hi:"",nl:"Plaats",zh:""},fp={ar:"",de:"April",en:"April",es:"Abril",fr:"Avril",hi:"",nl:"april",zh:""},hp={ar:"",de:"August",en:"August",es:"Agosto",fr:"Aot",hi:"",nl:"augustus",zh:""},pp={ar:"",de:"Dezember",en:"December",es:"Diciembre",fr:"Dcembre",hi:"",nl:"December",zh:""},mp={ar:" ",de:"Februar",en:"February",es:"Febrero",fr:"Fvrier",hi:"",nl:"Februari",zh:""},gp={ar:"",de:"Januar",en:"January",es:"Enero",fr:"Janvier",hi:"",nl:"Januari",zh:""},yp={ar:"",de:"Juli",en:"July",es:"Julio",fr:"Juillet",hi:"",nl:"juli",zh:""},vp={ar:"",de:"Juni",en:"June",es:"Junio",fr:"Juin",hi:"",nl:"juni",zh:""},_p={ar:"",de:"Marsch",en:"March",es:"Marzo",fr:"Mars",hi:"",nl:"Maart",zh:""},bp={ar:"",de:"Mai",en:"May",es:"Mayo",fr:"Peut",hi:"",nl:"Kunnen",zh:""},Sp={ar:" ",de:"November",en:"November",es:"Noviembre",fr:"Novembre",hi:"",nl:"november",zh:""},Ep={ar:"",de:"Oktober",en:"October",es:"Octubre",fr:"Octobre",hi:"",nl:"oktober",zh:""},wp={ar:"",de:"September",en:"September",es:"Septiembre",fr:"Septembre",hi:"",nl:"september",zh:""},Ip={ar:"",de:"Niemals",en:"Never",es:"Nunca",fr:"Jamais",hi:" ",nl:"Nooit",zh:""},Cp={ar:" ",de:"Passwort",en:"Password",es:"Contrasea",fr:"Mot de passe",hi:"",nl:"Wachtwoord",zh:""},Es={ar:"",de:"persnlich",en:"Personal",es:"Personal",fr:"Personnel",hi:"",nl:"Persoonlijk",zh:""},Tp={ar:"",de:"Einstellungen",en:"Settings",es:"Ajustes",fr:"Paramtres",hi:"",nl:"Instellingen",zh:""},Dp={ar:" ",de:"Kostenlose Testphase",en:"Free Trial",es:"Prueba gratis",fr:"Essai gratuit",hi:" ",nl:"Gratis proefperiode",zh:""},Op={ar:"",de:"Lebensdauer",en:"Lifetime",es:"Toda la vida",fr:"Dure de vie",hi:"",nl:"Levenslang",zh:""},Rp={ar:" ( Apple App Store)",de:"Monatlich (ber Apple App Store)",en:"Monthly (via Apple App Store)",es:"Mensual (a travs de Apple App Store)",fr:"Mensuel (via Apple App Store)",hi:" (     )",nl:"Maandelijks (via Apple App Store)",zh:" Apple App Store"},Pp={ar:" (  Google Play)",de:"Monatlich (ber Google Play Store)",en:"Monthly (via Google Play Store)",es:"Mensual (a travs de Google Play Store)",fr:"Mensuel (via Google Play Store)",hi:" (Google Play Store   )",nl:"Maandelijks (via Google Play Store)",zh:" Google Play "},kp={ar:" ( Paddle)",de:"Monatlich (ber Paddel)",en:"Monthly (via Paddle)",es:"Mensual (a travs de Paddle)",fr:"Mensuel (via Paddle)",hi:" (   )",nl:"Maandelijks (via Paddle)",zh:" Paddle"},Np={ar:" ( Paddle)",de:"Jhrlich (ber Paddel)",en:"Yearly (via Paddle)",es:"Anual (a travs de Paddle)",fr:"Annuel (via Paddle)",hi:" (   )",nl:"Jaarlijks (via Paddle)",zh:" Paddle"},Mp={ar:"",de:"Gelscht",en:"Cleared",es:"borrado",fr:"Effac",hi:"  ",nl:"gewist",zh:""},Lp={ar:" ",de:"Vershnt",en:"Reconciled",es:"reconciliado",fr:"Rconcili",hi:" ",nl:"Verzoend",zh:""},Bp={ar:" ",de:"Ungeklrt",en:"Uncleared",es:"no aclarado",fr:"Non effac",hi:"",nl:"Niet gewist",zh:""},xp={ar:" ",de:"Nutzername",en:"Username",es:"Nombre de usuario",fr:"Nom d'utilisateur",hi:" ",nl:"Gebruikersnaam",zh:""},jp={ar:"   Homechart ",de:"ndern Sie die Homechart-Sprache in",en:"Change Homechart language to",es:"Cambiar el idioma de Homechart a",fr:"Changer la langue de Homechart en",hi:"    ",nl:"Verander de Homechart-taal in",zh:""},Hp={ar:"  ",de:"Ihre Kontozeitzone",en:"Your account time zone",es:"La zona horaria de tu cuenta",fr:"Fuseau horaire de votre compte",hi:"   ",nl:"De tijdzone van uw account",zh:""},Up={ar:"   ",de:"passt nicht zu Ihrem Gert",en:"does not match your device",es:"no coincide con su dispositivo",fr:"ne correspond pas  votre appareil",hi:"     ",nl:"komt niet overeen met uw apparaat",zh:""},Vp={ar:"         Homechart",de:"Auf dem Server, mit dem Sie sich verbinden, wird eine ltere Version von Homechart ausgefhrt",en:"The server you're connecting to is running an older version of Homechart",es:"El servidor al que te ests conectando est ejecutando una versin anterior de Homechart",fr:"Le serveur auquel vous vous connectez excute une ancienne version de Homechart",hi:"              ",nl:"De server waarmee u verbinding maakt, gebruikt een oudere versie van Homechart",zh:" Homechart"},Be={code:"en",offline:()=>{b.data.sessionOnline&&(b.set({sessionOnline:!1}),b.setLayoutAppAlert({message:rt(Be.code,so)}))},online:()=>{b.data.sessionOnline||(b.clearLayoutAppAlert(rt(Be.code,so)),b.setLayoutAppAlert({message:rt(Be.code,bh)}),b.set({sessionOnline:!0}))},purchase:()=>{b.setLayoutAppAlert({message:rt(Be.code,Sh)})},subscriptionExpired:t=>{const e=`${rt(Be.code,Eh)} ${t}.  ${rt(Be.code,wh)}`;b.setLayoutAppAlert({actions:[{name:rt(Be.code,uo),onclick:async()=>{b.clearLayoutAppAlert(e),X.route.set("/subscription")}}],message:e,persist:!0})},subscriptionExpiring:t=>{b.setLayoutAppAlert({actions:[{name:rt(Be.code,uo),onclick:async()=>{X.route.set("/subscription")}}],message:`${rt(Be.code,Ih)} ${t}.  ${rt(Be.code,Ch)}`})},subscriptionNeeded:()=>{b.setLayoutAppAlert({actions:[{name:"Subscribe",onclick:async()=>{X.route.set("/subscription")}}],message:rt(Be.code,Th)})}};class ws{constructor(e,r,n){this.data=ze(this.new()),this.readLock=!1,this.path=e,this.type=r,this.typeObject=jn.getObject(r),n!==void 0&&this.data(n)}alertAction(e,r){let n="";switch(e){case M.Create:n="Data created";break;case M.Delete:n="Data deleted";break;case M.Update:n="Data updated";break}b.setLayoutAppAlert({message:n},r)}async create(e){return Ae.spanStart(`${this.typeObject}.create`),Y.create(this.path,this.data()).then(async r=>{if(Ae.spanEnd(`${this.typeObject}.create`),W(r))return b.setLayoutAppAlert(r,e),r;if(this.inResponse(r))return this.alertAction(M.Create,e),this.set(r.dataValue[0])})}async delete(e,r){return Ae.spanStart(`${this.typeObject}.create`),e==null&&(e=this.data().id),Y.delete(`${this.path}/${e}`).then(n=>{if(Ae.spanEnd(`${this.typeObject}.create`),W(n))return b.setLayoutAppAlert(n,r),n;this.alertAction(M.Delete,r)})}is(e){return e!==null}inResponse(e){return e.dataType===this.typeObject&&Array.isArray(e.dataValue)&&e.dataValue.length===1?!0:(_e(`${this.typeObject}.inResponse:
${e.dataType} ${e.dataValue}`),!1)}async load(){return Oe.get(this.typeObject).then(async e=>{if(this.is(e))return this.set({...this.new(),...e},!1)})}new(){return{id:null,name:"",parentID:null,shortID:"",tags:[],updated:null}}async read(e){if(!this.readLock&&(e===void 0||this.data().updated!==e.updated))return Ae.spanStart(`${this.typeObject}.read`),this.readLock=!0,Y.read(`${this.path}/${this.data().id}`,{updated:this.data().updated}).then(async r=>{if(Ae.spanEnd(`${this.typeObject}.read`),this.readLock=!1,W(r))return r;if(r.status===0){Be.offline();return}if(Be.online(),r.status!==204){if(r.status===403||r.status===410){X.route.set("/signout");return}if(this.inResponse(r))return this.set(r.dataValue[0])}})}reset(){this.data(this.new())}async set(e,r){if(e!==void 0&&this.data(e),X.redraw(),r!==!1)return Oe.set(this.typeObject,this.data())}async update(e,r){Ae.spanStart(`${this.typeObject}.update`),this.readLock=!0;let n=`${this.path}/${this.data().id}`;return e.id!==this.data().id&&(n=`${this.path}/${e.id}`),Y.update(n,e).then(async a=>{if(Ae.spanEnd(`${this.typeObject}.update`),this.readLock=!1,W(a))return b.setLayoutAppAlert(a,r),a;if(a.status===0||a.status===204){this.alertAction(M.Update,r);return}if(this.inResponse(a))return this.alertAction(M.Update,r),this.set(a.dataValue[0])})}get updated(){const e=this.data().updated;return typeof e=="string"?G.fromString(e):null}}class zp{constructor(){this.data=ze(this.new()),this.lock=!1}is(e){return e!=null&&Array.isArray(e)&&e.length===1}new(){return{cloud:!1,vapid:"",version:""}}async read(e){e!==!0&&this.data().version!==""||this.lock||(this.lock=!0,await Y.read(`/api?p=${vi()}`,{}).then(async r=>{this.lock=!1,!W(r)&&this.is(r.dataValue)?this.data(r.dataValue[0]):this.data(Nt.new()),X.redraw()}))}reset(){this.data(this.new())}}const Nt=new zp;class Is extends ws{constructor(e){super("/api/v1/auth/sessions",D.AuthSession,e)}alertAction(e,r){let n="";switch(e){case M.Create:n=l.translate(Yf);break;case M.Delete:n=l.translate(Qf);break;case M.Update:n=l.translate(Xf);break}b.setLayoutAppAlert({message:n},r)}async deleteAll(){return Y.delete("/api/v1/auth/sessions").then(()=>{})}inResponse(e){return!!(e.dataType===this.typeObject&&Array.isArray(e.dataValue)&&e.dataValue.length===1)}isArray(e){return e.dataType==="AuthSessions"}new(){return{authAccountID:null,created:null,expires:null,id:null,key:null,name:"",permissionsAccount:Ge.new(),permissionsHouseholds:[],primaryAuthHouseholdID:null,userAgent:vi(),webPush:null}}async readAll(){return Y.read("/api/v1/auth/sessions",{}).then(async e=>W(e)?e:this.isArray(e)?e.dataValue:[])}async toggleNotifications(){const e=this.data();if("Notification"in window&&!l.isDemo()){if(e.webPush===null&&Nt.data().vapid!=="")return Notification.requestPermission(async r=>{var n;return r!=="granted"?_e(`Notifications not permitted: ${r}`):(await this.unsubscribeWebPush(),(n=b.getSessionServiceWorkerRegistration())==null?void 0:n.pushManager.subscribe({applicationServerKey:Nt.data().vapid,userVisibleOnly:!0}).then(async a=>{const i=JSON.parse(JSON.stringify(a));if(i.keys!==void 0)return e.webPush={auth:i.keys.auth,endpoint:a.endpoint,p256:i.keys.p256dh},this.update(e,!0)}).catch(a=>_e(a)))}).then(()=>{}).catch(r=>_e(`AuthSession.toggleNotifications: error requesting permissions: ${r}`));if(e.webPush!==null)return e.webPush=null,await this.unsubscribeWebPush(),this.update(e)}}async unsubscribeWebPush(){var e;return(e=b.getSessionServiceWorkerRegistration())==null?void 0:e.pushManager.getSubscription().then(async r=>{if(r!==null)return r.unsubscribe()}).then(()=>{})}async validate(){return de.data().id===null&&ke().id===""?Je:Y.read("/api/v1/auth/signin",{}).then(async e=>{if(W(e))return e;if(!(e.status===0||e.status===204))return this.inResponse(e)?this.set(e.dataValue[0]):Je})}}const de=new Is,Gp="none",Fp="passwordPBKDF2";class Wp extends ws{constructor(e){super("/api/v1/auth/accounts",D.AuthAccount,e),this.keys=this.data.map(r=>r.privateKeys),this.privateKey=ze("")}alertAction(e,r){let n="";switch(e){case M.Create:n=l.translate(ps);break;case M.Delete:n=l.translate(ms);break;case M.Update:n=l.translate(gs);break}b.setLayoutAppAlert({message:n},r)}alertVerifyEmail(){b.setLayoutAppAlert({actions:[{name:l.translate(Qh),onclick:async()=>this.readVerify()}],message:l.translate(Rh)})}async collapsePlanProject(e){const r=this.data();return r.collapsedPlanProjects=bn(e,r.collapsedPlanProjects),this.update(r,!0)}async collapsePlanTask(e){const r=this.data();return r.collapsedPlanTasks=bn(e,r.collapsedPlanTasks),this.update(r,!0)}async collapseNotesPage(e){const r=this.data();return r.collapsedNotesPages=bn(e,r.collapsedNotesPages),this.update(r,!0)}async createAccount(e,r){const n=Y.setHostname(r);return n!==void 0?n:Y.create(this.path,e).then(async a=>{if(W(a))return b.setLayoutAppAlert(a),a;if(de.inResponse(a)){const i=await Y.setAuth({id:a.dataValue[0].id,key:a.dataValue[0].key});return i!==void 0?i:(b.setSessionRedirect("/setup"),de.set(a.dataValue[0]))}return Je})}async createReset(e){return Y.create("/api/v1/auth/reset",e).then(()=>{b.setLayoutAppAlert({message:l.translate(Dh)})})}async createSession(e,r){return Y.setHostname(r),Y.create("/api/v1/auth/signin",e).then(async n=>W(n)?n:de.inResponse(n)?(await Y.setAuth({id:n.dataValue[0].id,key:n.dataValue[0].key}),de.set(n.dataValue[0])):Je)}async createTOTP(){return Y.create(`${this.path}/${this.data().id}/totp`).then(e=>W(e)?e:this.inResponse(e)?e.dataValue[0]:Je)}async decryptPrivateKeys(e){if(this.privateKey()===""){if(await this.loadPrivateKey(),this.privateKey()==="")for(let r=0;r<this.data().privateKeys.length;r++){const n=zr(this.data().privateKeys[r].key);if(!W(n)){if(this.data().privateKeys[r].provider===Gp){this.privateKey(n.ciphertext);break}const a=n.ciphertext.split(":")[0];n.ciphertext=n.ciphertext.split(":")[1];const i=await to(e,a);if(!W(i)){const o=await n.decrypt(i);if(!W(o)&&o!==""){this.privateKey(o);break}}}}X.redraw()}}async deleteICalendarID(){return Y.delete("/api/v1/icalendar").then(()=>{})}async deletePrivateKey(e){return this.updatePrivatePublicKeys({...this.data(),privateKeys:this.data().privateKeys.filter(r=>r.name!==e)})}async deleteSessions(){return Y.delete(`${this.path}/${this.data().id}/sessions`).then(()=>{})}isDemo(){return l.data().emailAddress.includes("demo.example.com")}findNotificationsHousehold(e,r){if(e!==null){const n=e.findIndex(a=>a.authHouseholdID===r);if(n>=0)return e[n]}return{...this.newNotificationsHouseholds(),authHouseholdID:r}}async hideCalendarHealthLogs(e){const r=this.data();return r.preferences.hideCalendarHealthLogs=bn(e,r.preferences.hideCalendarHealthLogs),this.update(r,!0)}async loadPrivateKey(){return Oe.get("AuthAccountPrivateKey").then(e=>{typeof e=="string"&&this.privateKey(e)})}new(){return{child:!1,collapsedNotesPages:[],collapsedPlanProjects:[],collapsedPlanTasks:[],created:null,dailyAgendaNext:null,dailyAgendaTime:"00:00",emailAddress:"",hideCalendarICalendars:[],icalendarID:null,id:null,iso639Code:navigator.language.split("-")[0],lastActivity:null,name:"",oidcCode:"",oidcProviderType:ar.None,password:"",passwordResetToken:null,permissionsAccount:Ge.new(),permissionsHouseholds:[],preferences:{colorAccent:Z.Default,colorNegative:Z.Default,colorPositive:Z.Default,colorPrimary:Z.Default,colorSecondary:Z.Default,darkMode:typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").matches,formatDateOrder:Wt.MDY,formatDateSeparator:hi.ForwardSlash,formatTime24:!1,formatWeek8601:!1,hideCalendarBudgetRecurrences:!1,hideCalendarCookMealPlans:!1,hideCalendarEvents:!1,hideCalendarHealthLogs:[],hideCalendarPlanTasks:!1,hideComponents:[],ignoreDeviceCalendarEvent:!1,ignoreDevicePlanTask:!1,ignoreEmailCalendarEvent:!1,ignoreEmailNewsletter:!1,ignoreEmailPlanTask:!1,notificationsHouseholds:[],showCalendarEventAstronomy:!1,showCalendarEventHolidaysCA:!1,showCalendarEventHolidaysUK:!1,showCalendarEventHolidaysUS:!1},primaryAuthHouseholdID:null,privateKeys:[],publicKey:"",rememberMe:!0,selfHostedID:null,setup:!1,subscriptionReferrerCode:"",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,tosAccepted:!1,totpBackup:"",totpCode:"",totpEnabled:!1,totpQR:"",totpSecret:"",updated:null,userAgent:vi(),verified:!1}}async newPrivatePublicKey(e,r){const n=await vA();if(W(n)){b.setLayoutAppAlert(n);return}const a=await this.newPrivateKeyPBKDF2(r,n.privateKey);if(W(a)){b.setLayoutAppAlert(a);return}if(a!==void 0)return l.updatePrivatePublicKeys({...l.data(),privateKeys:[{key:a,name:e,provider:Fp}],publicKey:n.publicKey}).then(()=>{l.privateKey(n.privateKey)})}async newPrivateKeyPBKDF2(e,r){const n=Sr(crypto.getRandomValues(new Uint8Array(12))),a=await to(e,n);if(W(a))return b.setLayoutAppAlert(a),"";const i=await Gr(jt,a,r===void 0?this.privateKey():r);if(W(i))return b.setLayoutAppAlert(i),"";if(i!==void 0)return`${i.encryption}$${n}:${i.ciphertext}`}newNotificationsHouseholds(){return{authHouseholdID:null,ignoreDeviceCalendarEvent:!1,ignoreDeviceCookMealPlanCook:!1,ignoreDeviceCookMealPlanPrep:!1,ignoreDevicePlanTask:!1,ignoreDevicePlanTaskComplete:!1,ignoreEmailCalendarEvent:!1,ignoreEmailCookMealPlanCook:!1,ignoreEmailCookMealPlanPrep:!1,ignoreEmailPlanTask:!1}}async readAll(e,r){return Y.read(this.path,{filter:e,offset:r}).then(n=>W(n)||n.dataValue!==null?n:Je)}async readTOTPBackup(){return Y.read(`${this.path}/${this.data().id}/totp`,{}).then(e=>W(e)?e:this.inResponse(e)?e.dataValue[0].totpBackup:"")}async readVerify(){return Y.read("/api/v1/auth/verify",{}).then(()=>{b.setLayoutAppAlert({message:l.translate(Oh)})})}async savePrivateKey(){return Oe.set("AuthAccountPrivateKey",this.privateKey())}async set(e,r){if(e!==void 0)return super.set({...this.new(),...e,preferences:{...this.new().preferences,...e.preferences}},r)}async setPrivateKey(e){const r=this.data().privateKeys,n=r.findIndex(a=>a.name===e.name);return n<0?r.push(e):r[n]=e,this.updatePrivatePublicKeys({...this.data(),privateKeys:r})}translate(e){return rt(this.data().iso639Code,e)}async updateICalendarID(){return Y.update("/api/v1/icalendar").then(async e=>{if(W(e))return e;if(this.inResponse(e))return this.alertAction(M.Update),this.set(e.dataValue[0])})}async updateHideComponents(e){const r=ge(this.data().preferences.hideComponents),n=e.toLowerCase(),a=r.indexOf(n);return a>=0?r.splice(a,1):r.push(n),this.update({...this.data(),preferences:{...this.data().preferences,hideComponents:r}})}async updatePrivatePublicKeys(e){return Y.update(`/api/v1/auth/accounts/${e.id}/keys`,e).then(async r=>{if(W(r))return r;if(this.inResponse(r))return this.alertAction(M.Update),this.set(r.dataValue[0])}).catch(r=>{b.setLayoutAppAlert({message:r.message})})}async updateReset(e){return Y.update("/api/v1/auth/reset",e).then(()=>{this.alertAction(M.Update)}).catch(r=>{b.setLayoutAppAlert({message:r.message})})}async updateTOTP(e){return Y.update(`/api/v1/auth/accounts/${e.id}/totp`,e).then(async r=>{if(W(r))return r;if(this.inResponse(r))return this.alertAction(M.Update),this.set(r.dataValue[0])}).catch(r=>{b.setLayoutAppAlert({message:r.message})})}async updateVerify(e,r){return Y.update(`/api/v1/auth/verify?id=${e}&token=${r}`,{}).then(n=>{if(X.route.set("/home"),W(n))return n;if(n.status!==200)return _e("AuthAccount.updateVerify: wrong status","Error verifying your account, try again later");b.setLayoutAppAlert({message:l.translate(PA)})})}}const l=new Wp;function Le(t,e){t!==null&&t.sort((r,n)=>{let a,i;return e!==void 0&&e.formatter===void 0&&typeof r=="object"&&typeof n=="object"?(e!==void 0&&e.property!==void 0&&r[e.property]!==void 0&&(a=r[e.property]),e!==void 0&&e.property!==void 0&&n[e.property]!==void 0&&(i=n[e.property])):e!==void 0&&e.formatter!==void 0?(a=e.formatter(r),i=e.formatter(n)):(a=r,i=n),a===i?0:a==null||a===""?1:i==null||i===""?-1:e!==void 0&&e.invert===!0?a<i?1:-1:a>i?1:-1})}function Cs(t){Ae.spanStart("AggregateTags");const e=[];for(const r of t)if(r.tags!==null&&(r.deleted===null||r.deleted===void 0))for(let n of r.tags){let a=!1;for(const i of e)if(n===""&&(n="none"),i.name===n){i.count++,a=!0;break}a||e.push({count:1,name:n})}return Le(e,{property:"name"}),Ae.spanEnd("AggregateTags"),e}function $p(t,e){return t.concat(e.filter(r=>t.indexOf(r)<0))}var pt=(t=>(t[t.Create=0]="Create",t[t.Delete=1]="Delete",t[t.Update=2]="Update",t))(pt||{});async function Ts(t){return Y.read(`${t.path}/${t.id}`,{}).then(async e=>W(e)?e:e.status===0?{hash:"",offline:!0}:e.dataType===t.typeObject&&Array.isArray(e.dataValue)&&e.dataValue.length===1?Array.isArray(e.dataValue)&&e.dataValue.length===1?{data:e.dataValue[0],hash:"",offline:!1}:{hash:"",offline:!1}:(_e(`Read: unknown API response for ${t.typeObject}: ${e.dataType} ${JSON.stringify(e.dataValue)}`),{hash:"",offline:!1}))}function Ao(t){if(t!==void 0){if(!Array.isArray(t))return t.updated;if(t.length!==0)return t.reduce((e,r)=>e.updated===void 0||e.updated===null?r:r.updated===void 0||r.updated===null||e.updated>r.updated?e:r).updated}}async function Kp(t,e,r,n){let a=!1,i=new Array;const o=ge(t);if(o.length===0&&r!==void 0&&(a=!0),r!==void 0)if(Array.isArray(r)){if(i=ge(r),n!==void 0){for(const c of i)for(let h=n.length-1;h>=0;h--)if(c.id===n[h].id&&c.updated===n[h].updated){a=!0,n.splice(h,1),h--;break}const s=[];for(const c of n){let h=!1;for(let v=o.length-1;v>=0;v--)if(o[v].id===c.id&&o[v].updated===c.updated){h=!0,i.push(o[v]),o.splice(v,1),v--;break}h||s.push(c.id)}if(s.length>=10)await Y.read(`${e}`,{}).then(c=>{!W(c)&&c.dataValue!==null&&(a=!0,i=c.dataValue)});else for(const c of s)await Y.read(`${e}/${c}`,{}).then(h=>{!W(h)&&h.dataValue!==null&&(a=!0,i=i.concat(h.dataValue))})}}else{a=!0,i=o;const s=i.findIndex(c=>c.id===r.id);s>=0&&i.splice(s,1),i.push(r)}return{changed:a||o.length>0,data:i}}async function Ds(t){let e=t.hash,r=[],n;if(t.data.length===0){const a=await Oe.get(t.typeArray);if(a!=null&&Array.isArray(a)&&a.length>0&&Object.keys(a[0]).length===Object.keys(t.newObj).length){r=a;const i=await Oe.get(`${t.typeArray}_hash`);typeof i=="string"&&(e=i),n=Ao(r)}}else r=ge(t.data),n=Ao(t.data);return Y.read(t.path,{hash:e,updated:n}).then(async a=>{if(W(a))return a;if(a.status===0)return{data:r,hash:e,offline:!0,typeArray:t.typeArray};if(a.status===204)return{data:r,hash:e,offline:!1,typeArray:t.typeArray};if(a.status===403||a.status===410)return await Oe.delete(t.typeArray),await Oe.delete(`${t.typeArray}_hash`),{hash:"",offline:!1,typeArray:t.typeArray};if(a.dataType!==t.typeArray)return _e(`ReadAll: unknown API response for ${t.typeArray}: ${a.dataType} ${JSON.stringify(a.dataValue)}`),{hash:e,offline:!1,typeArray:t.typeArray};let i=!0;if(a.dataIDs.length>0){const o=await Kp(r,t.path,a.dataValue,a.dataIDs);i=o.changed,r=o.data}else i=!0,r=a.dataValue;return i&&(Le(r,{invert:t.sortInvert,property:t.sortField}),await Oe.set(t.typeArray,r)),a.dataHash!==""&&(e=a.dataHash,await Oe.set(`${t.typeArray}_hash`,e)),{data:r,hash:e,offline:!1,typeArray:t.typeArray}})}class vt{static adjacent(e,r,n){const a=vt.sort(r);if(a.length>0){const i=a.findIndex(o=>o.id===e.id);return n?i!==0?vt.between(r[i-1].position,r[i].position):vt.increase(a[i].position,!1):i+1!==a.length?vt.between(a[i].position,a[i+1].position):vt.increase(a[i].position,!0)}return vt.increase(e.position,!0)}static between(e,r){const n=e.split(":")[0],a=r.split(":")[0],i=e.split(":")[1],o=r.split(":")[1];return n===a&&i!==void 0&&(o===void 0||i.length>o.length&&i.substr(0,o.length)===o||i.length<o.length&&o.substr(0,i.length)===i)?e.replace(/.$/,String.fromCharCode(e.charCodeAt(e.length-1)+1)):this.increase(r,!1)}static increase(e,r){return r?`${parseInt(e.split(":")[0],10)+1}`:e.includes(":")?`${e}a`:`${e}:a`}static sort(e){const r=ge(e);return r.sort((n,a)=>{const i=parseInt(n.position.split(":")[0],10),o=parseInt(a.position.split(":")[0],10);if(i<o)return-1;if(i>o)return 1;if(i===o){const s=n.position.split(":")[1],c=a.position.split(":")[1];if(s===void 0)return 1;if(c===void 0)return-1;if(s.length===c.length){if(s<c)return-1;if(s>c)return 1}else{if(s.length>c.length)return s.substr(0,c.length)>c?1:-1;if(s.length<c.length)return s<c.substr(0,s.length)?-1:1}}return 0}),r}}function Os(t,e){const r=[];let n=e.length;for(;n-->=0;)if(e[n]!==void 0&&e[n].parentID===t){if(e[n].deleted!==void 0&&e[n].deleted!==null){e.splice(n,1);continue}const a=ge(e[n]);e.splice(n,1),a.children=Os(a.id,e),r.push(a)}return r.length>0&&r[0].position!==void 0?vt.sort(r):r}function Ar(t){const e=ge(t.input);let r=[];for(let n=0;n<e.length;n++){if(e[n].deleted!==void 0&&e[n].deleted!==null){e.splice(n,1),n--;continue}if(t.rootID===void 0&&e[n].parentID===null||e[n].id===t.rootID){const a=r.push(e[n]);e.splice(n,1),n--;const i=e.length;r[a-1].children=Os(r[a-1].id,e),n=Math.max(n-(i-e.length),-1)}}return t.rootID===void 0&&(r=r.concat(e)),r.length>0&&r[0].position!==void 0?vt.sort(r):r}async function Yp(t){return new Promise(e=>e({action:We.FilterSortChildren,data:Ar(t.arguments),type:t.type}))}async function Qp(t){return Ts(t.arguments).then(e=>({action:We.Read,data:e,type:t.type}))}async function Xp(t){return Ds(t.arguments).then(e=>({action:We.ReadAll,data:e,type:t.type}))}async function Jp(t){await Oe.set(t.arguments.type,t.arguments.data)}const Ma=self;var We=(t=>(t[t.FilterSortChildren=0]="FilterSortChildren",t[t.Read=1]="Read",t[t.ReadAll=2]="ReadAll",t[t.Reset=3]="Reset",t[t.Set=4]="Set",t))(We||{});async function ri(t){switch(t.action){case 0:return Yp(t).then(e=>{Ma.postMessage(e)});case 1:return Qp(t).then(e=>{Ma.postMessage(e)});case 2:return Xp(t).then(e=>{Ma.postMessage(e)});case 3:return Y.clearAPIEndpoint();case 4:return Jp(t)}}Oe.init();class fo{addEventListener(e,r){self.postMessage=n=>{r({data:n})}}onmessage(e){}async postMessage(e){return ri({...e})}terminate(){}}const Zp=self;Oe.init();let La=!1;const Ba=[];Zp.addEventListener("message",async t=>{if(La)Ba.push(t);else{for(La=!0,await ri(t.data);Ba.length>0;)await ri(Ba.shift().data);La=!1}});const Ye={dispatch:t=>{t.action===We.Reset?Ye.workerPool.map(e=>{e.postMessage(t)}):(Ye.workerPool[Ye.nextID].postMessage(t),Ye.nextID++,Ye.nextID>Ye.workerPool.length-1&&(Ye.nextID=0))},init:t=>{Ye.workerPool=[...Array(2)].map(()=>{const e=new fo;return e.addEventListener("message",r=>{t(r.data)}),e})},nextID:0,workerPool:typeof window>"u"?[]:[new fo]};class we{constructor(e,r,n,a){this.batch=[],this.batchTimer=0,this.data=ze([]),this.hash="",this.loading=1,this.indexID=this.data.map(i=>i.reduce((o,s,c)=>(o[s.id]=c,o),{})),this.indexShortID=ze({}),this.names=ze([]),this.nested=ze([]),this.refreshed=!1,this.refreshing=!1,this.tags=ze([]),this.tagNames=ze([]),this.path=e,this.sortField=r,this.sortInvert=n,this.type=a,this.typeArray=jn.getArray(this.type),this.typeObject=jn.getObject(this.type),this.new().name!==void 0&&(this.names=this.data.map(i=>{const o=[];for(const s of i)(s.deleted===void 0||s.deleted===null)&&o.push(s.name);return Le(o),o}),this.new().tags!==void 0&&(this.tags=this.data.map(i=>this.formatTags(Cs(this.getTaggable(i)))),this.tagNames=this.tags.map(i=>i.map(o=>o.name)))),this.new().shortID!==void 0&&(this.indexShortID=this.data.map(i=>i.reduce((o,s,c)=>(o[s.shortID]=c,o),{})))}alertAction(e,r,n){let a="";switch(e){case M.Create:a="Data created";break;case M.Delete:a="Data deleted";break;case M.Update:a="Data updated";break}b.setLayoutAppAlert({actions:n,message:a},r)}contains(e){return e!==null}containsResponse(e){return e.dataType===this.typeObject&&Array.isArray(e.dataValue)&&e.dataValue.length===1?!0:(_e(`${this.typeObject}.containsResponse:
${e.dataType} ${JSON.stringify(e.dataValue)}`),!1)}async create(e,r){return Ae.spanStart(`${e.typeArray}.create`),Y.create(this.path,e).then(async n=>(Ae.spanEnd(`${e.typeArray}.create`),W(n)?(b.setLayoutAppAlert(n,r),n):this.containsResponse(n)?(this.alertAction(M.Create,r),this.set(n.dataValue[0]),n.dataValue[0]):Je))}async delete(e,r){return Ae.spanStart(`${this.typeArray}.delete`),Y.delete(`${this.path}/${e}`).then(async n=>{if(Ae.spanEnd(`${this.typeArray}.delete`),W(n))return b.setLayoutAppAlert(n,r),n;this.alertAction(M.Delete,r),this.remove(e)})}filter(e,r,n,a,i,o){let s=[];return{data:e.filter(c=>{switch(n){case"household":if(c.authHouseholdID===null)return!1;break;case"personal":if(c.authAccountID===null||c.authHouseholdID!==null)return!1;break}return r&&c.deleted!==void 0&&c.deleted===null?!1:!(!r&&c.deleted!==void 0&&c.deleted!==null||(c.tags!==void 0&&(s=$p(s,c.tags)),a!==""&&!o(c))||i!==""&&c.tags!==void 0&&!c.tags.includes(i))}),tags:s}}findBatch(e){const r=this.batch.find(n=>n.id===e);return r===void 0?this.new():r}findID(e){const r=this.indexID()[`${e}`];return r===void 0?this.new():ge(this.data()[r])}findName(e,r){const n=this.data().findIndex(a=>r===!0?a.authAccountID!==null&&a.authHouseholdID===null&&a.name===e:a.authHouseholdID!==null&&a.name===e);return n>=0&&this.data().length>0?ge(this.data()[n]):this.new()}findShortID(e){const r=this.indexShortID()[`${e}`];return r===void 0?this.new():ge(this.data()[r])}findTag(e,r){r===void 0&&(r=this.data());const n=r.filter(a=>a.tags!==void 0&&a.tags!==null?a.tags.includes(e):!1);return Le(n,{property:"name"}),n}formatTags(e){return e}getTaggable(e){return e}is(e){return e!==null}inResponse(e){return e.dataType===this.typeArray?!0:(_e(`${this.typeObject}.inResponse:
${e.dataType} ${e.dataValue}`),!1)}isLoaded(){return this.loading===0}new(){return{id:null,name:"",parentID:null,shortID:"",tags:[],updated:null}}async onSSE(e){switch(e.operation){case pt.Delete:this.remove(e.id);break;case pt.Create:case pt.Update:await this.read(e.id,e.updated)}}async read(e,r,n){if(!(r!==void 0&&r===this.findID(e).updated||r===this.findBatch(e).updated)){if(Ae.spanStart(`${this.typeArray}.read`),n===!0)return Ts({id:e,path:this.path,typeObject:this.typeObject}).then(a=>{if(Ae.spanEnd(`${this.typeArray}.read`),W(a))return a;if(a.data!==void 0)return a.data});Ye.dispatch({action:We.Read,arguments:{id:e,path:this.path,typeObject:this.typeObject},type:this.type})}}readAll(){this.refreshed||(Ae.spanStart(`${this.typeArray}.readAll`),Ye.dispatch({action:We.ReadAll,arguments:{data:this.data(),hash:this.hash,newObj:this.new(),path:this.path,sortField:this.sortField,sortInvert:this.sortInvert,typeArray:this.typeArray},type:this.type}))}async readAllSync(){return Ds({data:this.data(),hash:this.hash,newObj:this.new(),path:this.path,sortField:this.sortField,sortInvert:this.sortInvert,typeArray:this.typeArray}).then(e=>{if(W(e))return e;e.data!==void 0&&this.data(e.data)})}remove(e){const r=this.data(),n=r.findIndex(a=>a.id===e);n>=0&&(r.splice(n,1),this.set(r,"",!0))}reset(){this.data([]),this.hash="",this.refreshed=!1}set(e,r,n){Ae.spanStart(`${this.typeArray}.set`),r!==void 0&&r!==""&&(this.hash=r),Array.isArray(e)?(this.refreshed=!0,this.data(e),this.new().parentID!==void 0&&(n!==!0&&this.setLoading(),Ye.dispatch({action:We.FilterSortChildren,arguments:{input:this.data()},type:this.type})),n===!0?Ye.dispatch({action:We.Set,arguments:{data:e,type:this.typeArray}}):this.setLoading(!1),X.redraw()):e===void 0?this.setLoading(!1):(this.batch.push(e),clearTimeout(this.batchTimer),this.batchTimer=window.setTimeout(async()=>{this.setBatch()},100)),Ae.spanEnd(`${this.typeArray}.set`)}setBatch(){const e=this.data(),r=ge(this.batch);if(this.batch=[],r.length!==0){for(const n of r){const a=e.findIndex(i=>i.id===n.id);a>=0?e[a]=n:e.push(n)}Le(e,{invert:this.sortInvert,property:this.sortField}),this.data(e),this.new().parentID!==void 0&&Ye.dispatch({action:We.FilterSortChildren,arguments:{input:this.data()},type:this.type}),X.redraw(),Ye.dispatch({action:We.Set,arguments:{data:e,type:this.typeArray}})}}setLoading(e){e===!1&&this.loading>0?this.loading-=1:e===!1?_e(`${this.typeArray}.setLoading: overloaded`):this.loading+=1}setNested(e){this.nested(e),this.loading>0&&this.setLoading(!1),X.redraw()}async update(e,r){return Ae.spanStart(`${e.typeArray}.update`),this.undo=this.findID(e.id),clearTimeout(this.batchTimer),Y.update(`${this.path}/${e.id}`,e).then(async n=>{if(Ae.spanEnd(`${e.typeArray}.update`),W(n))return b.setLayoutAppAlert(n),n;if(n.status===0||n.status===204){typeof window<"u"&&(this.batchTimer=window.setTimeout(async()=>{this.setBatch()},500));return}if(this.containsResponse(n)){this.alertAction(M.Update,r,[{name:b.preferences().translations.undo,onclick:async()=>this.update(this.undo,!0).then(a=>{W(a)&&b.setLayoutAppAlert(a)})}]),typeof window<"u"&&this.set(n.dataValue[0]);return}return Je})}}class qp extends we{constructor(){super("/api/v1/bookmarks","name",!1,D.Bookmark)}alertAction(e,r,n){let a="";switch(e){case M.Create:a=l.translate(NA);break;case M.Delete:a=l.translate(MA);break;case M.Update:a=l.translate(LA);break}b.setLayoutAppAlert({actions:n,message:a},r)}getIcon(e){return e.iconName!==""?e.iconName:e.iconLink!==""?e.iconLink:Ke.Bookmark}getLink(e){return e.link.startsWith("/")||e.newWindow?e.link:`/bookmarks/${e.id}`}new(){const e=Ge.isPermitted(de.data().permissionsHouseholds,oe.Auth,it.Edit,l.data().primaryAuthHouseholdID);return{authAccountID:e?null:l.data().id,authHouseholdID:e?l.data().primaryAuthHouseholdID:null,created:null,home:!1,iconLink:"",iconName:"",id:null,link:"",name:"",newWindow:!1,shortID:"",tags:[],updated:null,updatedBy:null}}}const Fr=new qp;class em extends we{constructor(){super("/api/v1/budget/accounts","name",!1,D.BudgetAccount)}alertAction(e,r,n){let a="";switch(e){case M.Create:a=l.translate(ps);break;case M.Delete:a=l.translate(ms);break;case M.Update:a=l.translate(gs);break}b.setLayoutAppAlert({actions:n,message:a},r)}new(){return{authHouseholdID:l.data().primaryAuthHouseholdID,budget:!0,budgetTransactionAmount:0,budgetTransactionAmountCleared:0,budgetTransactionAmountReconciled:0,created:null,hidden:!1,icon:"",id:null,name:"",shortID:"",updated:null}}async reconcile(e){await Y.create(`/api/v1/budget/accounts/${e}/reconcile`).then(()=>{})}}const fr=new em;class tm extends we{constructor(){super("/api/v1/budget/categories","name",!1,D.BudgetCategory),this.groupingNames=this.data.map(e=>{const r=[];for(const n of e)n.grouping!==""&&!r.includes(n.grouping)&&r.push(n.grouping);return Le(r),r}),this.names=this.data.map(e=>{const r=e.map(n=>`${n.grouping===""?l.translate(Na):n.grouping} > ${n.name}`);return Le(r),r})}alertAction(e,r,n){let a="";switch(e){case M.Create:a=l.translate(vs);break;case M.Delete:a=l.translate(_s);break;case M.Update:a=l.translate(bs);break}b.setLayoutAppAlert({actions:n,message:a},r)}findGroupName(e){const r=e.split(" > ");if(r.length===2){r[0]===l.translate(Na)&&(r[0]="");const n=this.data().find(a=>a.grouping===r[0]&&a.name===r[1]);if(n!==void 0)return n}return this.new()}findIDHeaderName(e){const r=this.data().find(n=>n.id===e);return r===void 0?"":r.grouping===""?`${l.translate(Na)} > ${r.name}`:`${r.grouping} > ${r.name}`}new(){return{authHouseholdID:l.data().primaryAuthHouseholdID,budgetMonthCategoryAmount:0,budgetTransactionAmount:0,created:null,grouping:"",id:null,income:!1,name:"",shortID:"",targetAmount:0,targetMonth:0,targetYear:0,updated:null}}}const Wr=new tm;class rm extends we{constructor(){super("/api/v1/budget/payees","name",!1,D.BudgetPayee),this.storeNames=this.data.map(e=>{const r=[];for(const n of e)n.shopStore&&r.push(n.name);return r})}alertAction(e,r,n){let a="";switch(e){case M.Create:a=l.translate(Of);break;case M.Delete:a=l.translate(Rf);break;case M.Update:a=l.translate(Pf);break}b.setLayoutAppAlert({actions:n,message:a},r)}new(){return{address:"",authHouseholdID:l.data().primaryAuthHouseholdID,budgetCategoryID:null,budgetTransactionAmount:0,created:null,icon:"",id:null,name:"",shopStore:!1,shortID:"",updated:null}}}const hr=new rm;var ni={},nm={get exports(){return ni},set exports(t){ni=t}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var n=2e3,a={s:1,n:0,d:1};function i(g,S){if(isNaN(g=parseInt(g,10)))throw P.InvalidParameter;return g*S}function o(g,S){if(S===0)throw P.DivisionByZero;var C=Object.create(P.prototype);C.s=g<0?-1:1,g=g<0?-g:g;var R=E(g,S);return C.n=g/R,C.d=S/R,C}function s(g){for(var S={},C=g,R=2,B=4;B<=C;){for(;C%R===0;)C/=R,S[R]=(S[R]||0)+1;B+=1+2*R++}return C!==g?C>1&&(S[C]=(S[C]||0)+1):S[g]=(S[g]||0)+1,S}var c=function(g,S){var C=0,R=1,B=1,ee=0,re=0,H=0,J=1,K=1,U=0,F=1,fe=1,ne=1,be=1e7,se;if(g!=null)if(S!==void 0){if(C=g,R=S,B=C*R,C%1!==0||R%1!==0)throw P.NonIntegerParameter}else switch(typeof g){case"object":{if("d"in g&&"n"in g)C=g.n,R=g.d,"s"in g&&(C*=g.s);else if(0 in g)C=g[0],1 in g&&(R=g[1]);else throw P.InvalidParameter;B=C*R;break}case"number":{if(g<0&&(B=g,g=-g),g%1===0)C=g;else if(g>0){for(g>=1&&(K=Math.pow(10,Math.floor(1+Math.log(g)/Math.LN10)),g/=K);F<=be&&ne<=be;)if(se=(U+fe)/(F+ne),g===se){F+ne<=be?(C=U+fe,R=F+ne):ne>F?(C=fe,R=ne):(C=U,R=F);break}else g>se?(U+=fe,F+=ne):(fe+=U,ne+=F),F>be?(C=fe,R=ne):(C=U,R=F);C*=K}else(isNaN(g)||isNaN(S))&&(R=C=NaN);break}case"string":{if(F=g.match(/\d+|./g),F===null)throw P.InvalidParameter;if(F[U]==="-"?(B=-1,U++):F[U]==="+"&&U++,F.length===U+1?re=i(F[U++],B):F[U+1]==="."||F[U]==="."?(F[U]!=="."&&(ee=i(F[U++],B)),U++,(U+1===F.length||F[U+1]==="("&&F[U+3]===")"||F[U+1]==="'"&&F[U+3]==="'")&&(re=i(F[U],B),J=Math.pow(10,F[U].length),U++),(F[U]==="("&&F[U+2]===")"||F[U]==="'"&&F[U+2]==="'")&&(H=i(F[U+1],B),K=Math.pow(10,F[U+1].length)-1,U+=3)):F[U+1]==="/"||F[U+1]===":"?(re=i(F[U],B),J=i(F[U+2],1),U+=3):F[U+3]==="/"&&F[U+1]===" "&&(ee=i(F[U],B),re=i(F[U+2],B),J=i(F[U+4],1),U+=5),F.length<=U){R=J*K,B=C=H+R*ee+K*re;break}}default:throw P.InvalidParameter}if(R===0)throw P.DivisionByZero;a.s=B<0?-1:1,a.n=Math.abs(C),a.d=Math.abs(R)};function h(g,S,C){for(var R=1;S>0;g=g*g%C,S>>=1)S&1&&(R=R*g%C);return R}function v(g,S){for(;S%2===0;S/=2);for(;S%5===0;S/=5);if(S===1)return 0;for(var C=10%S,R=1;C!==1;R++)if(C=C*10%S,R>n)return 0;return R}function y(g,S,C){for(var R=1,B=h(10,C,S),ee=0;ee<300;ee++){if(R===B)return ee;R=R*10%S,B=B*10%S}return 0}function E(g,S){if(!g)return S;if(!S)return g;for(;;){if(g%=S,!g)return S;if(S%=g,!S)return g}}function P(g,S){if(c(g,S),this instanceof P)g=E(a.d,a.n),this.s=a.s,this.n=a.n/g,this.d=a.d/g;else return o(a.s*a.n,a.d)}P.DivisionByZero=new Error("Division by Zero"),P.InvalidParameter=new Error("Invalid argument"),P.NonIntegerParameter=new Error("Parameters must be integer"),P.prototype={s:1,n:0,d:1,abs:function(){return o(this.n,this.d)},neg:function(){return o(-this.s*this.n,this.d)},add:function(g,S){return c(g,S),o(this.s*this.n*a.d+a.s*this.d*a.n,this.d*a.d)},sub:function(g,S){return c(g,S),o(this.s*this.n*a.d-a.s*this.d*a.n,this.d*a.d)},mul:function(g,S){return c(g,S),o(this.s*a.s*this.n*a.n,this.d*a.d)},div:function(g,S){return c(g,S),o(this.s*a.s*this.n*a.d,this.d*a.n)},clone:function(){return o(this.s*this.n,this.d)},mod:function(g,S){if(isNaN(this.n)||isNaN(this.d))return new P(NaN);if(g===void 0)return o(this.s*this.n%this.d,1);if(c(g,S),a.n===0&&this.d===0)throw P.DivisionByZero;return o(this.s*(a.d*this.n)%(a.n*this.d),a.d*this.d)},gcd:function(g,S){return c(g,S),o(E(a.n,this.n)*E(a.d,this.d),a.d*this.d)},lcm:function(g,S){return c(g,S),a.n===0&&this.n===0?o(0,1):o(a.n*this.n,E(a.n,this.n)*E(a.d,this.d))},ceil:function(g){return g=Math.pow(10,g||0),isNaN(this.n)||isNaN(this.d)?new P(NaN):o(Math.ceil(g*this.s*this.n/this.d),g)},floor:function(g){return g=Math.pow(10,g||0),isNaN(this.n)||isNaN(this.d)?new P(NaN):o(Math.floor(g*this.s*this.n/this.d),g)},round:function(g){return g=Math.pow(10,g||0),isNaN(this.n)||isNaN(this.d)?new P(NaN):o(Math.round(g*this.s*this.n/this.d),g)},inverse:function(){return o(this.s*this.d,this.n)},pow:function(g,S){if(c(g,S),a.d===1)return a.s<0?o(Math.pow(this.s*this.d,a.n),Math.pow(this.n,a.n)):o(Math.pow(this.s*this.n,a.n),Math.pow(this.d,a.n));if(this.s<0)return null;var C=s(this.n),R=s(this.d),B=1,ee=1;for(var re in C)if(re!=="1"){if(re==="0"){B=0;break}if(C[re]*=a.n,C[re]%a.d===0)C[re]/=a.d;else return null;B*=Math.pow(re,C[re])}for(var re in R)if(re!=="1"){if(R[re]*=a.n,R[re]%a.d===0)R[re]/=a.d;else return null;ee*=Math.pow(re,R[re])}return a.s<0?o(ee,B):o(B,ee)},equals:function(g,S){return c(g,S),this.s*this.n*a.d===a.s*a.n*this.d},compare:function(g,S){c(g,S);var C=this.s*this.n*a.d-a.s*a.n*this.d;return(0<C)-(C<0)},simplify:function(g){if(isNaN(this.n)||isNaN(this.d))return this;g=g||.001;for(var S=this.abs(),C=S.toContinued(),R=1;R<C.length;R++){for(var B=o(C[R-1],1),ee=R-2;ee>=0;ee--)B=B.inverse().add(C[ee]);if(B.sub(S).abs().valueOf()<g)return B.mul(this.s)}return this},divisible:function(g,S){return c(g,S),!(!(a.n*this.d)||this.n*a.d%(a.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(g){var S,C="",R=this.n,B=this.d;return this.s<0&&(C+="-"),B===1?C+=R:(g&&(S=Math.floor(R/B))>0&&(C+=S,C+=" ",R%=B),C+=R,C+="/",C+=B),C},toLatex:function(g){var S,C="",R=this.n,B=this.d;return this.s<0&&(C+="-"),B===1?C+=R:(g&&(S=Math.floor(R/B))>0&&(C+=S,R%=B),C+="\\frac{",C+=R,C+="}{",C+=B,C+="}"),C},toContinued:function(){var g,S=this.n,C=this.d,R=[];if(isNaN(S)||isNaN(C))return R;do R.push(Math.floor(S/C)),g=S%C,S=C,C=g;while(S!==1);return R},toString:function(g){var S=this.n,C=this.d;if(isNaN(S)||isNaN(C))return"NaN";g=g||15;var R=v(S,C),B=y(S,C,R),ee=this.s<0?"-":"";if(ee+=S/C|0,S%=C,S*=10,S&&(ee+="."),R){for(var re=B;re--;)ee+=S/C|0,S%=C,S*=10;ee+="(";for(var re=R;re--;)ee+=S/C|0,S%=C,S*=10;ee+=")"}else for(var re=g;S&&re--;)ee+=S/C|0,S%=C,S*=10;return ee}},Object.defineProperty(P,"__esModule",{value:!0}),P.default=P,P.Fraction=P,t.exports=P})()})(nm);var xa=es(ni);class am extends we{constructor(){super("/api/v1/inventory/items","name",!1,D.InventoryItem),this.properties=this.data.map(e=>{const r=new Set;r.add(l.translate(Ap));for(const a of e)for(const i of Object.keys(a.properties))r.add(i);const n=Array.from(r);return Le(n),n})}alertAction(e,r,n){let a="";switch(e){case M.Create:a=l.translate(_i);break;case M.Delete:a=l.translate(bi);break;case M.Update:a=l.translate(Si);break}b.setLayoutAppAlert({actions:n,message:a},r)}findPropertyValues(e){const r=new Set;for(const a of this.data())a.properties[e]!==void 0&&r.add(a.properties[e]);const n=Array.from(r);return Le(n),n}findUPC(e){const r=this.data().find(n=>n.upc===e);return r===void 0?this.new():ge(r)}getLink(e){return`${Y.getLink()}/inventory/all?id=${e}`}new(){return{authHouseholdID:l.data().primaryAuthHouseholdID,created:null,id:null,image:"",lastPurchased:null,name:"",properties:{},quantity:1,shortID:"",upc:"",updated:null}}}const pr=new am,im=/\d+/,ho=/^\d+$/,po=/^\d+\/\d+$/;class om extends we{constructor(){super("/api/v1/cook/recipes","name",!1,D.CookRecipe)}alertAction(e,r,n){let a="";switch(e){case M.Create:a=l.translate(Hf);break;case M.Delete:a=l.translate(Uf);break;case M.Update:a=l.translate(Vf);break}b.setLayoutAppAlert({actions:n,message:a},r)}getInventoryIngredients(e){let r="";const n=e.split(`
`);for(let a=0;a<n.length;a++){let i=!1;if(!n[a].startsWith("#")){for(const o of pr.data())if(o.quantity>0&&n[a].toLowerCase().includes(o.name.toLowerCase())){r+=`${n[a]} #inventoryitem/${o.shortID}?icon
`,i=!0;break}}i||(r+=`${n[a]}`,a!==n.length-1&&(r+=`
`))}return r}async importURL(e,r){return Y.create("/api/v1/import/recipe",{authHouseholdID:r,url:e}).then(async n=>{if(W(n))return b.setLayoutAppAlert({message:l.translate(lo)}),n;if(this.containsResponse(n)){b.setLayoutAppAlert({message:l.translate(Kh)}),this.set(n.dataValue[0]),X.route.set(`/cook/recipes/${n.dataValue[0].id}`,{},{state:{key:Date.now()}});return}return b.setLayoutAppAlert({message:l.translate(lo)}),Je})}new(){return{authHouseholdID:l.data().primaryAuthHouseholdID,complexity:0,cookMealPlanCount:0,cookMealPlanLast:null,created:null,deleted:null,directions:"",id:null,image:"",ingredients:"",name:"",notes:[],public:!1,rating:0,servings:"",shortID:"",source:"",tags:[],timeCook:0,timePrep:0,updated:null}}newLog(){return{complexity:0,date:null,note:"",rating:0}}scaleIngredient(e,r){let n="";const a=e.split(" ");for(let i=0;i<a.length;i++)a[i].startsWith("(")&&(n+="(",a[i]=a[i].slice(1)),ho.test(a[i])||po.test(a[i])?po.test(a[i+1])?(n+=new xa(`${a[i]} ${a[i+1]}`).mul(r).toFraction(!0),i++):ho.test(a[i+1])?(n+=`${new xa(a[i]).mul(r).toFraction(!0)} ${a[i+1]}`,i++):n+=new xa(a[i]).mul(r).toFraction(!0):n+=a[i],i<a.length-1&&(n+=" ");return n}scaleIngredients(e,r){const n=this.getInventoryIngredients(e);if(r===""||r===null||r===void 0)return n;let a="";const i=n.split(`
`);for(let o=0;o<i.length;o++)im.test(i[o])?a+=this.scaleIngredient(i[o],r):a+=i[o],o<i.length-1&&(a+=`
`);return a}}const bt=new om;class sm extends we{constructor(){super("/api/v1/inventory/collections","name",!1,D.InventoryCollection),this.groupingNames=this.data.map(e=>{const r=[];for(const n of e)n.grouping!==""&&!r.includes(n.grouping)&&r.push(n.grouping);return Le(r),r})}alertAction(e,r,n){let a="";switch(e){case M.Create:a=l.translate(WA);break;case M.Delete:a=l.translate($A);break;case M.Update:a=l.translate(KA);break}b.setLayoutAppAlert({actions:n,message:a},r)}getLink(e){return`${Y.getLink()}/inventory/${e}`}new(){return{authHouseholdID:l.data().primaryAuthHouseholdID,columns:{},created:null,grouping:"",icon:"",id:null,name:"",shortID:"",sort:{invert:!1,property:"name"},updated:null}}toView(e){return{icon:e.icon===""?Ke.Filter:e.icon,link:`/inventory/${e.id}`,name:e.name}}}const $r=new sm;class lm extends we{constructor(){super("/api/v1/notes/pages","name",!1,D.NotesPage),this.household=this.nested.map(e=>e.filter(r=>r.deleted===null&&r.authHouseholdID!==null)),this.personal=this.nested.map(e=>e.filter(r=>r.authHouseholdID===null&&r.deleted===null&&r.authAccountID===l.data().id))}alertAction(e,r,n){let a="";switch(e){case M.Create:a=l.translate(If);break;case M.Delete:a=l.translate(Cf);break;case M.Update:a=l.translate(Tf);break}b.setLayoutAppAlert({actions:n,message:a},r)}findNamesChildren(e,r){let n=[];if(r!==void 0)for(const a of r)n.push({color:a.color,icon:a.icon===""?Ke.Notes:a.icon,id:a.id,level:e,name:a.name}),Array.isArray(a.children)&&a.children.length!==0&&(n=n.concat(this.findNamesChildren(e+1,a.children)));return n}findTag(e,r){r===void 0&&(r=this.data());const n=r.filter(a=>a.tags!==null?a.tags.includes(e):!1);return Le(n,{property:"name"}),n}getColorNamesIDs(){let e=[];return e.push({id:"personal",level:0,name:l.translate(Es)}),e=e.concat(this.findNamesChildren(1,Ar({input:this.data().filter(r=>r.deleted===null&&r.authAccountID===l.data().id)}))),Ge.isPermitted(de.data().permissionsHouseholds,oe.Notes,it.Edit)&&(e.push({id:"household",level:0,name:l.translate(Ss)}),e=e.concat(this.findNamesChildren(1,Ar({input:this.data().filter(r=>r.deleted===null&&r.authHouseholdID!==null)})))),e}new(){return{authAccountID:null,authHouseholdID:null,color:Z.Default,created:null,deleted:null,icon:"",id:null,name:"",parentID:null,shortID:"",tags:[],updated:null}}}const lr=new lm,qt=(t,e)=>!e.includes(t.toCivilDate().toJSON()),Rs=t=>{const e=[31,28,31,30,31,30,31,31,30,31,30,31];return t.timestamp.getFullYear()%4===0&&(e[1]=29),e[t.timestamp.getMonth()]},Kr=(t,e)=>{let r=0;return e?(r=Math.ceil((Rs(t)-t.timestamp.getDate())/7),r===0?-1:r*-1):(r=Math.ceil(t.timestamp.getDate()/7),r===0?1:r)},lt=(t,e)=>{let r=e;const n=Rs(t);r>n&&(r=n),t.timestamp.getDate()>r?t.addDays(n-t.timestamp.getDate()+r):t.timestamp.getDate()<r&&t.addDays(r-t.timestamp.getDate())},mo=(t,e)=>{t.getMonth()>e?(lt(t,1),t.addMonths(12-t.getMonth()+e)):t.getMonth()<e&&(lt(t,1),t.addMonths(e-t.getMonth()))},ja=(t,e)=>{t.getWeekday()>e?t.addDays(7-t.getWeekday()+e):t.getWeekday()<e&&t.addDays(e-t.getWeekday())},er=(t,e,r)=>{ja(t,r);let n=Kr(t,e<0);e>0,n>e&&(lt(t,1),ja(t,r),n=Kr(t,e<0)),t.addDays(7*(e-n))},at={findCivilDates:(t,e,r,n,a,i)=>{let o=G.fromCivilDate(r),s=o.toCivilDate(),c=G.fromCivilDate(n);const h=G.fromString(e.toString());h.timestamp.setHours(0),h.timestamp.setMinutes(0),h.timestamp.setSeconds(0),h.timestamp.setMilliseconds(0);const v=[];if(i!==null&&(s=ve.fromString(i),s.valueOf()<c.toCivilDate().valueOf()&&(c=G.fromCivilDate(s))),c.toCivilDate().valueOf()<h.toCivilDate().valueOf()||o.toCivilDate().valueOf()>s.valueOf())return[];switch(o.toCivilDate().valueOf()<=h.toCivilDate().valueOf()&&(v.push(h.toCivilDate().toJSON()),o=G.fromString(h.toString()),o.addDays(1)),at.getRecurrenceType(t)){case 0:for(;o.toCivilDate().valueOf()<=c.toCivilDate().valueOf();)o.getDiffDays(h)%t.separation===0&&qt(o,a)&&v.push(o.toCivilDate().toJSON()),o.addDays(1);break;case 1:for(;o.toCivilDate().valueOf()<=c.toCivilDate().valueOf();)Math.round(Math.abs((o.timestamp.getTime()-h.timestamp.getTime())/6048e5))%t.separation===0&&t.weekdays.includes(o.getWeekday())&&qt(o,a)&&v.push(o.toCivilDate().toJSON()),o.addDays(1);break;case 2:for(;o.toCivilDate().valueOf()<=c.toCivilDate().valueOf();){let y=(o.timestamp.getFullYear()-h.timestamp.getFullYear())*12;y+=o.getMonth()-h.getMonth();const E=y%t.separation;if(o.timestamp.getDate()!==t.day){lt(o,t.day);continue}E===0&&o.timestamp.getDate()===t.day&&qt(o,a)&&v.push(o.toCivilDate().toJSON()),o.addMonths(1)}break;case 3:for(;o.toCivilDate().valueOf()<=c.toCivilDate().valueOf();){let y=(o.timestamp.getFullYear()-h.timestamp.getFullYear())*12;y+=o.getMonth()-h.getMonth();const E=y%t.separation,P=Kr(o,t.monthWeek<0);if(E!==0||P>t.monthWeek){o.timestamp.getDate()===1&&o.addDays(1),lt(o,1);continue}if(P===t.monthWeek&&o.getWeekday()===t.weekday){qt(o,a)&&v.push(o.toCivilDate().toJSON()),o.timestamp.getDate()===1&&o.addDays(1),lt(o,1);continue}er(o,t.monthWeek,t.weekday)}break;case 4:for(;o.toCivilDate().valueOf()<=c.toCivilDate().valueOf();){const E=(o.timestamp.getFullYear()-h.timestamp.getFullYear())%t.separation;if(o.timestamp.getDate()!==t.day||o.getMonth()!==t.month){lt(o,t.day),mo(o,t.month);continue}E===0&&qt(o,a)&&v.push(o.toCivilDate().toJSON()),o.addMonths(12)}break;case 5:for(;o.toCivilDate().valueOf()<=c.toCivilDate().valueOf();){mo(o,t.month),er(o,t.monthWeek,t.weekday);const E=(o.timestamp.getFullYear()-h.timestamp.getFullYear())%t.separation,P=Kr(o,t.monthWeek<0),g=o.getWeekday();E===0&&qt(o,a)&&o.getMonth()===t.month&&P===t.monthWeek&&g===t.weekday&&o.toCivilDate().valueOf()<=c.toCivilDate().valueOf()&&v.push(o.toCivilDate().toJSON()),o.addMonths(11),lt(o,1)}}return v},getRecurrenceType:t=>t.day===0&&t.month===0&&t.monthWeek===0&&t.separation!==0&&t.weekday===0&&t.weekdays!==null&&t.weekdays.length>0?1:t.day!==0&&t.month===0&&t.monthWeek===0&&t.separation!==0&&t.weekday===0&&t.weekdays===null?2:t.day===0&&t.month===0&&t.monthWeek!==0&&t.separation!==0&&t.weekday!==0&&t.weekdays===null?3:t.day!==0&&t.month!==0&&t.monthWeek===0&&t.separation!==0&&t.weekday===0&&t.weekdays===null?4:t.day===0&&t.month!==0&&t.monthWeek!==0&&t.separation!==0&&t.weekday!==0&&t.weekdays===null?5:0,new:()=>({day:0,month:0,monthWeek:0,separation:0,weekday:0,weekdays:null}),nextCivilDate:(t,e)=>at.nextFutureTimestamp(t,G.fromCivilDate(e)).toCivilDate(),nextFutureTimestamp:(t,e)=>{const r=G.now();let n=e;if(t.separation===0)return e;for(;n.timestamp.valueOf()<=r.timestamp.valueOf()||n.timestamp.valueOf()<=e.timestamp.valueOf();)n=at.nextTimestamp(t,n);return n},nextTimestamp:(t,e)=>{const r=ge(t);let n=G.fromString(e.toString());if(t.separation===0)return e;switch(r.weekdays!==null&&r.weekdays.sort((a,i)=>a-i),at.getRecurrenceType(t)){case 0:n.addDays(r.separation);break;case 1:for(r.weekdays.every(a=>n.getWeekday()>=a)&&n.addDays(7*(r.separation-1)),n.addDays(1);r.weekdays.every(a=>n.getWeekday()!==a);)n.addDays(1);break;case 2:n.addDays(1),lt(n,r.day),n.addMonths(r.separation-1),lt(n,r.day);break;case 3:for(;r.separation>0;){n.addDays(1);const a=G.fromString(n.toString());a.timestamp.setDate(1),er(a,r.monthWeek,r.weekday),a<n&&(a.timestamp.setDate(1),a.addMonths(1),er(a,r.monthWeek,r.weekday)),n=a,r.separation-=1}break;case 4:n.addDays(1),lt(n,r.day),r.month<n.getMonth()?n.addMonths(1*(12+r.month-n.getMonth())):r.month>n.getMonth()&&n.addMonths(1*(r.month-n.getMonth())),n.addMonths(12*(r.separation-1));break;case 5:for(;r.separation>0;){n.addDays(1);const a=G.fromString(n.toString());a.timestamp.setDate(1),a.timestamp.setMonth(r.month-1),er(a,r.monthWeek,r.weekday),a<n&&(a.timestamp.setDate(1),a.addMonths(12),er(a,r.monthWeek,r.weekday)),n=a,r.separation-=1}}return n},validate:t=>{if(t.day>31||t.day<-31||t.separation<0||t.monthWeek<-4||t.monthWeek>4||t.month>12||t.month<-12)return!1;if(t.weekdays!==null){const e=[];for(const r of t.weekdays){if(r>7||r<-7||e.includes(r))return!1;e.push(r)}}return!0}},Qn={accent:t=>t===Z.Default?Z.Red:t,budgetRecurrrence:t=>t===Z.Default?Z.Teal:t,calendarEvent:t=>Qn.primary(t),cookMealPlan:t=>t===Z.Default?Z.Orange:t,planTask:(t,e)=>e===Z.Default?t===Z.Default?Z.Pink:t:e,primary:t=>t===Z.Default?Z.Yellow:t,secondary:t=>t===Z.Default?Z.Blue:t};var Ps=(t=>(t[t.USD=0]="USD",t[t.GBP=1]="GBP",t[t.EUR=2]="EUR",t[t.CAD=3]="CAD",t[t.INR=4]="INR",t[t.JPY=5]="JPY",t[t.KRW=6]="KRW",t[t.MXN=7]="MXN",t[t.RUB=8]="RUB",t[t.CHF=9]="CHF",t[t.ZAR=10]="ZAR",t[t.AUD=11]="AUD",t[t.BRL=12]="BRL",t[t.SEK=13]="SEK",t[t.AED=14]="AED",t[t.DKK=15]="DKK",t[t.TWD=16]="TWD",t))(Ps||{}),ks=(t=>(t[t.None=0]="None",t[t.PaddleYearly=1]="PaddleYearly",t[t.Apple=2]="Apple",t[t.Google=3]="Google",t[t.PaddleMonthly=4]="PaddleMonthly",t[t.PaddleLifetime=5]="PaddleLifetime",t))(ks||{});class um extends we{constructor(){super("/api/v1/auth/households","name",!1,D.AuthHousehold),this.members=this.data.map(e=>{const r=[];for(const n of e)if(n.members!==null)for(const a of n.members)r.push(a);return Le(r,{property:"name"}),r}),this.membersChildren=this.members.map(e=>e.filter(r=>r.child))}alertAction(e,r,n){let a="";switch(e){case M.Create:a=l.translate(ef);break;case M.Delete:a=l.translate(tf);break;case M.Update:a=l.translate(rf);break}b.setLayoutAppAlert({actions:n,message:a},r)}containsFeatureVote(e){return e!==null}async deleteMember(e,r){return Y.delete(`/api/v1/auth/households/${e}/members/${r}`).then(async()=>{b.setLayoutAppAlert({message:"Member deleted"})}).catch(n=>{b.setLayoutAppAlert({message:n.message})})}findMember(e,r){if(r===void 0)for(const n of this.data()){const a=this.findMember(e,n.id);if(a.id!==null)return a}else{const n=this.findID(r),a=n.members.findIndex(i=>i.id===e||i.emailAddress===e||i.name===e);if(a>=0&&n.members.length>0)return{...this.newMember(),...n.members[a]}}return this.newMember()}findMemberName(e,r){const n=this.findMember(e,r);return n.name===""?n.emailAddress:n.name}findMemberNames(e,r){if(e===null){const a=[];for(const i of this.members())(i.id===l.data().id||i.child||r!==!0)&&!a.includes(i.name)&&a.push(i.name);return a}return this.findID(e).members.filter(a=>a.id===l.data().id||a.child||r!==!0).map(a=>a.name)}getPermitted(e,r){return this.data().filter(n=>Ge.isPermitted(de.data().permissionsHouseholds,e,r,n.id))}isExpired(e){return ve.fromString(this.findID(e).subscriptionExpires)<=ve.now()}isHidden(e){if(this.data().length===0)return!1;for(const r of this.data())if(!r.preferences.hideComponents.includes(e))return!1;return!0}isMember(e){return e!==null}inResponseFeatureVotes(e){return e.dataType==="AuthHouseholdFeatureVotes"}new(){return{backupEncryptionKey:"",countMembers:0,created:null,featureVotes:[],id:null,members:[],name:"",preferences:{colorBudgetRecurrenceEvents:Z.Teal,colorCookMealPlanEvents:Z.Orange,colorHealthLogsEvents:Z.Indigo,colorPlanTaskEvents:Z.Pink,currency:Ps.USD,hideComponents:[]},selfHostedID:null,selfHostedURL:"",subscriptionCustomerID:"",subscriptionExpires:null,subscriptionID:null,subscriptionLastTransactionID:"",subscriptionProcessor:ks.None,subscriptionReferralCode:"",subscriptionReferralCount:0,subscriptionReferrerCode:"",updated:null}}newFeatureVote(){return{amount:0,comment:"",feature:0}}newMember(){return{authHouseholdID:null,child:!1,color:Z.Default,emailAddress:"",id:null,inviteToken:"",name:"",permissions:Ge.new(),publicKey:""}}async readAdmin(e,r){return Y.read(this.path,{filter:e,offset:r}).then(n=>W(n)||n.dataValue!==null?n:Je)}set(e,r){if(e!==void 0&&!Array.isArray(e)&&e.members===null){for(const a of this.data())a.id===e.id&&(e.members=a.members);if(e.members===null)return}const n=this.refreshed;super.set(e,r),n||Ot.alertSubscription()}async updateHideComponents(e,r){const n=ge(this.findID(e).preferences.hideComponents),a=r.toLowerCase(),i=n.indexOf(a);return i>=0?n.splice(i,1):n.push(a),this.update({...this.findID(e),preferences:{...this.findID(e).preferences,hideComponents:n}})}}const $e=new um,cm=[{date:"2022-01-02",name:"New Moon",time:"21:40"},{date:"2022-01-03",name:"Quadrantids Meteor Shower"},{date:"2022-01-17",details:"Wolf Moon",name:"Full Moon"},{date:"2022-02-01",name:"New Moon"},{date:"2022-02-16",details:"Snow Moon",name:"Full Moon"},{date:"2022-03-02",name:"New Moon"},{date:"2022-03-18",details:"Worm Moon",name:"Full Moon"},{date:"2022-03-20",name:"March Equinox"},{date:"2022-04-01",name:"New Moon"},{date:"2022-04-16",details:"Pink Moon",name:"Full Moon"},{date:"2022-04-22",name:"Lyrids Meteor Shower"},{date:"2022-04-30",name:"New Moon"},{date:"2022-04-30",name:"Partial Solar Eclipse"},{date:"2022-05-06",name:"Eta Aquarids Meteor Shower"},{date:"2022-05-16",details:"Flower Moon",name:"Full Moon"},{date:"2022-05-16",name:"Total Lunar Eclipse"},{date:"2022-05-30",name:"New Moon"},{date:"2022-06-14",details:"Strawberry Moon",name:"Full Moon"},{date:"2022-06-21",name:"June Solstice"},{date:"2022-06-29",name:"New Moon"},{date:"2022-07-13",detals:"Buck Moon",name:"Full Moon"},{date:"2022-07-28",name:"New Moon"},{date:"2022-07-28",name:"Delta Aquarids Meteor Shower"},{date:"2022-08-12",details:"Sturgeon Moon",name:"Full Moon"},{date:"2022-08-13",name:"Perseids Meteor Shower"},{date:"2022-08-27",name:"New Moon",time:"08:17"},{date:"2022-09-10",details:"Corn Moon",name:"Full Moon",time:"09:58"},{date:"2022-09-22",name:"September Equinox",time:"00:55"},{date:"2022-09-25",name:"New Moon",time:"21:55"},{date:"2022-10-08",name:"Draconids Meteor Shower"},{date:"2022-10-09",details:"Harvest Moon",name:"Full Moon",time:"20:55"},{date:"2022-10-22",name:"Orionids Meteor Shower"},{date:"2022-10-25",name:"New Moon",time:"10:49"},{date:"2022-10-25",name:"Partial Solar Eclipse"},{date:"2022-11-05",name:"Taurids Meteor Shower"},{date:"2022-11-08",details:"Beaver Moon",name:"Full Moon",time:"11:03"},{date:"2022-11-08",name:"Total Lunar Eclipse"},{date:"2022-11-18",name:"Leonids Meteor Shower"},{date:"2022-11-23",name:"New Moon",time:"22:58"},{date:"2022-12-08",details:"Cold Moon",name:"Full Moon",time:"04:09"},{date:"2022-12-14",name:"Geminids Meteor Shower"},{date:"2022-12-21",name:"December Solstice",time:"21:40"},{date:"2022-12-22",name:"Ursids Meteor Shower"},{date:"2022-12-22",name:"New Moon",time:"10:17"}],dm=[{date:"2023-01-04",name:"Quadrantids Meteor Shower"},{date:"2023-01-06",details:"Wolf Moon",name:"Full Moon",time:"23:09"},{date:"2023-01-21",name:"New Moon",time:"20:55"},{date:"2023-02-05",details:"Snow Moon",name:"Full Moon",time:"18:30"},{date:"2023-02-20",name:"New Moon",time:"07:08"},{date:"2023-03-07",details:"Worm Moon",name:"Full Moon",time:"12:42"},{date:"2023-03-20",name:"March Equinox",time:"21:17"},{date:"2023-03-21",name:"New Moon",time:"17:25"},{date:"2023-04-06",details:"Pink Moon",name:"Full Moon",time:"04:37"},{date:"2023-04-20",name:"New Moon",time:"04:15"},{date:"2023-04-23",name:"Lyrids Meteor Shower"},{date:"2023-05-05",details:"Flower Moon",name:"Full Moon",time:"17:36"},{date:"2023-05-05",name:"Penumbral Lunar Eclipse"},{date:"2023-05-07",name:"Eta Aquarids Meteor Shower"},{date:"2023-05-19",name:"New Moon",time:"15:55"},{date:"2023-06-04",details:"Strawberry Moon",name:"Full Moon",time:"03:43"},{date:"2023-06-18",name:"New Moon",time:"04:39"},{date:"2023-06-21",name:"June Solstice",time:"14:51"},{date:"2023-07-03",detals:"Buck Moon",name:"Full Moon, Supermoon",time:"11:40"},{date:"2023-07-17",name:"New Moon",time:"18:33"},{date:"2023-07-29",name:"Delta Aquarids Meteor Shower"},{date:"2023-08-01",details:"Sturgeon Moon",name:"Full Moon, Supermoon",time:"18:33"},{date:"2023-08-13",name:"Perseids Meteor Shower"},{date:"2023-08-16",name:"New Moon",time:"09:39"},{date:"2023-08-31",details:"Blue Moon",name:"Full Moon, Supermoon",time:"01:37"},{date:"2023-09-15",name:"New Moon",time:"01:41"},{date:"2023-09-23",name:"September Equinox",time:"06:43"},{date:"2023-09-29",details:"Corn Moon",name:"Full Moon, Supermoon",time:"09:59"},{date:"2023-10-07",name:"Draconids Meteor Shower"},{date:"2023-10-14",name:"New Moon",time:"17:56"},{date:"2023-10-14",name:"Solar Eclipse"},{date:"2023-10-22",name:"Orionids Meteor Shower"},{date:"2023-10-28",details:"Harvest Moon",name:"Full Moon",time:"20:25"},{date:"2023-10-28",name:"Partial Lunar Eclipse"},{date:"2023-11-05",name:"Taurids Meteor Shower"},{date:"2023-11-13",name:"New Moon",time:"09:28"},{date:"2023-11-18",name:"Leonids Meteor Shower"},{date:"2023-11-27",details:"Beaver moon",name:"Full Moon",time:"22:58"},{date:"2023-12-12",name:"New Moon",time:"23:33"},{date:"2023-12-14",name:"Geminids Meteor Shower"},{date:"2023-12-22",name:"Ursids Meteor Shower"},{date:"2023-12-22",name:"December Solstice",time:"03:21"},{date:"2023-12-27",details:"Cold Moon",name:"Full Moon",time:"00:34"}],Am=[{name:"New Year's Day",recurrence:{day:1,month:1}},{name:"Martin Luther King Jr. Day",recurrence:{month:1,monthWeek:3,weekday:1}},{name:"Groundhog Day",recurrence:{day:2,month:2}},{name:"President's Day",recurrence:{month:2,monthWeek:3,weekday:1}},{name:"Valentine's Day",recurrence:{day:14,month:2}},{details:"Move clocks ahead one hour",name:"Daylight Savings Time Begins",recurrence:{month:3,monthWeek:2,weekday:7}},{name:"April Fools' Day",recurrence:{day:1,month:4}},{name:"Mother's Day",recurrence:{month:5,monthWeek:2,weekday:7}},{name:"Memorial Day",recurrence:{month:5,monthWeek:-1,weekday:1}},{name:"Juneteenth",recurrence:{day:19,month:6}},{name:"Father's Day",recurrence:{month:6,monthWeek:3,weekday:7}},{name:"Independence Day",recurrence:{day:4,month:7}},{name:"Labor Day",recurrence:{month:9,monthWeek:1,weekday:1}},{name:"Columbus Day",recurrence:{month:10,monthWeek:2,weekday:1}},{name:"Halloween",recurrence:{day:31,month:10}},{details:"Move clocks back one hour",name:"Daylight Savings Time Ends",recurrence:{month:11,monthWeek:1,weekday:7}},{name:"Veterans Day",recurrence:{day:11,month:11}},{name:"Thanksgiving",recurrence:{month:11,monthWeek:4,weekday:4}},{name:"Christmas Eve",recurrence:{day:24,month:12}},{name:"Christmas Day",recurrence:{day:25,month:12}},{name:"New Year's Eve",recurrence:{day:31,month:12}}],fm=[{name:"New Year's Day",recurrence:{day:1,month:1}},{name:"Family Day",recurrence:{month:2,monthWeek:3,weekday:1}},{name:"Valentine's Day",recurrence:{day:14,month:2}},{name:"St. Patrick's Day",recurrence:{day:17,month:3}},{name:"Mother's Day",recurrence:{month:5,monthWeek:2,weekday:7}},{name:"Father's Day",recurrence:{month:6,monthWeek:3,weekday:7}},{name:"Canada Day",recurrence:{day:1,month:7}},{name:"Civic Holiday",recurrence:{month:8,monthWeek:1,weekday:1}},{name:"Labour Day",recurrence:{month:9,monthWeek:1,weekday:1}},{name:"National Day for Truth and Reconciliation",recurrence:{day:30,month:9}},{name:"Thanksgiving",recurrence:{month:10,monthWeek:2,weekday:1}},{name:"Halloween",recurrence:{day:31,month:10}},{name:"Remembrance Day",recurrence:{day:11,month:11}},{name:"Christmas Eve",recurrence:{day:24,month:12}},{name:"Christmas Day",recurrence:{day:25,month:12}},{name:"Boxing Day",recurrence:{day:26,month:12}}],hm=[{date:"2023-04-07",name:"Good Friday"},{date:"2023-04-09",name:"Easter Sunday"},{date:"2023-05-22",name:"Victoria Day"}],pm=[{name:"New Year's Day",recurrence:{day:1,month:1}},{name:"St Patrick's Day",recurrence:{day:17,month:3}},{name:"Christmas Eve",recurrence:{day:24,month:12}},{name:"Christmas Day",recurrence:{day:25,month:12}},{name:"Boxing Day",recurrence:{day:26,month:12}}],mm=[{date:"2022-01-02",name:"New Year's Day (substitute day)"},{date:"2023-04-07",name:"Good Friday"},{date:"2023-04-10",name:"Easter Monday"},{date:"2023-05-01",name:"Early May Bank Holiday"},{date:"2023-05-08",name:"Bank Holiday for the Coronation of King Charles III"},{date:"2023-05-29",name:"Spring Bank Holiday"},{date:"2023-08-28",name:"Summer Bank Holiday"}];class gm extends we{constructor(){super("/api/v1/calendar/events","dateStart",!1,D.CalendarEvent)}alertAction(e,r,n){let a="";switch(e){case M.Create:a=l.translate(XA);break;case M.Delete:a=l.translate(JA);break;case M.Update:a=l.translate(ZA);break}b.setLayoutAppAlert({actions:n,message:a},r)}findDateRange(e,r){return this.data.map(n=>{const a=[...n.filter(i=>i.calendarICalendarID===null||!l.data().hideCalendarICalendars.includes(i.calendarICalendarID))];if(l.data().preferences.showCalendarEventAstronomy){let i=[];(e.year===2022||r.year===2022)&&(i=cm),(e.year===2023||r.year===2023)&&(i=dm);for(const o of i){const s=G.fromString(`${o.date}T${o.time===void 0?"00:00":o.time}:00Z`).toString();a.findIndex(h=>h.name===o.name&&G.fromString(h.timestampStart).toString()===s)===-1&&a.push({...this.new(),authAccountID:l.data().id,details:o.details===void 0?"":o.details,duration:0,icon:Ke.CalendarAstronomy,name:o.name,timeStart:"00:00",timestampEnd:s,timestampStart:s})}}if(l.data().preferences.showCalendarEventHolidaysCA){const i=G.fromCivilDate(e);i.addDays(-20);let o=fm;(e.year===2023||r.year===2023)&&(o=o.concat(hm));const s=i.toString();for(const c of o)a.findIndex(v=>v.name===c.name)>=0||a.push({...this.new(),authAccountID:l.data().id,duration:0,icon:Ke.CalendarHoliday,name:c.name,recurrence:c.recurrence===void 0?null:{...at.new(),...c.recurrence,separation:1},timeStart:"00:00",timestampEnd:s,timestampStart:s})}if(l.data().preferences.showCalendarEventHolidaysUK){const i=G.fromCivilDate(e);i.addDays(-20);let o=pm;(e.year===2023||r.year===2023)&&(o=o.concat(mm));const s=i.toString();for(const c of o)a.findIndex(v=>v.name===c.name)>=0||a.push({...this.new(),authAccountID:l.data().id,duration:0,icon:Ke.CalendarHoliday,name:c.name,recurrence:c.recurrence===void 0?null:{...at.new(),...c.recurrence,separation:1},timeStart:"00:00",timestampEnd:s,timestampStart:s})}if(l.data().preferences.showCalendarEventHolidaysUS){const i=G.fromCivilDate(e);i.addDays(-20);const o=i.toString();for(const s of Am)a.findIndex(h=>h.name===s.name)>=0||a.push({...this.new(),authAccountID:l.data().id,details:s.details===void 0?"":s.details,duration:0,icon:Ke.CalendarHoliday,name:s.name,recurrence:{...at.new(),...s.recurrence,separation:1},timeStart:"00:00",timestampEnd:o,timestampStart:o})}return this.toCalendarEventsRange(a,e,r)})}toCalendarEventsRange(e,r,n){const a={};for(const i of e){const o=G.fromString(i.timestampStart),s=G.fromString(i.timestampEnd);let c=o.getDiffDays(s);if(i.recurrence===null){if(o.toCivilDate().valueOf()<=n.valueOf()&&s.toCivilDate().valueOf()>=r.valueOf())for(let h=0;h<=c;h++){const v=G.fromString(o.toString());v.addDays(h);const y=v.toCivilDate();if(y.valueOf()<r.valueOf()||y.valueOf()>n.valueOf())continue;const E=y.toJSON();a[E]===void 0&&(a[E]=[]),a[E].push(i)}}else{c=o.getDiffDays(s);for(let h=0;h<=c;h++){o.addDays(h);const v=at.findCivilDates(i.recurrence,o,r,n,i.skipDays,i.dateEnd);o.addDays(-1*h);for(const y of v){let E=ve.fromString(y);if(h>0){const P=G.fromCivilDate(ve.fromString(y));P.addDays(-1*h),E=P.toCivilDate()}if(a[y]===void 0&&(a[y]=[]),!a[y].includes(i)){const P=G.fromString(i.timestampStart);P.setDate(E);const g=G.fromString(P.toString());g.addMinutes(i.travelTime+i.duration),a[y].push({...i,timestampEnd:g.toString(),timestampStart:P.toString()})}}}}}return a}new(){const e=Ge.isPermitted(de.data().permissionsHouseholds,oe.Calendar,it.Edit,l.data().primaryAuthHouseholdID);return{authAccountID:e?null:l.data().id,authHouseholdID:e?l.data().primaryAuthHouseholdID:null,calendarICalendarID:null,color:Z.Default,created:null,dateEnd:null,dateStart:"",details:"",duration:60,id:null,location:"",name:"",notifyOffset:10,participants:[],recurrence:null,skipDays:[],timeStart:"",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,timestampEnd:null,timestampStart:null,travelTime:0,updated:null}}}const Qe=new gm;class ym extends we{constructor(){super("/api/v1/plan/tasks","name",!1,D.PlanTask),this.undoComplete=[],this.dueDatePast=this.nested.map(e=>{const r=ve.now(),n=[],a=function(o){for(let s=0;s<o.length;s++)!o[s].template&&o[s].dueDate!==null&&G.fromString(o[s].dueDate).toCivilDate()<r&&n.push(o[s]),!o[s].template&&o[s].children!==void 0&&o[s].children.length>0&&a(o[s].children)};a(e);const i=G.midnight().toCivilTime().toString(!0);return Le(n,{formatter:o=>o.dueDate!==null&&G.fromString(o.dueDate).toCivilTime().toString(!0)!==i?`${o.dueDate}`:"9999",property:"dueDate"}),n}),this.household=this.nested.map(e=>e.filter(r=>r.authHouseholdID!==null&&r.planProjectID===null&&!r.template)),this.personal=this.nested.map(e=>e.filter(r=>r.authHouseholdID===null&&r.authAccountID===l.data().id&&r.planProjectID===null&&!r.template)),this.templates=this.nested.map(e=>e.filter(r=>r.template))}alertAction(e,r,n){let a="";switch(e){case M.Create:a=l.translate(qf);break;case M.Delete:a=l.translate(eh);break;case M.Update:a=l.translate(rh);break}b.setLayoutAppAlert({actions:n,message:a},r)}async create(e,r){let n=0;return e.shortID!==""&&e.dueDate!==null&&(n=G.fromString(e.dueDate).getDiffDays(G.fromString(`${Ze.findShortID(e.shortID).dueDate}`))),super.create({...e,children:void 0,id:null,shortID:""},r).then(async a=>{if(W(a))return a;if(e.children!==void 0)for(const i of e.children){if(a.authHouseholdID===null?(i.authAccountID=a.authAccountID,i.authHouseholdID=null):(i.authAccountID=null,i.authHouseholdID=a.authHouseholdID),e.dueDate!==null&&n!==0){const o=G.fromString(`${i.dueDate}`);o.addDays(n),i.dueDate=o.toString()}i.parentID=a.id,i.planProjectID=a.planProjectID,await this.create(i,!0)}return a})}findAdjacent(e){return this.data().filter(r=>e.parentID!==null?r.parentID===e.parentID:e.planProjectID!==null?r.parentID===null&&r.planProjectID===e.planProjectID:e.authHouseholdID!==null?r.parentID===null&&r.planProjectID===null&&r.authHouseholdID!==null:r.parentID===null&&r.planProjectID===null&&r.authHouseholdID===null)}findDueDate(e,r){return this.findDueDateTasks(e,r===void 0?this.nested():r)}findDueDateTasks(e,r){var i;let n=[];for(const o of r)o.dueDate!==null&&((i=G.fromString(o.dueDate))==null?void 0:i.toCivilDate().toJSON())===e&&(o.authAccountID===null||o.authAccountID===l.data().id)?n.push(o):o.children!==void 0&&o.children.length>0&&(n=n.concat(this.findDueDateTasks(e,o.children)));Le(n,{invert:!0,property:"priority"});const a=G.midnight();return Le(n,{formatter:o=>{var s;return o.dueDate!==null&&((s=G.fromString(o.dueDate))==null?void 0:s.timestamp)!==a.timestamp?`${o.dueDate}`:"9999"},property:"dueDate"}),n}findInventoryItemID(e,r){return r===void 0&&(r=this.data()),e===null?[]:r.filter(n=>n.inventoryItemID===e)}findParentIDProjectID(e){let r=this.findID(e);for(;r.parentID!==null;)r=this.findID(r.parentID);return r.planProjectID}findPlanProjectID(e,r){return e===null?[]:(r===void 0&&(r=this.nested()),r.filter(n=>n.planProjectID===e))}findTag(e,r){r===void 0&&(r=this.data());const n=r.filter(a=>a.tags!==null?a.tags.includes(e):!1);return Le(n,{property:"dueDate"}),n}findTemplates(e){return this.templates().filter(r=>{switch(e){case 0:return r.authAccountID===l.data().id&&r.authHouseholdID===null;case 1:return r.authAccountID===null&&r.authHouseholdID===null;case 2:return r.authHouseholdID!==null;default:return!1}})}getChildrenDone(e){if(e.children===void 0||e.children.length===0)return 0;let r=0,n=0;for(const a of e.children)a.done?r+=1:this.getChildrenDone(a)>0&&(n+=1);return r===e.children.length?2:r>0||n>0?1:0}getCountHousehold(e){return e===void 0&&(e=this.data()),e.filter(r=>r.authHouseholdID!==null).length}getCountPersonal(e){return e===void 0&&(e=this.data()),e.filter(r=>r.authHouseholdID===null).length}getCountToday(e){return e===void 0&&(e=this.data()),e.filter(n=>n.dueDate!==null?G.fromString(n.dueDate).toCivilDate()<=ve.now()&&!n.done&&(n.authAccountID===null||n.authAccountID===l.data().id)&&!n.template:!1).length}getCountUpcoming(e){return e===void 0&&(e=this.data()),e.filter(n=>{if(n.dueDate!==null){const a=G.fromString(n.dueDate).toCivilDate().toJSON(),i=G.now(),o=G.fromString(i.toString());return o.timestamp.setDate(o.timestamp.getDate()+6),i.toCivilDate().toJSON()<a&&o.toCivilDate().toJSON()>=a&&!n.done&&(n.authAccountID===null||n.authAccountID===l.data().id)&&!n.template}return!1}).length}getDuration(e){return e===void 0||e.length===0?0:e.filter(r=>!r.done).reduce((r,n)=>r+n.duration+this.getDuration(n.children),0)}getTaggable(){return this.data().filter(e=>!e.done)}new(){const e=G.midnight();e.timestamp.setDate(e.timestamp.getDate()+1);const r=Ge.isPermitted(de.data().permissionsHouseholds,oe.Plan,it.Edit,l.data().primaryAuthHouseholdID);return{assignees:[],authAccountID:r?null:l.data().id,authHouseholdID:r?l.data().primaryAuthHouseholdID:null,color:0,created:null,dateEnd:null,details:"",done:!1,dueDate:null,duration:0,id:null,inventoryItemID:null,lastDoneBy:null,lastDoneDate:null,name:"",notify:!1,parentID:null,planProjectID:null,position:"0",recurOnDone:!1,recurrence:null,shortID:"",tags:[],template:!1,updated:null}}findDateRange(e,r){return this.data.map(n=>{const a=[];for(const i of n)if(!i.done&&i.dueDate!==null){const o=G.fromString(i.dueDate);a.push({...Qe.new(),authAccountID:i.authAccountID,authHouseholdID:i.authHouseholdID,color:Qn.planTask($e.findID(i.authHouseholdID).preferences.colorPlanTaskEvents,i.color),details:i.planProjectID===null?i.authHouseholdID===null?`[icon@${Ke.PlanProject} Personal](/tasks?filter=personal)`:`[icon@${Ke.PlanProject} Household](/tasks?filter=household)`:`#planproject/${Bt.findID(i.planProjectID).shortID}${i.authHouseholdID===null?"?p":""}`,duration:o.toCivilTime().toString(!0)==="00:00"?0:i.duration===0||i.duration===void 0?30:i.duration,icon:"done_all",name:i.name,participants:i.authHouseholdID!==null&&i.authAccountID!==null?[i.authAccountID]:[],planTask:i,recurrence:i.recurrence,timeStart:o.toCivilTime().toString(!0),timestampEnd:o.toString(),timestampStart:o.toString()})}return Qe.toCalendarEventsRange(a,e,r)})}async update(e,r){const n=this.findID(e.id);if(n.dueDate!==null&&e.dueDate!==null&&n.dueDate!==e.dueDate&&e.children!==void 0&&e.children.length>0){const a=G.fromString(n.dueDate),i=G.fromString(e.dueDate),o=a.getDiffDays(i);for(const s of e.children)if(s.dueDate!==null){const c=G.fromString(s.dueDate);c.addDays(o),s.dueDate=c.toJSON(),await this.update(s,!0)}}return delete e.children,super.update(e,r)}async updateDone(e,r){r===void 0&&(this.undoComplete=[]),this.undoComplete.push(ge(e));const n=ge(e);if(n.recurrence===null&&r!==void 0)n.done=r,r&&(n.lastDoneBy=l.data().id,n.lastDoneDate=ve.now().toJSON());else if(n.recurrence===null||n.recurrence.separation===0)n.done=!n.done,n.done&&(n.lastDoneBy=l.data().id,n.lastDoneDate=ve.now().toJSON());else if(n.dueDate!==null){if(n.lastDoneBy=l.data().id,n.lastDoneDate=ve.now().toJSON(),n.assignees.length>0){const s=n.assignees.indexOf(`${n.authAccountID}`);s<0||s===n.assignees.length-1?n.authAccountID=n.assignees[0]:n.authAccountID=n.assignees[s+1]}let a=G.fromString(n.dueDate);const i=G.now();n.recurOnDone&&a.toCivilDate()<i.toCivilDate()?(a.timestamp.setFullYear(i.timestamp.getFullYear()),a.timestamp.setDate(1),a.timestamp.setMonth(i.timestamp.getMonth()),a.timestamp.setDate(i.timestamp.getDate())):a=at.nextTimestamp(n.recurrence,a);const o=i;for(o.timestamp.setDate(o.timestamp.getDate()+1);a.toCivilDate().valueOf()<o.toCivilDate().valueOf();)a=at.nextTimestamp(n.recurrence,a);n.dateEnd!==void 0&&n.dateEnd!==null&&ve.fromString(n.dateEnd)<a.toCivilDate()?n.done=!0:(n.done=!1,n.dueDate=a.toString())}if(n.children!==void 0&&n.children.length>0)for(const a of n.children)await this.updateDone(a,n.done);return delete n.children,this.update(n,!0).then(a=>{if(W(a))return a;r===void 0&&(n.recurrence!==null&&n.recurrence.separation!==0&&n.dueDate!==null?b.setLayoutAppAlert({actions:[{name:l.translate(co),onclick:async()=>{for(const i of this.undoComplete)await this.update(i,!0)}}],message:`${l.translate(th)} ${b.formatCivilDate(G.fromString(n.dueDate).toCivilDate())}`}):b.setLayoutAppAlert({actions:[{name:l.translate(co),onclick:async()=>{for(const i of this.undoComplete)await this.update(i,!0)}}],message:l.translate(Zf)}))})}}const Ze=new ym;class vm extends we{constructor(){super("/api/v1/plan/projects","name",!1,D.PlanProject),this.allTags=ze.lift((e,r)=>{const n=[...r];for(const a of e){const i=r.findIndex(o=>o.name===a.name);i===-1?n.push(a):n[i].count+=a.count}return Le(n,{property:"name"}),n},this.tags,Ze.tags),this.allTagNames=this.allTags.map(e=>e.map(r=>r.name)),this.household=this.nested.map(e=>e.filter(r=>r.authHouseholdID!==null)),this.personal=this.nested.map(e=>e.filter(r=>r.authAccountID===l.data().id))}alertAction(e,r,n){let a="";switch(e){case M.Create:a=l.translate(Mf);break;case M.Delete:a=l.translate(Lf);break;case M.Update:a=l.translate(Bf);break}b.setLayoutAppAlert({actions:n,message:a},r)}async create(e,r){return super.create({...e,children:void 0,id:null,shortID:""},r).then(async n=>{if(W(n))return n;if(e.shortID!=="")for(const a of Ze.findPlanProjectID(Bt.findShortID(e.shortID).id)){const i=ge(a);i.authAccountID=n.authAccountID,i.authHouseholdID=n.authHouseholdID,i.planProjectID=n.id,await Ze.create(i,!0)}return n})}findAdjacent(e){return this.data().filter(r=>e.parentID!==null?e.parentID===r.parentID:e.authHouseholdID!==null?r.parentID===null&&r.authHouseholdID!==null:r.parentID===null&&r.authHouseholdID===null)}findChildren(e,r){r===void 0&&(r=this.data());const n=Ar({input:r,rootID:e});return n.length>0&&n[0].children!==void 0?n[0].children:[]}findCountChildren(e){let r=0;if(e.children===void 0)return r;for(const n of e.children)r+=n.planTaskCount+n.shopItemCount,r+=this.findCountChildren(n);return r}findCount(e){let r=e.planTaskCount+e.shopItemCount;return l.data().collapsedPlanProjects.includes(e.id)&&(r+=this.findCountChildren(e)),r}findNamesBudgetCategoryID(e){const r=[];if(e===null)return r;for(const n of this.data())n.budgetCategoryID===e&&r.push(n);return r}findNamesChildren(e,r){let n=[];if(r!==void 0)for(const a of r)n.push({color:a.color,icon:a.icon===""?Ke.PlanProject:a.icon,id:a.id,level:e,name:a.name}),Array.isArray(a.children)&&a.children.length!==0&&(n=n.concat(this.findNamesChildren(e+1,a.children)));return n}findTag(e,r){r===void 0&&(r=this.data());const n=r.filter(a=>a.tags!==null?a.tags.includes(e):!1);return Le(n,{property:"name"}),n}getColorNamesIDs(){let e=[];return e.push({id:"personal",level:0,name:l.translate(Es)}),e=e.concat(this.findNamesChildren(1,Ar({input:this.data().filter(r=>r.authAccountID===l.data().id)}))),Ge.isPermitted(de.data().permissionsHouseholds,oe.Plan,it.Edit)&&(e.push({id:"household",level:0,name:l.translate(Ss)}),e=e.concat(this.findNamesChildren(1,Ar({input:this.data().filter(r=>r.authHouseholdID!==null)})))),e}new(){const e=Ge.isPermitted(de.data().permissionsHouseholds,oe.Plan,it.Edit,l.data().primaryAuthHouseholdID);return{authAccountID:e?null:l.data().id,authHouseholdID:e?l.data().primaryAuthHouseholdID:null,budgetCategoryID:null,color:Z.Default,created:null,icon:"",id:null,name:"",parentID:null,planTaskCount:0,position:"",shopItemCount:0,shortID:"",tags:[],updated:null}}}const Bt=new vm;class _m extends we{constructor(){super("/api/v1/reward/cards","name",!1,D.RewardCard)}alertAction(e,r,n){let a="";switch(e){case M.Create:a=l.translate(xA);break;case M.Delete:a=l.translate(jA);break;case M.Update:a=l.translate(HA);break}b.setLayoutAppAlert({actions:n,message:a},r)}findSent(e,r){return e.filter(n=>n.senders.includes(`${l.data().id}`)&&(r===void 0||r!==void 0&&n.recipients.includes(`${$e.findMember(`${r}`).id}`)))}getInProgress(e){return e===void 0&&(e=this.data()),e.filter(r=>(!r.senders.includes(`${l.data().id}`)||r.recipients.length===0)&&!r.invert&&r.stampCount<r.stampGoal)}getRedeemable(e){return e===void 0&&(e=this.data()),e.filter(r=>!r.senders.includes(`${l.data().id}`)&&(r.invert&&r.stampCount<r.stampGoal||!r.invert&&r.stampCount===r.stampGoal))}new(){return{authHouseholdID:l.data().primaryAuthHouseholdID,created:null,details:"",id:null,invert:!1,name:"",recipients:[],reward:"",senders:[`${l.data().id}`],shortID:"",stampCount:0,stampGoal:0,updated:null}}async onSSE(e){if(!e.id.startsWith("00000"))return super.onSSE(e)}async punch(e){if(e.senders.includes(`${l.data().id}`)&&(e.stampCount++,!(e.stampCount>e.stampGoal)))return this.update(e)}}const Yr=new _m;class bm extends we{constructor(){super("/api/v1/secrets/vaults","name",!1,D.SecretsVault),this.keys=ze({}),ze.lift(async(e,r)=>{if(e===""){this.keys({});return}const n=ge(this.keys());let a=!1;for(let i=0;i<r.length;i++){const o=this.findKeyIndex(r[i].keys);if(o<0||this.keys()[r[i].id]!==void 0)continue;const s=zr(r[i].keys[o].key);if(!W(s)){const c=await s.decrypt(e);W(c)||(n[r[i].id]=c,a=!0)}}a&&this.keys(n)},l.privateKey,this.data)}alertAction(e,r,n){let a="";switch(e){case M.Create:a=l.translate(dh);break;case M.Delete:a=l.translate(Ah);break;case M.Update:a=l.translate(fh);break}b.setLayoutAppAlert({actions:n,message:a},r)}async deleteKey(e,r){const n=ge(e.keys),a=this.findKeyIndex(e.keys,r);if(a>=0)return n.splice(a,1),this.update({...e,keys:n})}findKeyIndex(e,r){return e.findIndex(n=>n.authAccountID===(r===void 0?l.data().id:r))}getIcon(e){return e.icon===""?Ke.SecretsVault:e.icon}new(){const e=Ge.isPermitted(de.data().permissionsHouseholds,oe.Shop,it.Edit,l.data().primaryAuthHouseholdID);return{authAccountID:e?null:l.data().id,authHouseholdID:e?l.data().primaryAuthHouseholdID:null,created:null,icon:"",id:null,keys:[],name:"",shortID:"",updated:null}}async setKey(e,r){const n=$e.findMember(r);if(Et.keys()[e.id]===void 0||n.publicKey==="")return;const a=ge(e.keys),i=this.findKeyIndex(e.keys,r),o=await Gr(ln,n.publicKey,this.keys()[e.id]);return W(o)?o:(i<0?a.push({authAccountID:r,key:o.string()}):a[i].key!==o.string()&&(a[i].key=o.string()),this.update({...e,keys:a}))}}const Et=new bm;class Sm extends we{constructor(){super("/api/v1/secrets/values","name",!1,D.SecretsValue),this.defaultProperties=l.data.map(()=>[l.translate(xp),l.translate(Cp),"TOTP","URL"]),this.values=ze({}),this.properties=this.values.map(e=>{const r=new Set;for(let a=0;a<this.defaultProperties().length;a++)r.add(this.defaultProperties()[a]);for(const a of Object.keys(e))if(e[a].data.length>0)for(const i of Object.keys(e[a].data[0]))r.add(i);return Array.from(r).filter(a=>a!=="updated")}),this.names=this.values.map(e=>{const r=Object.keys(e).map(n=>e[n].name);return Le(r),r}),this.tags=this.values.map(e=>Cs(Object.values(e))),this.tagNames=this.tags.map(e=>e.map(r=>r.name)),ze.lift(async(e,r)=>{const n={};let a=!1;for(let i=0;i<e.length;i++){const o=r[e[i].secretsVaultID],s=this.getValue(e[i].id);if(o===void 0)continue;if(s.updated===e[i].updated){n[e[i].id]=s;continue}const c=[];let h;for(let E=0;E<e[i].dataEncrypted.length;E++)if(h=zr(e[i].dataEncrypted[E]),!W(h)){const P=await h.decrypt(o);W(P)||c.push(JSON.parse(P))}let v="";if(h=zr(e[i].nameEncrypted),!W(h)){const E=await h.decrypt(o);W(E)||(v=E)}let y="";if(e[i].tagsEncrypted!==""&&(h=zr(e[i].tagsEncrypted),!W(h))){const E=await h.decrypt(o);W(E)||(y=E)}n[e[i].id]={authHouseholdID:Et.findID(e[i].secretsVaultID).authHouseholdID,data:c===void 0?[]:c,name:v,secretsVaultID:e[i].secretsVaultID,tags:y===""?[]:JSON.parse(y),updated:e[i].updated},a=!0}(a||Object.keys(n).length!==Object.keys(e).length)&&this.values(n)},this.data,Et.keys)}alertAction(e,r,n){let a="";switch(e){case M.Create:a=l.translate(sh);break;case M.Delete:a=l.translate(lh);break;case M.Update:a=l.translate(uh);break}b.setLayoutAppAlert({actions:n,message:a},r)}async encryptValue(e){const r=Et.keys()[e.secretsVaultID],n=await Gr(jt,r,JSON.stringify(e.data[0])),a=await Gr(jt,r,e.name),i=await Gr(jt,r,JSON.stringify(e.tags));return W(n)?(b.setLayoutAppAlert(n),n):W(a)?(b.setLayoutAppAlert(a),a):W(i)?(b.setLayoutAppAlert(i),i):{...mr.new(),dataEncrypted:[n.string(),...e.dataEncrypted.slice(0,4)],id:e.id,nameEncrypted:a.string(),secretsVaultID:e.secretsVaultID,tagsEncrypted:i.string()}}findName(e,r){const n=this.data().findIndex(a=>this.values()[`${a.id}`]!==void 0&&this.values()[`${a.id}`].name===e);return n>=0&&this.data().length>0?ge(this.data()[n]):this.new()}getValue(e){return e===null||this.values()[e]===void 0?{authHouseholdID:null,data:[],name:"",secretsVaultID:null,tags:[],updated:null}:this.values()[e]}new(){return{dataEncrypted:[],deleted:null,id:null,nameEncrypted:"",secretsVaultID:null,shortID:"",tagsEncrypted:"",updated:null}}newDecrypted(){return{authHouseholdID:null,data:[],dataEncrypted:[],deleted:null,id:null,name:"",nameEncrypted:"",secretsVaultID:null,shortID:"",tags:[],tagsEncrypted:"",updated:null}}}const mr=new Sm;class Em extends we{constructor(){super("/api/v1/shop/lists","name",!1,D.ShopList)}alertAction(e,r,n){let a="";switch(e){case M.Create:a=l.translate(af);break;case M.Delete:a=l.translate(of);break;case M.Update:a=l.translate(sf);break}b.setLayoutAppAlert({actions:n,message:a},r)}new(){const e=Ge.isPermitted(de.data().permissionsHouseholds,oe.Shop,it.Edit,l.data().primaryAuthHouseholdID);return{authAccountID:e?null:l.data().id,authHouseholdID:e?l.data().primaryAuthHouseholdID:null,budgetCategoryID:null,created:null,icon:"",id:null,name:"",shopItemCount:0,shortID:"",updated:null}}}const Qr=new Em;let Ha=l.data().iso639Code,ai={budgetTransactionAccountStatuses:[],calendarEventReminderTimes:[],colorValues:[],components:[],monthValues:[],permissionTypes:[],permissions:[],subscriptionProcessors:[]};l.data.map(t=>{Ha===t.iso639Code&&ai.colorValues.length>0||(Ha=t.iso639Code,Be.code=Ha,ai={budgetTransactionAccountStatuses:[l.translate(Mp),l.translate(Lp),l.translate(Bp)],calendarEventReminderTimes:[{name:l.translate(Ip),offset:null},{name:l.translate(Ph),offset:10},{name:l.translate(Mh),offset:30},{name:l.translate(Nh),offset:60},{name:l.translate(kh),offset:60*12},{name:l.translate(cp),offset:0}],colorValues:ct.values.map((e,r)=>{let n="";switch(r){case Z.Black:n=l.translate(Jh);break;case Z.Blue:n=l.translate(Zh);break;case Z.Brown:n=l.translate(qh);break;case Z.Default:n=l.translate(dp);break;case Z.Gray:n=l.translate(ep);break;case Z.Green:n=l.translate(tp);break;case Z.Indigo:n=l.translate(rp);break;case Z.Orange:n=l.translate(np);break;case Z.Pink:n=l.translate(ap);break;case Z.Purple:n=l.translate(ip);break;case Z.Red:n=l.translate(op);break;case Z.Teal:n=l.translate(sp);break;case Z.White:n=l.translate(lp);break;case Z.Yellow:n=l.translate(up);break}return{color:r,id:`${r}`,key:r,name:n}}),components:[{id:"bookmarks",name:l.translate(ys)},{id:"budget",name:l.translate(At)},{id:"calendar",name:l.translate(Hn)},{id:"cook",name:l.translate(Rt)},{id:"health",name:l.translate(ir)},{id:"inventory",name:l.translate(or)},{id:"notes",name:l.translate(ti)},{id:"plan",name:l.translate(sr)},{id:"reward",name:l.translate(Un)},{id:"secrets",name:l.translate(Vn)},{id:"shop",name:l.translate(Pt)}],monthValues:Ln.values.map((e,r)=>{let n="";switch(r){case tt.January:n=l.translate(gp);break;case tt.February:n=l.translate(mp);break;case tt.March:n=l.translate(_p);break;case tt.April:n=l.translate(fp);break;case tt.May:n=l.translate(bp);break;case tt.June:n=l.translate(vp);break;case tt.July:n=l.translate(yp);break;case tt.August:n=l.translate(hp);break;case tt.September:n=l.translate(wp);break;case tt.October:n=l.translate(Ep);break;case tt.November:n=l.translate(Sp);break;case tt.December:n=l.translate(pp);break}return n}),permissionTypes:[l.translate($h),l.translate(Xh),l.translate(Yh)],permissions:[{component:oe.Budget,name:l.translate(At),tooltip:l.translate(Lh)},{component:oe.Calendar,name:l.translate(Hn),personal:!0,tooltip:l.translate(Bh)},{component:oe.Cook,name:l.translate(Rt),tooltip:l.translate(xh)},{component:oe.Health,name:l.translate(ir),personal:!0,tooltip:l.translate(jh)},{component:oe.Inventory,name:l.translate(or),tooltip:l.translate(Hh)},{component:oe.Notes,name:l.translate(ti),personal:!0,tooltip:l.translate(Uh)},{component:oe.Plan,name:l.translate(sr),personal:!0,tooltip:l.translate(Vh)},{component:oe.Reward,name:l.translate(Un),tooltip:l.translate(zh)},{component:oe.Auth,name:l.translate(Tp),personal:!0,tooltip:l.translate(Fh)},{component:oe.Secrets,name:l.translate(Vn),personal:!0,tooltip:l.translate(Gh)},{component:oe.Shop,name:l.translate(Pt),personal:!0,tooltip:l.translate(Wh)}],subscriptionProcessors:[l.translate(Dp),l.translate(Np),l.translate(Rp),l.translate(Pp),l.translate(kp),l.translate(Op)]},typeof window<"u"&&X.redraw())});const go={beginCheckout:()=>{},login:t=>{t===ar.Google||ar.Apple},purchase:t=>{ai.subscriptionProcessors[t]},signUp:t=>{t===ar.Google||ar.Apple}},Te={contains:t=>t!==null,create:async t=>Y.create("/api/v1/budget/transactions",t).then(e=>{if(W(e))return b.setLayoutAppAlert(e),e;b.setLayoutAppAlert({message:l.translate(ah)})}),data:ze([]),delete:async t=>Y.delete(`/api/v1/budget/transactions/${t}`).then(()=>{b.setLayoutAppAlert({message:l.translate(ih)})}),inResponse(t){return t.dataType==="BudgetTransactions"},is:t=>t!==null,isAccount:t=>t!==null,isCategory:t=>t!==null,lastDate:ve.now().toJSON(),load:async()=>Oe.get("BudgetTransactions").then(async t=>Te.is(t)?ge(t):[]),loaded:!1,loadedLast:"",new:()=>({accounts:[],amount:0,authHouseholdID:l.data().primaryAuthHouseholdID,balance:0,budgetPayeeID:null,budgetPayeeName:"",categories:[],created:null,date:null,id:null,keep:!1,note:""}),newAccount:()=>({amount:0,budgetAccountID:null,budgetTransactionID:null,id:null,status:0}),newCategory:()=>({amount:0,budgetCategoryID:null,budgetTransactionID:null,id:null,yearMonth:0}),offset:0,read:async t=>{t!==!0&&(Te.loaded=!1);let e;return X.route.param().account!==void 0?e=await Te.readAccount(X.route.param().account):X.route.param().category!==void 0?X.route.param().month===void 0?e=await Te.readCategory(X.route.param().category):e=await Te.readCategoryMonth(X.route.param().category,parseInt(X.route.param().month,10)):X.route.param().payee!==void 0&&(e=await Te.readPayee(X.route.param().payee)),Te.loaded=!0,e},readAccount:async t=>Y.read(`/api/v1/budget/accounts/${t}/transactions`,{offset:Te.offset}).then(e=>{if(W(e))return e;if(Te.inResponse(e)){Te.data(e.dataValue),Te.total=e.dataTotal,X.redraw();return}return Je}),readCategory:async t=>Y.read(`/api/v1/budget/categories/${t}/transactions`,{offset:Te.offset}).then(e=>{if(W(e))return e;if(Te.inResponse(e)){Te.data(e.dataValue),Te.total=e.dataTotal,X.redraw();return}return Je}),readCategoryMonth:async(t,e)=>Y.read(`/api/v1/budget/categories/${t}/transactions/${e}`,{offset:Te.offset}).then(r=>{if(W(r))return r;if(Te.inResponse(r)){Te.data(r.dataValue),Te.total=r.dataTotal,X.redraw();return}return Je}),readPayee:async t=>Y.read(`/api/v1/budget/payees/${t}/transactions`,{offset:Te.offset}).then(e=>{if(W(e))return e;if(Te.inResponse(e)){Te.data(e.dataValue),Te.total=e.dataTotal;return}return Je}),set:async t=>Oe.set("BudgetTransactions",t),total:0,update:async t=>Y.update(`/api/v1/budget/transactions/${t.id}`,t).then(e=>{if(W(e))return b.setLayoutAppAlert(e),e;b.setLayoutAppAlert({message:l.translate(oh)})})};class wm extends we{constructor(){super("/api/v1/budget/recurrences","budgetAccountID",!1,D.BudgetRecurrence)}alertAction(e,r,n){let a="";switch(e){case M.Create:a=l.translate(Ff);break;case M.Delete:a=l.translate(Wf);break;case M.Update:a=l.translate($f);break}b.setLayoutAppAlert({actions:n,message:a},r)}findBudgetAccountID(e,r){return e.filter(n=>n.budgetAccountID===r)}findBudgetAccountIDToday(e){const r=this.findBudgetAccountID(this.data(),e),n=G.now();return r.filter(a=>ve.fromString(`${a.template.date}`)<=n.toCivilDate()).length}findDateRange(e,r){return this.data.map(n=>{const a=[];for(const i of n)if(i.template.date!==null){const o=ve.fromString(i.template.date),s=at.findCivilDates(i.recurrence,G.fromCivilDate(o),e,r,[],null);s.length>0&&a.push({...Qe.new(),authHouseholdID:i.authHouseholdID,budgetRecurrence:i,civilDates:s,color:Qn.budgetRecurrrence($e.findID(i.authHouseholdID).preferences.colorBudgetRecurrenceEvents),details:`#budgetaccount/${fr.findID(i.budgetAccountID).shortID}`,duration:0,icon:Ke.BudgetTransaction,name:`${i.template.amount>0?"Deposit":"Pay"} ${hr.findID(i.template.budgetPayeeID).name}`,timeStart:"00:00",timestampEnd:G.fromCivilDate(o).toString(),timestampStart:G.fromCivilDate(o).toString()})}return Qe.toCalendarEventsRange(a,e,r)})}new(){return{authHouseholdID:l.data().primaryAuthHouseholdID,budgetAccountID:null,created:null,id:null,recurrence:at.new(),template:Te.new(),updated:null}}updateCategoryYearMonthRecurrence(e){if(e.template.date!==null){const r=ve.fromString(e.template.date).toYearMonth(),n=at.nextTimestamp(e.recurrence,G.fromCivilDate(ve.fromString(e.template.date))).toCivilDate().toYearMonth();if(r!==n&&e.template.categories!==null)for(let a=0;a<e.template.categories.length;a++)e.template.categories[a].yearMonth=n.toNumber()}}}const Xr=new wm;class Im extends we{constructor(){super("/api/v1/calendar/icalendars","name",!1,D.CalendarICalendar)}alertAction(e,r,n){let a="";switch(e){case M.Create:a=l.translate(yh);break;case M.Delete:a=l.translate(vh);break;case M.Update:a=l.translate(_h);break}b.setLayoutAppAlert({actions:n,message:a},r)}new(){const e=Ge.isPermitted(de.data().permissionsHouseholds,oe.Calendar,it.Edit,l.data().primaryAuthHouseholdID);return{authAccountID:e?null:l.data().id,authHouseholdID:e?l.data().primaryAuthHouseholdID:null,created:null,ics:"",id:null,name:"",updated:null,url:""}}}const Jr=new Im;class Cm extends we{constructor(){super("/api/v1/changes","updated",!0,D.Change),this.table=this.data.map(e=>{const r=[];for(let n=0;n<e.length;n++){const a=[e[n].name];let i=n+1;for(;i<e.length&&e[n].authAccountID===e[i].authAccountID&&e[n].operation===e[i].operation&&e[n].tableName===e[i].tableName;)a.push(e[i].name),i++;let o="";switch(e[n].operation){case pt.Create:o+="added";break;case pt.Delete:o+="deleted";break;case pt.Update:o+="updated";break}switch(o+=a.length>1?` ${a.length} `:" a ",o+="[",e[n].tableName){case"bookmark":o+=a.length>1?l.translate(ys):"Bookmark",o+="](/bookmarks/household)";break;case"budget_account":o+=a.length>1?`${l.translate(At)} > ${l.translate(kA)}`:`${l.translate(At)} > ${l.translate(RA)}`,o+="](/budget/accounts)";break;case"budget_category":o+=a.length>1?`${l.translate(At)} > ${l.translate(ao)}`:`${l.translate(At)} > ${l.translate(io)}`,o+="](/budget/categories)";break;case"budget_payee":o+=a.length>1?`${l.translate(At)} > ${l.translate(kf)}`:`${l.translate(At)} > ${l.translate(Df)}`,o+="](/budget/payees)";break;case"budget_recurrence":o+=a.length>1?`${l.translate(At)} > ${l.translate(Kf)}`:`${l.translate(At)} > ${l.translate(Gf)}`,o+="](/budget/recurrences)";break;case"calendar_event":o+=a.length>1?`${l.translate(Hn)} > ${l.translate(qA)}`:`${l.translate(Hn)} > ${l.translate(QA)}`,o+="](/calendar)";break;case"cook_meal_plan":o+=a.length>1?`${l.translate(Rt)} > ${l.translate(yf)}`:`${l.translate(Rt)} > ${l.translate(hf)}`,o+="](/calendar)";break;case"cook_meal_time":o+=a.length>1?`${l.translate(Rt)} > ${l.translate(Ef)}`:`${l.translate(Rt)} > ${l.translate(vf)}`,o+="](/cook/meal-times)";break;case"cook_recipe":o+=a.length>1?`${l.translate(Rt)} > ${l.translate(zf)}`:`${l.translate(Rt)} > ${l.translate(jf)}`,o+="](/cook/recipes)";break;case"health_item":o+=a.length>1?`${l.translate(ir)} > ${l.translate(ka)}`:`${l.translate(ir)} > ${l.translate(Pa)}`,o+="](/health/items)";break;case"health_log":o+=a.length>1?`${l.translate(ir)} > ${l.translate(ff)}`:`${l.translate(ir)} > ${l.translate(uf)}`,o+="](/calendar)";break;case"inventory_collection":o+=a.length>1?`${l.translate(or)} > ${l.translate(YA)}`:`${l.translate(or)} > ${l.translate(FA)}`,o+="](/inventory)";break;case"inventory_item":o+=a.length>1?`${l.translate(or)} > ${l.translate(ka)}`:`${l.translate(or)} > ${l.translate(Pa)}`,o+="](/inventory/all)";break;case"notes_page":o+=a.length>1?l.translate(ti):l.translate(wf),o+="](/notes/household)";break;case"plan_project":o+=a.length>1?`${l.translate(sr)} > ${l.translate(xf)}`:`${l.translate(sr)} > ${l.translate(Nf)}`,o+="](/plan/tasks?filter=household)";break;case"plan_task":o+=a.length>1?`${l.translate(sr)} > ${l.translate(nh)}`:`${l.translate(sr)} > ${l.translate(Jf)}`,o+="](/plan/tasks?filter=household)";break;case"reward_card":o+=a.length>1?`${l.translate(Un)} > ${l.translate(UA)}`:`${l.translate(Un)} > ${l.translate(BA)}`,o+="](/reward/sent)";break;case"secrets_vault":o+=a.length>1?`${l.translate(Vn)} > ${l.translate(hh)}`:`${l.translate(Vn)} > ${l.translate(ch)}`,o+="](/secrets)";break;case"shop_category":o+=a.length>1?`${l.translate(Pt)} > ${l.translate(ao)}`:`${l.translate(Pt)} > ${l.translate(io)}`,o+="](/shop/categories)";break;case"shop_item":o+=a.length>1?`${l.translate(Pt)} > ${l.translate(ka)}`:`${l.translate(Pt)} > ${l.translate(Pa)}`,o+="](/shop/items)";break;case"shop_list":o+=a.length>1?`${l.translate(Pt)} > ${l.translate(lf)}`:`${l.translate(Pt)} > ${l.translate(nf)}`,o+="](/shop/lists)";break}if(r.push({authAccountID:e[n].authAccountID,change:o,id:e[n].id,names:a,updated:e[n].updated}),r.length===20)break;n=i-1}return r})}alertAction(e,r,n){let a="";switch(e){case M.Create:a=l.translate(VA);break;case M.Delete:a=l.translate(zA);break;case M.Update:a=l.translate(GA);break}b.setLayoutAppAlert({actions:n,message:a},r)}new(){return{authAccountID:null,authHouseholdID:null,created:null,id:null,name:"",operation:pt.Create,tableName:"",updated:null}}}const Zr=new Cm,Tm={new:()=>{let t="";for(let e=0;e<32;e++){const r=Math.random()*16|0;(e===8||e===12||e===16||e===20)&&(t+="-"),t+=(e===12?4:e===16?r&3|8:r).toString(16)}return t}};class Dm extends we{constructor(){super("/api/v1/cook/meal-times","name",!1,D.CookMealTime),this.names=this.data.map(e=>{const r=ge(e),n=[];Le(r,{property:"time"});for(const a of r)n.push(a.name);return n})}alertAction(e,r,n){let a="";switch(e){case M.Create:a=l.translate(_f);break;case M.Delete:a=l.translate(bf);break;case M.Update:a=l.translate(Sf);break}b.setLayoutAppAlert({actions:n,message:a},r)}new(){return{authHouseholdID:l.data().primaryAuthHouseholdID,created:null,id:null,name:"",time:null,updated:null}}}const gr=new Dm;class Om extends we{constructor(){super("/api/v1/shop/categories","name",!1,D.ShopCategory)}alertAction(e,r,n){let a="";switch(e){case M.Create:a=l.translate(vs);break;case M.Delete:a=l.translate(_s);break;case M.Update:a=l.translate(bs);break}b.setLayoutAppAlert({actions:n,message:a},r)}findMatch(e){let r=0,n=this.new();for(const a of this.data())if(a.match!==""){const o=new RegExp(`(${a.match})`,"i").exec(e);o!==null&&o[0].length>r&&(r=o[0].length,n=a)}return n}new(){return{authHouseholdID:l.data().primaryAuthHouseholdID,budgetPayeeID:null,created:null,id:null,match:"",name:"",updated:null}}}const yr=new Om;class Rm extends we{constructor(){super("/api/v1/shop/items","name",!1,D.ShopItem)}alertAction(e,r,n){let a="";switch(e){case M.Create:a=l.translate(_i);break;case M.Delete:a=l.translate(bi);break;case M.Update:a=l.translate(Si);break}b.setLayoutAppAlert({actions:n,message:a},r)}costItems(e){let r=0;for(let n=0;n<e.length;n++)r+=e[n].price;return r}countItems(e){return this.data().filter(r=>e!==void 0&&r.budgetPayeeID!==e?!1:!r.inCart&&r.shopListID===null&&(r.nextDate===null||ve.fromString(r.nextDate)<=ve.now())).length}findAdjacent(e){return this.data().filter(r=>r.shopListID===e.shopListID)}findPlanProjectID(e,r){return r===void 0&&(r=this.data()),e===null?[]:r.filter(n=>n.planProjectID===e)}getPickupItems(){const e=ve.now();return this.data().filter(r=>r.shopListID===null&&(r.nextDate===null||ve.fromString(r.nextDate).valueOf()<=e.valueOf()))}getStaples(){return this.data.map(e=>e.filter(r=>r.nextDate!==null))}new(){const e=Ge.isPermitted(de.data().permissionsHouseholds,oe.Shop,it.Edit,l.data().primaryAuthHouseholdID);return{authAccountID:e?null:l.data().id,authHouseholdID:e?l.data().primaryAuthHouseholdID:null,budgetPayeeID:null,cookMealPlanID:null,cookRecipeID:null,created:null,id:null,inCart:!1,name:"",nextDate:null,planProjectID:null,position:"",price:0,recurrence:null,shopCategoryID:null,shopListID:null,updated:null}}}const vr=new Rm,Pm=/^(#|`)|$/,yo=/^\d+(\/\d+)?/,vo=/#cookrecipe\/(\w+)/;class km extends we{constructor(){super("/api/v1/cook/meal-plans","date",!1,D.CookMealPlan)}alertAction(e,r,n){let a="";switch(e){case M.Create:a=l.translate(pf);break;case M.Delete:a=l.translate(mf);break;case M.Update:a=l.translate(gf);break}b.setLayoutAppAlert({actions:n,message:a},r)}findDateRange(e,r){return this.data.map(n=>{const a=[],i=e.valueOf(),o=r.valueOf();for(const s of n){const c=ve.fromString(s.date).valueOf(),h=Qn.cookMealPlan($e.findID(s.authHouseholdID).preferences.colorCookMealPlanEvents);if(c<=o&&c>=i){const v=gr.findID(s.cookMealTimeID),y=bt.findID(s.cookRecipeID);if(s.cookRecipeID!==null&&s.notificationTimePrep!==null&&y.timePrep!==0){const R=G.fromString(s.notificationTimePrep),B=G.fromString(s.notificationTimePrep);B.addMinutes(y.timePrep),a.push({...Qe.new(),authHouseholdID:s.authHouseholdID,color:h,cookMealPlans:[s],duration:y.timePrep,icon:Ke.CookMealPlan,name:`Prep ${y.name}`,participants:s.authAccountID===null?[]:[s.authAccountID],timeStart:R.toCivilTime().toString(!0),timestampEnd:B.toString(),timestampStart:R.toString()})}if(s.cookRecipeID!==null&&s.notificationTimeCook!==null&&y.timeCook!==0){const R=G.fromString(s.notificationTimeCook),B=G.fromString(s.notificationTimeCook);B.addMinutes(y.timeCook),a.push({...Qe.new(),authHouseholdID:y.authHouseholdID,color:h,cookMealPlans:[s],duration:y.timeCook,icon:Ke.CookMealPlan,name:`Cook ${y.name}`,participants:s.authAccountID===null?[]:[s.authAccountID],timeStart:R.toCivilTime().toString(!0),timestampEnd:B.toString(),timestampStart:R.toString()})}const E=ve.fromString(s.date),P=sn.fromString(s.time),g=G.fromString(new Date(E.year,E.month-1,E.day,P.hour,P.minute,0,0).toISOString()),S=G.fromString(g.toString());S.addMinutes(30);const C=a.findIndex(R=>R.dateStart===E.toJSON()&&R.name===v.name);C<0?a.push({...Qe.new(),authHouseholdID:s.authHouseholdID,color:h,cookMealPlans:[s],dateStart:E.toJSON(),duration:30,icon:Ke.CookMealPlan,name:v.name,participants:s.authAccountID===null?[]:[s.authAccountID],timeStart:P.toString(!0),timestampEnd:S.toString(),timestampStart:g.toString()}):(a[C].cookMealPlans.push(s),s.authAccountID!==null&&!a[C].participants.includes(s.authAccountID)&&a[C].participants.push(s.authAccountID))}}return Qe.toCalendarEventsRange(a,e,r)})}new(){return{authAccountID:null,authHouseholdID:l.data().primaryAuthHouseholdID,cookMealTimeID:null,cookRecipeID:null,cookRecipeScale:"1",created:null,customRecipe:"",date:G.now().toCivilDate().toJSON(),id:null,notificationTimeCook:null,notificationTimePrep:null,time:"12:00",updated:null}}toShopItems(e,r){let n=[];if(e===void 0)return n;let a=[];r!==void 0&&(a=r);for(const i of e){const o=bt.findID(i.cookRecipeID);if(o.id!==null){a.push(o.shortID);const c=bt.scaleIngredients(o.ingredients,i.cookRecipeScale).split(`
`);for(let h=0;h<c.length;h++){let v=c[h].trimStart();if(!yo.test(v)&&Pm.test(v))continue;if(vo.test(v)){const E=yo.exec(v)[0],P=vo.exec(v)[1],g=bt.findShortID(P);if(a.includes(P))v=`${E} ${g.name}`;else{const S={...this.new(),cookRecipeID:g.id,cookRecipeScale:E};n=n.concat(this.toShopItems([S],a));continue}}const y=yr.findMatch(v);n.push({...vr.new(),add:!v.includes("inventoryitem"),authHouseholdID:i.authHouseholdID,budgetPayeeID:y.budgetPayeeID,cookMealPlanID:i.id,cookRecipeID:i.cookRecipeID,id:Tm.new(),name:v,shopCategoryID:y.id})}}}return n}}const qr=new km;class Nm extends we{constructor(){super("/api/v1/health/items","name",!1,D.HealthItem)}alertAction(e,r,n){let a="";switch(e){case M.Create:a=l.translate(_i);break;case M.Delete:a=l.translate(bi);break;case M.Update:a=l.translate(Si);break}b.setLayoutAppAlert({actions:n,message:a},r)}findAuthAccountID(e,r){return this.data().filter(n=>n.authAccountID===e&&(r===void 0||n.output===r))}findAuthAccountIDName(e,r){const n=this.data().findIndex(a=>a.authAccountID===e&&a.name===r);return n>=0&&this.data().length>0?ge(this.data()[n]):this.new()}async init(e){await Y.update(`/api/v1/health/items?authAccountID=${e}`).then(()=>{})}new(){return{authAccountID:l.data().id,color:Z.Default,correlations:{},created:null,id:null,name:"",output:!1,totalCorrelations:0,updated:null}}}const _r=new Nm;class Mm extends we{constructor(){super("/api/v1/health/logs","timestamp",!1,D.HealthLog)}alertAction(e,r,n){let a="";switch(e){case M.Create:a=l.translate(cf);break;case M.Delete:a=l.translate(df);break;case M.Update:a=l.translate(Af);break}b.setLayoutAppAlert({actions:n,message:a},r)}findDateRange(e,r){return this.data.map(n=>{const a=[],i=e.valueOf(),o=r.valueOf();for(const s of n){const c=ve.fromString(s.date),h=G.fromCivilDate(c);if(c.valueOf()<=o&&c.valueOf()>=i&&!l.data().preferences.hideCalendarHealthLogs.includes(s.authAccountID)){const v=a.findIndex(E=>E.authAccountID===s.authAccountID&&E.timestampStart===h.toString()),y=_r.findID(s.healthItemID);v<0?a.push({...Qe.new(),authAccountID:s.authAccountID,color:$e.findMember(s.authAccountID).color===Z.Default?Z.Indigo:$e.findMember(s.authAccountID).color,duration:0,healthLogInputs:y.output?[]:[s],healthLogOutputs:y.output?[s]:[],icon:Ke.Health,name:"Health Logs",participants:[`${s.authAccountID}`],timestampEnd:h.toString(),timestampStart:h.toString()}):y.output?a[v].healthLogOutputs.push(s):a[v].healthLogInputs.push(s)}}return Qe.toCalendarEventsRange(a,e,r)})}findAuthAccountID(e,r){return this.data.map(n=>n.filter(a=>a.authAccountID===e&&(r===void 0||a.date===r)))}new(){return{authAccountID:l.data().id,created:null,date:null,healthItemID:null,id:null,updated:null}}}const en=new Mm;class Lm extends we{constructor(){super("/api/v1/notes/page-versions","updated",!0,D.NotesPageVersion)}alertAction(e,r,n){let a="";switch(e){case M.Create:a=l.translate(ph);break;case M.Delete:a=l.translate(mh);break;case M.Update:a=l.translate(gh);break}b.setLayoutAppAlert({actions:n,message:a},r)}findNotesPageIDAll(e){return this.data().filter(r=>r.notesPageID===e)}findNotesPageIDLatest(e){for(const r of this.data())if(r.notesPageID===e)return ge(r);return this.new()}new(){return{body:"",createdBy:null,id:null,notesPageID:null,updated:null}}}const tn=new Lm,Dt={clearRefreshed:()=>{for(let t=0;t<Object.keys(D).length;t++)switch(t){case D.AuthAccount:case D.AuthAccountAuthHousehold:case D.AuthSession:case D.BudgetMonth:case D.BudgetMonthCategory:case D.BudgetTransaction:case D.Data:continue;case D.AuthHousehold:$e.refreshed=!1;break;case D.Bookmark:Fr.refreshed=!1;break;case D.BudgetAccount:fr.refreshed=!1;break;case D.BudgetCategory:Wr.refreshed=!1;break;case D.BudgetPayee:hr.refreshed=!1;break;case D.BudgetRecurrence:Xr.refreshed=!1;break;case D.CalendarEvent:Qe.refreshed=!1;break;case D.CalendarICalendar:Jr.refreshed=!1;break;case D.Change:Zr.refreshed=!1;break;case D.CookMealPlan:qr.refreshed=!1;break;case D.CookMealTime:gr.refreshed=!1;break;case D.CookRecipe:bt.refreshed=!1;break;case D.HealthItem:_r.refreshed=!1;break;case D.HealthLog:en.refreshed=!1;break;case D.InventoryCollection:$r.refreshed=!1;break;case D.InventoryItem:pr.refreshed=!1;break;case D.NotesPage:lr.refreshed=!1;break;case D.NotesPageVersion:tn.refreshed=!1;break;case D.PlanProject:Bt.refreshed=!1;break;case D.PlanTask:Ze.refreshed=!1;break;case D.RewardCard:Yr.refreshed=!1;break;case D.SecretsValue:mr.refreshed=!1;break;case D.SecretsVault:Et.refreshed=!1;break;case D.ShopCategory:yr.refreshed=!1;break;case D.ShopItem:vr.refreshed=!1;break;case D.ShopList:Qr.refreshed=!1;break}},init:async()=>{Dt.sse=new EventSource(`${await Y.getHostname()}/api/v1/sse/${de.data().id}`),Dt.sse.onerror=()=>{Dt.clearRefreshed()},Dt.sse.onmessage=async t=>{if(t.data==="")return;const e=JSON.parse(t.data);setTimeout(async()=>{switch(e.table){case"auth_account":return l.read(e);case"auth_account_auth_household":return e.operation===pt.Delete&&(e.operation=pt.Update),$e.onSSE(e);case"auth_household":return $e.onSSE(e);case"bookmark":await Fr.onSSE(e);break;case"budget_account":await fr.onSSE(e);break;case"budget_category":await Wr.onSSE(e);break;case"budget_payee":await hr.onSSE(e);break;case"budget_recurrence":await Xr.onSSE(e);break;case"calendar_event":await Qe.onSSE(e);break;case"calendar_icalendar":await Jr.onSSE(e);break;case"change":await Zr.onSSE(e);break;case"cook_meal_plan":await qr.onSSE(e);break;case"cook_meal_time":await gr.onSSE(e);break;case"cook_recipe":await bt.onSSE(e);break;case"health_item":await _r.onSSE(e);break;case"health_log":await en.onSSE(e);break;case"inventory_collection":await $r.onSSE(e);break;case"inventory_item":await pr.onSSE(e);break;case"notes_page":await lr.onSSE(e);break;case"notes_page_version":await tn.onSSE(e);break;case"plan_project":await Bt.onSSE(e);break;case"plan_task":await Ze.onSSE(e);break;case"reward_card":await Yr.onSSE(e);break;case"secrets_value":await mr.onSSE(e);break;case"secrets_vault":await Et.onSSE(e);break;case"shop_category":await yr.onSSE(e);break;case"shop_item":await vr.onSSE(e);break;case"shop_list":await Qr.onSSE(e);break}},500)}},reset:()=>{Dt.sse!==null&&(Dt.sse.close(),Dt.sse=null)},sse:null},Ot={alertSubscription:()=>{if(!l.isDemo()&&!l.data().child){for(const t of $e.data())if(t.subscriptionProcessor===0){if(X.route.get().startsWith("/setup")||b.getSessionRedirects().length===1&&b.getSessionRedirects()[0].startsWith("/setup"))return;const e=ve.fromString(t.subscriptionExpires),r=G.now(),n=G.now();n.addDays(5),!Nt.data().cloud&&t.id===null&&l.data().setup?Be.subscriptionNeeded():e<r.toCivilDate()?Be.subscriptionExpired(b.formatCivilDate(e)):e<n.toCivilDate()&&Be.subscriptionExpiring(b.formatCivilDate(e))}}},handleResponse:t=>{let e="readAll";switch(t.action){case We.FilterSortChildren:e="filter";const r=t;switch(r.type){case D.NotesPage:lr.setNested(r.data);break;case D.PlanProject:Bt.setNested(r.data),X.redraw();break;case D.PlanTask:Ze.setNested(r.data),X.redraw();break}return;case We.Reset:case We.Set:return;case We.Read:e="read";case We.ReadAll:const n=t;if(W(n.data)){b.setLayoutAppAlert(n.data);return}switch(n.data.offline?Be.offline():Be.online(),n.type){case D.AuthAccount:case D.AuthAccountAuthHousehold:case D.AuthSession:case D.BudgetMonth:case D.BudgetMonthCategory:case D.BudgetTransaction:case D.Data:return;case D.AuthHousehold:$e.set(n.data.data,n.data.hash);break;case D.Bookmark:Fr.set(n.data.data,n.data.hash);break;case D.BudgetAccount:fr.set(n.data.data,n.data.hash);break;case D.BudgetCategory:Wr.set(n.data.data,n.data.hash);break;case D.BudgetPayee:hr.set(n.data.data,n.data.hash);break;case D.BudgetRecurrence:Xr.set(n.data.data,n.data.hash);break;case D.CalendarEvent:Qe.set(n.data.data,n.data.hash);break;case D.CalendarICalendar:Jr.set(n.data.data,n.data.hash);break;case D.Change:Zr.set(n.data.data,n.data.hash);break;case D.CookMealPlan:qr.set(n.data.data,n.data.hash);break;case D.CookMealTime:gr.set(n.data.data,n.data.hash);break;case D.CookRecipe:bt.set(n.data.data,n.data.hash);break;case D.HealthItem:_r.set(n.data.data,n.data.hash);break;case D.HealthLog:en.set(n.data.data,n.data.hash);break;case D.InventoryCollection:$r.set(n.data.data,n.data.hash);break;case D.InventoryItem:pr.set(n.data.data,n.data.hash);break;case D.NotesPage:lr.set(n.data.data,n.data.hash);break;case D.NotesPageVersion:tn.set(n.data.data,n.data.hash);break;case D.PlanProject:Bt.set(n.data.data,n.data.hash);break;case D.PlanTask:Ze.set(n.data.data,n.data.hash);break;case D.RewardCard:Yr.set(n.data.data,n.data.hash);break;case D.SecretsValue:mr.set(n.data.data,n.data.hash);break;case D.SecretsVault:Et.set(n.data.data,n.data.hash);break;case D.ShopCategory:yr.set(n.data.data,n.data.hash);break;case D.ShopItem:vr.set(n.data.data,n.data.hash);break;case D.ShopList:Qr.set(n.data.data,n.data.hash);break}Ae.spanEnd(`${jn.getArray(n.type)}.${e}`)}},hideComponentIncludes(t){const e=t.toLowerCase();return $e.isHidden(e)||l.data().preferences.hideComponents.includes(e)},init:()=>{Oe.init(),Ye.init(Ot.handleResponse)},permitted:(t,e,r)=>{let n=it.View;if(!b.isSessionAuthenticated()||e===!0&&r!==void 0&&r!==null&&t!==oe.Auth&&!l.isDemo()&&$e.isExpired(r))return!1;switch(e===!0&&(n=it.Edit),t){case oe.Budget:case oe.Cook:case oe.Inventory:case oe.Reward:return Ge.isPermitted(de.data().permissionsHouseholds,t,n);case oe.Auth:case oe.Calendar:case oe.Health:case oe.Notes:case oe.Plan:case oe.Secrets:case oe.Shop:switch(r==null){case!0:return de.data().permissionsAccount[Ge.components[t]]<=n;case!1:return Ge.isPermitted(de.data().permissionsHouseholds,t,n,r)}}},readAll:()=>{for(let t=0;t<Object.keys(D).length;t++)switch(t){case D.AuthAccount:case D.AuthAccountAuthHousehold:case D.AuthSession:case D.BudgetMonth:case D.BudgetMonthCategory:case D.BudgetTransaction:case D.Data:continue;case D.AuthHousehold:$e.readAll();break;case D.Bookmark:Fr.readAll();break;case D.BudgetAccount:fr.readAll();break;case D.BudgetCategory:Wr.readAll();break;case D.BudgetPayee:hr.readAll();break;case D.BudgetRecurrence:Xr.readAll();break;case D.CalendarEvent:Qe.readAll();break;case D.CalendarICalendar:Jr.readAll();break;case D.Change:Zr.readAll();break;case D.CookMealPlan:qr.readAll();break;case D.CookMealTime:gr.readAll();break;case D.CookRecipe:bt.readAll();break;case D.HealthItem:_r.readAll();break;case D.HealthLog:en.readAll();break;case D.InventoryCollection:$r.readAll();break;case D.InventoryItem:pr.readAll();break;case D.NotesPage:lr.readAll();break;case D.NotesPageVersion:tn.readAll();break;case D.PlanProject:Bt.readAll();break;case D.PlanTask:Ze.readAll();break;case D.RewardCard:Yr.readAll();break;case D.SecretsValue:mr.readAll();break;case D.SecretsVault:Et.readAll();break;case D.ShopCategory:yr.readAll();break;case D.ShopItem:vr.readAll();break;case D.ShopList:Qr.readAll();break}},signIn:async()=>{if(Ae.spanStart("Global.SignIn"),await Nt.read(),!Nt.data().cloud){const t=Nt.data().version.split("."),e=`${{BUILD_VERSION_HOMECHART:"dev+a0b23e2",NODE_ENV:"production",PUPPETEER_URL_HOMECHART:""}.BUILD_VERSION}`.split(".");if(t.length===3&&e.length===3&&t[1]!==e[1]){b.setLayoutAppAlert({message:l.translate(Vp),persist:!0});return}}return de.validate().then(async t=>{if(W(t))throw t;return l.data().id=de.data().authAccountID,de.data().admin===!0&&b.setSessionAdmin(!0),l.read()}).then(async t=>{if(W(t))throw t;if(await Dt.init(),await l.decryptPrivateKeys(""),l.data().setup){const e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(l.data().timeZone!==e){const n=`${l.translate(Hp)} (${l.data().timeZone.replace(/_/g," ")}) ${l.translate(Up)} (${e.replace(/_/g," ")})`;b.setLayoutAppAlert({actions:[{name:l.translate(oo),onclick:async()=>{b.clearLayoutAppAlert(n),await l.update({...l.data(),timeZone:e})}}],message:n,persist:!0})}const r=navigator.language.split("-")[0];if(no[r]!==void 0&&l.data().iso639Code!==r){const n=`${l.translate(jp)} ${no[r]}?`;b.setLayoutAppAlert({actions:[{name:rt(r,oo),onclick:async()=>{b.clearLayoutAppAlert(n),await l.update({...l.data(),iso639Code:r})}}],message:n,persist:!0})}}l.data().setup?(l.data().verified||l.alertVerifyEmail(),Ot.alertSubscription()):b.setSessionRedirect("/setup"),window.dataLayer===void 0&&(window.dataLayer=[]),window.dataLayer.push({authAccountID:l.data().id,cloud:Nt.data().cloud,demo:l.isDemo()}),l.data().setup?go.login(l.data().oidcProviderType):go.signUp(l.data().oidcProviderType),b.setSessionAuthenticated(!0),Ot.readAll(),b.redirect(),de.data().webPush===null&&await de.toggleNotifications(),b.getSessionDisplay()===kt.XLarge&&X.route.get()!==void 0&&!X.route.get().includes("/setup")&&b.toggleLayoutAppMenuOpen(!0),Ae.spanEnd("Global.SignIn")}).catch(async t=>{if(Ae.spanEnd("Global.SignIn"),_e(`Global.Signin: error during signin: ${JSON.stringify(t)}`,"There was a problem signing you in."),!(X.route.get().includes("/reset")||X.route.get().includes("/signin")||X.route.get().includes("/signup")||X.route.get().includes("/about")||X.route.get().includes("/cook/recipes/"))){if(!b.isSessionOnline()&&de.data().id!==null){b.setSessionAuthenticated(!0),b.redirect();return}return Ot.signOut()}})},signOut:async t=>Oe.clear().then(()=>{Y.clearAPIEndpoint();for(let e=0;e<Object.keys(D).length;e++)switch(e){case D.AuthAccountAuthHousehold:case D.BudgetMonth:case D.BudgetMonthCategory:case D.BudgetTransaction:case D.Data:continue;case D.AuthAccount:l.reset();break;case D.AuthSession:de.reset();break;case D.AuthHousehold:$e.reset();break;case D.Bookmark:Fr.reset();break;case D.BudgetAccount:fr.reset();break;case D.BudgetCategory:Wr.reset();break;case D.BudgetPayee:hr.reset();break;case D.BudgetRecurrence:Xr.reset();break;case D.CalendarEvent:Qe.reset();break;case D.CalendarICalendar:Jr.reset();break;case D.Change:Zr.reset();break;case D.CookMealPlan:qr.reset();break;case D.CookMealTime:gr.reset();break;case D.CookRecipe:bt.reset();break;case D.HealthItem:_r.reset();break;case D.HealthLog:en.reset();break;case D.InventoryCollection:$r.reset();break;case D.InventoryItem:pr.reset();break;case D.NotesPage:lr.reset();break;case D.NotesPageVersion:tn.reset();break;case D.PlanProject:Bt.reset();break;case D.PlanTask:Ze.reset();break;case D.RewardCard:Yr.reset();break;case D.SecretsValue:mr.reset();break;case D.SecretsVault:Et.reset();break;case D.ShopCategory:yr.reset();break;case D.ShopItem:vr.reset();break;case D.ShopList:Qr.reset();break}b.setSessionAdmin(!1),t!==!0&&(b.reset(),de.reset(),X.route.get()!=="/signin"&&X.route.get()!=="/signout"&&X.route.get()!==void 0&&b.setSessionRedirect(X.route.get()),X.route.get()!=="/signin"&&(window.location.href="/signin"))}),switch:async()=>{const t=await Y.getHostname(),e=new Is;e.data(ge(de.data())),await de.create(!0),await e.delete(null,!0);const r=de.data();return Ot.signOut(!0).then(async()=>(de.data(r),Y.setAuth({id:r.id,key:r.key}))).then(async()=>Y.setHostname(t)).then(async()=>(Ot.init(),b.setSessionRedirect("/home"),Ot.signIn()))}};try{self["workbox:core:6.5.3"]&&_()}catch{}const Bm=(t,...e)=>{let r=t;return e.length>0&&(r+=` :: ${JSON.stringify(e)}`),r},xm=Bm;class qe extends Error{constructor(e,r){const n=xm(e,r);super(n),this.name=e,this.details=r}}const jm=new Set,_t={googleAnalytics:"googleAnalytics",precache:"precache-v2",prefix:"workbox",runtime:"runtime",suffix:typeof registration<"u"?registration.scope:""},Ua=t=>[_t.prefix,t,_t.suffix].filter(e=>e&&e.length>0).join("-"),Hm=t=>{for(const e of Object.keys(_t))t(e)},Xn={updateDetails:t=>{Hm(e=>{typeof t[e]=="string"&&(_t[e]=t[e])})},getGoogleAnalyticsName:t=>t||Ua(_t.googleAnalytics),getPrecacheName:t=>t||Ua(_t.precache),getPrefix:()=>_t.prefix,getRuntimeName:t=>t||Ua(_t.runtime),getSuffix:()=>_t.suffix};function _o(t,e){const r=new URL(t);for(const n of e)r.searchParams.delete(n);return r.href}async function Um(t,e,r,n){const a=_o(e.url,r);if(e.url===a)return t.match(e,n);const i=Object.assign(Object.assign({},n),{ignoreSearch:!0}),o=await t.keys(e,i);for(const s of o){const c=_o(s.url,r);if(a===c)return t.match(s,n)}}let Br;function Vm(){if(Br===void 0){const t=new Response("");if("body"in t)try{new Response(t.body),Br=!0}catch{Br=!1}Br=!1}return Br}class zm{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}async function Gm(){for(const t of jm)await t()}const Fm=t=>new URL(String(t),location.href).href.replace(new RegExp(`^${location.origin}`),"");function Wm(t){return new Promise(e=>setTimeout(e,t))}function bo(t,e){const r=e();return t.waitUntil(r),r}async function $m(t,e){let r=null;if(t.url&&(r=new URL(t.url).origin),r!==self.location.origin)throw new qe("cross-origin-copy-response",{origin:r});const n=t.clone(),a={headers:new Headers(n.headers),status:n.status,statusText:n.statusText},i=e?e(a):a,o=Vm()?n.body:await n.blob();return new Response(o,i)}function Km(){self.addEventListener("activate",()=>self.clients.claim())}try{self["workbox:precaching:6.5.3"]&&_()}catch{}const Ym="__WB_REVISION__";function Qm(t){if(!t)throw new qe("add-to-cache-list-unexpected-type",{entry:t});if(typeof t=="string"){const i=new URL(t,location.href);return{cacheKey:i.href,url:i.href}}const{revision:e,url:r}=t;if(!r)throw new qe("add-to-cache-list-unexpected-type",{entry:t});if(!e){const i=new URL(r,location.href);return{cacheKey:i.href,url:i.href}}const n=new URL(r,location.href),a=new URL(r,location.href);return n.searchParams.set(Ym,e),{cacheKey:n.href,url:a.href}}class Xm{constructor(){this.updatedURLs=[],this.notUpdatedURLs=[],this.handlerWillStart=async({request:e,state:r})=>{r&&(r.originalRequest=e)},this.cachedResponseWillBeUsed=async({event:e,state:r,cachedResponse:n})=>{if(e.type==="install"&&r&&r.originalRequest&&r.originalRequest instanceof Request){const a=r.originalRequest.url;n?this.notUpdatedURLs.push(a):this.updatedURLs.push(a)}return n}}}class Jm{constructor({precacheController:e}){this.cacheKeyWillBeUsed=async({request:r,params:n})=>{const a=(n==null?void 0:n.cacheKey)||this._precacheController.getCacheKeyForURL(r.url);return a?new Request(a,{headers:r.headers}):r},this._precacheController=e}}try{self["workbox:strategies:6.5.3"]&&_()}catch{}function wn(t){return typeof t=="string"?new Request(t):t}class Zm{constructor(e,r){this._cacheKeys={},Object.assign(this,r),this.event=r.event,this._strategy=e,this._handlerDeferred=new zm,this._extendLifetimePromises=[],this._plugins=[...e.plugins],this._pluginStateMap=new Map;for(const n of this._plugins)this._pluginStateMap.set(n,{});this.event.waitUntil(this._handlerDeferred.promise)}async fetch(e){const{event:r}=this;let n=wn(e);if(n.mode==="navigate"&&r instanceof FetchEvent&&r.preloadResponse){const o=await r.preloadResponse;if(o)return o}const a=this.hasCallback("fetchDidFail")?n.clone():null;try{for(const o of this.iterateCallbacks("requestWillFetch"))n=await o({request:n.clone(),event:r})}catch(o){if(o instanceof Error)throw new qe("plugin-error-request-will-fetch",{thrownErrorMessage:o.message})}const i=n.clone();try{let o;o=await fetch(n,n.mode==="navigate"?void 0:this._strategy.fetchOptions);for(const s of this.iterateCallbacks("fetchDidSucceed"))o=await s({event:r,request:i,response:o});return o}catch(o){throw a&&await this.runCallbacks("fetchDidFail",{error:o,event:r,originalRequest:a.clone(),request:i.clone()}),o}}async fetchAndCachePut(e){const r=await this.fetch(e),n=r.clone();return this.waitUntil(this.cachePut(e,n)),r}async cacheMatch(e){const r=wn(e);let n;const{cacheName:a,matchOptions:i}=this._strategy,o=await this.getCacheKey(r,"read"),s=Object.assign(Object.assign({},i),{cacheName:a});n=await caches.match(o,s);for(const c of this.iterateCallbacks("cachedResponseWillBeUsed"))n=await c({cacheName:a,matchOptions:i,cachedResponse:n,request:o,event:this.event})||void 0;return n}async cachePut(e,r){const n=wn(e);await Wm(0);const a=await this.getCacheKey(n,"write");if(!r)throw new qe("cache-put-with-no-response",{url:Fm(a.url)});const i=await this._ensureResponseSafeToCache(r);if(!i)return!1;const{cacheName:o,matchOptions:s}=this._strategy,c=await self.caches.open(o),h=this.hasCallback("cacheDidUpdate"),v=h?await Um(c,a.clone(),["__WB_REVISION__"],s):null;try{await c.put(a,h?i.clone():i)}catch(y){if(y instanceof Error)throw y.name==="QuotaExceededError"&&await Gm(),y}for(const y of this.iterateCallbacks("cacheDidUpdate"))await y({cacheName:o,oldResponse:v,newResponse:i.clone(),request:a,event:this.event});return!0}async getCacheKey(e,r){const n=`${e.url} | ${r}`;if(!this._cacheKeys[n]){let a=e;for(const i of this.iterateCallbacks("cacheKeyWillBeUsed"))a=wn(await i({mode:r,request:a,event:this.event,params:this.params}));this._cacheKeys[n]=a}return this._cacheKeys[n]}hasCallback(e){for(const r of this._strategy.plugins)if(e in r)return!0;return!1}async runCallbacks(e,r){for(const n of this.iterateCallbacks(e))await n(r)}*iterateCallbacks(e){for(const r of this._strategy.plugins)if(typeof r[e]=="function"){const n=this._pluginStateMap.get(r);yield i=>{const o=Object.assign(Object.assign({},i),{state:n});return r[e](o)}}}waitUntil(e){return this._extendLifetimePromises.push(e),e}async doneWaiting(){let e;for(;e=this._extendLifetimePromises.shift();)await e}destroy(){this._handlerDeferred.resolve(null)}async _ensureResponseSafeToCache(e){let r=e,n=!1;for(const a of this.iterateCallbacks("cacheWillUpdate"))if(r=await a({request:this.request,response:r,event:this.event})||void 0,n=!0,!r)break;return n||r&&r.status!==200&&(r=void 0),r}}class qm{constructor(e={}){this.cacheName=Xn.getRuntimeName(e.cacheName),this.plugins=e.plugins||[],this.fetchOptions=e.fetchOptions,this.matchOptions=e.matchOptions}handle(e){const[r]=this.handleAll(e);return r}handleAll(e){e instanceof FetchEvent&&(e={event:e,request:e.request});const r=e.event,n=typeof e.request=="string"?new Request(e.request):e.request,a="params"in e?e.params:void 0,i=new Zm(this,{event:r,request:n,params:a}),o=this._getResponse(i,n,r),s=this._awaitComplete(o,i,n,r);return[o,s]}async _getResponse(e,r,n){await e.runCallbacks("handlerWillStart",{event:n,request:r});let a;try{if(a=await this._handle(r,e),!a||a.type==="error")throw new qe("no-response",{url:r.url})}catch(i){if(i instanceof Error){for(const o of e.iterateCallbacks("handlerDidError"))if(a=await o({error:i,event:n,request:r}),a)break}if(!a)throw i}for(const i of e.iterateCallbacks("handlerWillRespond"))a=await i({event:n,request:r,response:a});return a}async _awaitComplete(e,r,n,a){let i,o;try{i=await e}catch{}try{await r.runCallbacks("handlerDidRespond",{event:a,request:n,response:i}),await r.doneWaiting()}catch(s){s instanceof Error&&(o=s)}if(await r.runCallbacks("handlerDidComplete",{event:a,request:n,response:i,error:o}),r.destroy(),o)throw o}}class xt extends qm{constructor(e={}){e.cacheName=Xn.getPrecacheName(e.cacheName),super(e),this._fallbackToNetwork=e.fallbackToNetwork!==!1,this.plugins.push(xt.copyRedirectedCacheableResponsesPlugin)}async _handle(e,r){const n=await r.cacheMatch(e);return n||(r.event&&r.event.type==="install"?await this._handleInstall(e,r):await this._handleFetch(e,r))}async _handleFetch(e,r){let n;const a=r.params||{};if(this._fallbackToNetwork){const i=a.integrity,o=e.integrity,s=!o||o===i;n=await r.fetch(new Request(e,{integrity:e.mode!=="no-cors"?o||i:void 0})),i&&s&&e.mode!=="no-cors"&&(this._useDefaultCacheabilityPluginIfNeeded(),await r.cachePut(e,n.clone()))}else throw new qe("missing-precache-entry",{cacheName:this.cacheName,url:e.url});return n}async _handleInstall(e,r){this._useDefaultCacheabilityPluginIfNeeded();const n=await r.fetch(e);if(!await r.cachePut(e,n.clone()))throw new qe("bad-precaching-response",{url:e.url,status:n.status});return n}_useDefaultCacheabilityPluginIfNeeded(){let e=null,r=0;for(const[n,a]of this.plugins.entries())a!==xt.copyRedirectedCacheableResponsesPlugin&&(a===xt.defaultPrecacheCacheabilityPlugin&&(e=n),a.cacheWillUpdate&&r++);r===0?this.plugins.push(xt.defaultPrecacheCacheabilityPlugin):r>1&&e!==null&&this.plugins.splice(e,1)}}xt.defaultPrecacheCacheabilityPlugin={async cacheWillUpdate({response:t}){return!t||t.status>=400?null:t}};xt.copyRedirectedCacheableResponsesPlugin={async cacheWillUpdate({response:t}){return t.redirected?await $m(t):t}};class eg{constructor({cacheName:e,plugins:r=[],fallbackToNetwork:n=!0}={}){this._urlsToCacheKeys=new Map,this._urlsToCacheModes=new Map,this._cacheKeysToIntegrities=new Map,this._strategy=new xt({cacheName:Xn.getPrecacheName(e),plugins:[...r,new Jm({precacheController:this})],fallbackToNetwork:n}),this.install=this.install.bind(this),this.activate=this.activate.bind(this)}get strategy(){return this._strategy}precache(e){this.addToCacheList(e),this._installAndActiveListenersAdded||(self.addEventListener("install",this.install),self.addEventListener("activate",this.activate),this._installAndActiveListenersAdded=!0)}addToCacheList(e){const r=[];for(const n of e){typeof n=="string"?r.push(n):n&&n.revision===void 0&&r.push(n.url);const{cacheKey:a,url:i}=Qm(n),o=typeof n!="string"&&n.revision?"reload":"default";if(this._urlsToCacheKeys.has(i)&&this._urlsToCacheKeys.get(i)!==a)throw new qe("add-to-cache-list-conflicting-entries",{firstEntry:this._urlsToCacheKeys.get(i),secondEntry:a});if(typeof n!="string"&&n.integrity){if(this._cacheKeysToIntegrities.has(a)&&this._cacheKeysToIntegrities.get(a)!==n.integrity)throw new qe("add-to-cache-list-conflicting-integrities",{url:i});this._cacheKeysToIntegrities.set(a,n.integrity)}if(this._urlsToCacheKeys.set(i,a),this._urlsToCacheModes.set(i,o),r.length>0){const s=`Workbox is precaching URLs without revision info: ${r.join(", ")}
This is generally NOT safe. Learn more at https://bit.ly/wb-precache`;console.warn(s)}}}install(e){return bo(e,async()=>{const r=new Xm;this.strategy.plugins.push(r);for(const[i,o]of this._urlsToCacheKeys){const s=this._cacheKeysToIntegrities.get(o),c=this._urlsToCacheModes.get(i),h=new Request(i,{integrity:s,cache:c,credentials:"same-origin"});await Promise.all(this.strategy.handleAll({params:{cacheKey:o},request:h,event:e}))}const{updatedURLs:n,notUpdatedURLs:a}=r;return{updatedURLs:n,notUpdatedURLs:a}})}activate(e){return bo(e,async()=>{const r=await self.caches.open(this.strategy.cacheName),n=await r.keys(),a=new Set(this._urlsToCacheKeys.values()),i=[];for(const o of n)a.has(o.url)||(await r.delete(o),i.push(o.url));return{deletedURLs:i}})}getURLsToCacheKeys(){return this._urlsToCacheKeys}getCachedURLs(){return[...this._urlsToCacheKeys.keys()]}getCacheKeyForURL(e){const r=new URL(e,location.href);return this._urlsToCacheKeys.get(r.href)}getIntegrityForCacheKey(e){return this._cacheKeysToIntegrities.get(e)}async matchPrecache(e){const r=e instanceof Request?e.url:e,n=this.getCacheKeyForURL(r);if(n)return(await self.caches.open(this.strategy.cacheName)).match(n)}createHandlerBoundToURL(e){const r=this.getCacheKeyForURL(e);if(!r)throw new qe("non-precached-url",{url:e});return n=>(n.request=new Request(e),n.params=Object.assign({cacheKey:r},n.params),this.strategy.handle(n))}}let Va;const Ns=()=>(Va||(Va=new eg),Va);try{self["workbox:routing:6.5.3"]&&_()}catch{}const Ms="GET",zn=t=>t&&typeof t=="object"?t:{handle:t};class rn{constructor(e,r,n=Ms){this.handler=zn(r),this.match=e,this.method=n}setCatchHandler(e){this.catchHandler=zn(e)}}class tg extends rn{constructor(e,r,n){const a=({url:i})=>{const o=e.exec(i.href);if(o&&!(i.origin!==location.origin&&o.index!==0))return o.slice(1)};super(a,r,n)}}class rg{constructor(){this._routes=new Map,this._defaultHandlerMap=new Map}get routes(){return this._routes}addFetchListener(){self.addEventListener("fetch",e=>{const{request:r}=e,n=this.handleRequest({request:r,event:e});n&&e.respondWith(n)})}addCacheListener(){self.addEventListener("message",e=>{if(e.data&&e.data.type==="CACHE_URLS"){const{payload:r}=e.data,n=Promise.all(r.urlsToCache.map(a=>{typeof a=="string"&&(a=[a]);const i=new Request(...a);return this.handleRequest({request:i,event:e})}));e.waitUntil(n),e.ports&&e.ports[0]&&n.then(()=>e.ports[0].postMessage(!0))}})}handleRequest({request:e,event:r}){const n=new URL(e.url,location.href);if(!n.protocol.startsWith("http"))return;const a=n.origin===location.origin,{params:i,route:o}=this.findMatchingRoute({event:r,request:e,sameOrigin:a,url:n});let s=o&&o.handler;const c=e.method;if(!s&&this._defaultHandlerMap.has(c)&&(s=this._defaultHandlerMap.get(c)),!s)return;let h;try{h=s.handle({url:n,request:e,event:r,params:i})}catch(y){h=Promise.reject(y)}const v=o&&o.catchHandler;return h instanceof Promise&&(this._catchHandler||v)&&(h=h.catch(async y=>{if(v)try{return await v.handle({url:n,request:e,event:r,params:i})}catch(E){E instanceof Error&&(y=E)}if(this._catchHandler)return this._catchHandler.handle({url:n,request:e,event:r});throw y})),h}findMatchingRoute({url:e,sameOrigin:r,request:n,event:a}){const i=this._routes.get(n.method)||[];for(const o of i){let s;const c=o.match({url:e,sameOrigin:r,request:n,event:a});if(c)return s=c,(Array.isArray(s)&&s.length===0||c.constructor===Object&&Object.keys(c).length===0||typeof c=="boolean")&&(s=void 0),{route:o,params:s}}return{}}setDefaultHandler(e,r=Ms){this._defaultHandlerMap.set(r,zn(e))}setCatchHandler(e){this._catchHandler=zn(e)}registerRoute(e){this._routes.has(e.method)||this._routes.set(e.method,[]),this._routes.get(e.method).push(e)}unregisterRoute(e){if(!this._routes.has(e.method))throw new qe("unregister-route-but-not-found-with-method",{method:e.method});const r=this._routes.get(e.method).indexOf(e);if(r>-1)this._routes.get(e.method).splice(r,1);else throw new qe("unregister-route-route-not-registered")}}let xr;const ng=()=>(xr||(xr=new rg,xr.addFetchListener(),xr.addCacheListener()),xr);function ag(t,e,r){let n;if(typeof t=="string"){const i=new URL(t,location.href),o=({url:s})=>s.href===i.href;n=new rn(o,e,r)}else if(t instanceof RegExp)n=new tg(t,e,r);else if(typeof t=="function")n=new rn(t,e,r);else if(t instanceof rn)n=t;else throw new qe("unsupported-route-type",{moduleName:"workbox-routing",funcName:"registerRoute",paramName:"capture"});return ng().registerRoute(n),n}function ig(t,e=[]){for(const r of[...t.searchParams.keys()])e.some(n=>n.test(r))&&t.searchParams.delete(r);return t}function*og(t,{ignoreURLParametersMatching:e=[/^utm_/,/^fbclid$/],directoryIndex:r="index.html",cleanURLs:n=!0,urlManipulation:a}={}){const i=new URL(t,location.href);i.hash="",yield i.href;const o=ig(i,e);if(yield o.href,r&&o.pathname.endsWith("/")){const s=new URL(o.href);s.pathname+=r,yield s.href}if(n){const s=new URL(o.href);s.pathname+=".html",yield s.href}if(a){const s=a({url:i});for(const c of s)yield c.href}}class sg extends rn{constructor(e,r){const n=({request:a})=>{const i=e.getURLsToCacheKeys();for(const o of og(a.url,r)){const s=i.get(o);if(s){const c=e.getIntegrityForCacheKey(s);return{cacheKey:s,integrity:c}}}};super(n,e.strategy)}}function lg(t){const e=Ns(),r=new sg(e,t);ag(r)}const ug="-precache-",cg=async(t,e=ug)=>{const n=(await self.caches.keys()).filter(a=>a.includes(e)&&a.includes(self.registration.scope)&&a!==t);return await Promise.all(n.map(a=>self.caches.delete(a))),n};function dg(){self.addEventListener("activate",t=>{const e=Xn.getPrecacheName();t.waitUntil(cg(e).then(r=>{}))})}function Ag(t){Ns().precache(t)}function fg(t,e){Ag(t),lg(e)}Km();dg();fg([{"revision":null,"url":"assets/AboutOSSLicenses-114fef04.js"},{"revision":null,"url":"assets/AboutPrivacy-cd05d76b.js"},{"revision":null,"url":"assets/AboutTermsOfService-9a8391b7.js"},{"revision":null,"url":"assets/AdminAccounts-f5f582fe.js"},{"revision":null,"url":"assets/AdminHouseholds-d1e12078.js"},{"revision":null,"url":"assets/AdminNotifications-1cf586f8.js"},{"revision":null,"url":"assets/apple-95769fca.webp"},{"revision":null,"url":"assets/AuthAccountAuthHousehold-a53b69dd.js"},{"revision":null,"url":"assets/Bookmarks-fbfb1fa5.js"},{"revision":null,"url":"assets/BookmarksIframe-3cba8388.js"},{"revision":null,"url":"assets/BudgetAccounts-c0a74ef8.js"},{"revision":null,"url":"assets/BudgetCategories-bb3c950a.js"},{"revision":null,"url":"assets/BudgetCharts-3ce42835.js"},{"revision":null,"url":"assets/BudgetCharts-e13f1ada.css"},{"revision":null,"url":"assets/BudgetPayees-729eb786.js"},{"revision":null,"url":"assets/BudgetTransactions-8110e303.css"},{"revision":null,"url":"assets/BudgetTransactions-952c76b3.js"},{"revision":null,"url":"assets/Calendar-a61b70e9.css"},{"revision":null,"url":"assets/Calendar-a92baf15.js"},{"revision":null,"url":"assets/CalendarDayEvent-08b85acf.css"},{"revision":null,"url":"assets/CalendarDayEvent-2f2e8467.js"},{"revision":null,"url":"assets/CookMealTimes-7d759142.js"},{"revision":null,"url":"assets/CookRecipes-0ab8faa2.css"},{"revision":null,"url":"assets/CookRecipes-33de7ee5.js"},{"revision":null,"url":"assets/CookRecipesID-2eed385a.js"},{"revision":null,"url":"assets/CookRecipesID-c2c664db.css"},{"revision":null,"url":"assets/FeatureVoting-ff19b7db.js"},{"revision":null,"url":"assets/Filter-01c23926.js"},{"revision":null,"url":"assets/FormAuthAccountPreferences-03eff0ee.js"},{"revision":null,"url":"assets/FormImportCSV-767bd78d.js"},{"revision":null,"url":"assets/FormImportRecipe-035ef431.js"},{"revision":null,"url":"assets/FormItemNewPassword-12d871a8.js"},{"revision":null,"url":"assets/FormJoinHousehold-1bb931f6.js"},{"revision":null,"url":"assets/FormPermissions-29833505.js"},{"revision":null,"url":"assets/FormShopItemIngredients-5475d1d1.js"},{"revision":null,"url":"assets/FormSubscription-0bb20cc1.js"},{"revision":null,"url":"assets/FormTableAuthHouseholdMembers-b8ed5d57.js"},{"revision":null,"url":"assets/GetHelp-610c77dd.js"},{"revision":null,"url":"assets/google-48d6df96.webp"},{"revision":null,"url":"assets/HealthItems-4293ea4a.js"},{"revision":null,"url":"assets/HelpMarkdown-54f89bea.js"},{"revision":null,"url":"assets/Home-7c96ee5f.css"},{"revision":null,"url":"assets/Home-be5234c2.js"},{"revision":null,"url":"assets/homechart_512_202202261-8143d29c.png"},{"revision":null,"url":"assets/homechart_512_mask_202202261-557823f4.png"},{"revision":null,"url":"assets/homechart_dark-a1c9e92b.webp"},{"revision":null,"url":"assets/homechart_light-45e23a31.webp"},{"revision":null,"url":"assets/index-09c2e996.js"},{"revision":null,"url":"assets/index-351c47f0.js"},{"revision":null,"url":"assets/index-5446acb6.css"},{"revision":null,"url":"assets/InventoryCollections-8a1d2049.js"},{"revision":null,"url":"assets/InventoryItems-97d5078e.css"},{"revision":null,"url":"assets/InventoryItems-c19f9356.js"},{"revision":null,"url":"assets/material-icons-outlined-8419ef03.woff2"},{"revision":null,"url":"assets/NotesPages-294baf7a.js"},{"revision":null,"url":"assets/NotesPagesID-4bdf5a79.js"},{"revision":null,"url":"assets/NotesPagesID-6b67aaeb.css"},{"revision":null,"url":"assets/NotesPagesIDVersions-b58685b0.js"},{"revision":null,"url":"assets/noto-sans-bold-09d7a525.woff2"},{"revision":null,"url":"assets/noto-sans-regular-88f00438.woff2"},{"revision":null,"url":"assets/OAuth-824ba832.css"},{"revision":null,"url":"assets/OAuth-91b50158.js"},{"revision":null,"url":"assets/OIDCButtons-0f7ed6f9.js"},{"revision":null,"url":"assets/OIDCButtons-3ad5d641.css"},{"revision":null,"url":"assets/Or-a8d14470.css"},{"revision":null,"url":"assets/Or-b4de5444.js"},{"revision":null,"url":"assets/papaparse.min-81dbec36.js"},{"revision":null,"url":"assets/Payment-0acdd3b9.js"},{"revision":null,"url":"assets/Payment-7ef1bf2a.js"},{"revision":null,"url":"assets/PlanTasks-50dccccc.css"},{"revision":null,"url":"assets/PlanTasks-d2e4c1e4.js"},{"revision":null,"url":"assets/ResetPassword-911d5f24.js"},{"revision":null,"url":"assets/RewardCards-14cc28e5.js"},{"revision":null,"url":"assets/RewardCards-9ec3c883.css"},{"revision":null,"url":"assets/SecretsValues-e9e68789.js"},{"revision":null,"url":"assets/SecretsVaults-c45d4fdd.js"},{"revision":null,"url":"assets/SettingsAccount-12397e0d.js"},{"revision":null,"url":"assets/SettingsHouseholds-4611dd03.js"},{"revision":null,"url":"assets/SettingsHouseholdsID-fa4aef5f.js"},{"revision":null,"url":"assets/SettingsNotifications-c4831d53.js"},{"revision":null,"url":"assets/SettingsSessions-a0c8ce75.js"},{"revision":null,"url":"assets/Setup-232106c5.css"},{"revision":null,"url":"assets/Setup-519d437d.js"},{"revision":null,"url":"assets/Share-e790cccf.js"},{"revision":null,"url":"assets/ShopCategories-e74c9ac7.js"},{"revision":null,"url":"assets/ShopItems-4ec85262.js"},{"revision":null,"url":"assets/ShopLists-dd954190.js"},{"revision":null,"url":"assets/ShopStaples-504bbe5d.js"},{"revision":null,"url":"assets/ShopStores-f8d50928.js"},{"revision":null,"url":"assets/SignIn-2136c3b5.js"},{"revision":null,"url":"assets/SignIn-d19b3645.css"},{"revision":null,"url":"assets/Subscription-2fd09391.js"},{"revision":null,"url":"assets/Subscription-7343488b.css"},{"revision":null,"url":"assets/Switch-27d69b77.js"},{"revision":null,"url":"assets/TableColumnHousehold-f6fe7c15.js"},{"revision":null,"url":"assets/TableComponents-d4e0ba42.js"},{"revision":null,"url":"assets/TitleTabsAuthHouseholds-59423851.js"},{"revision":null,"url":"assets/xml2js-b4bfce7a.js"},{"revision":"8784f4c55a8369d60498ddc1b280d65f","url":"calendar_20220729.png"},{"revision":"8b200e4245a7be3d233c40e0b74ac165","url":"cook_20220729.png"},{"revision":"df0c35d96351e678ac10f998a6d72d1d","url":"homechart_192_202202261.png"},{"revision":"edad26b878ed91a2f067000390a10396","url":"homechart_512_202202261.png"},{"revision":"860d6412dbeaf7fabc2dadfcce401463","url":"homechart_512_mask_202202261.png"},{"revision":"8f5c18cfff6670a37dd372cfb168aeb7","url":"homechart_badge_202202261.png"},{"revision":"770d83f83f01f009c50edb1dd61f9e43","url":"index.html"},{"revision":"37e938ac60da36698ddd71aab7255809","url":"plan_20220729.png"},{"revision":"df0c35d96351e678ac10f998a6d72d1d","url":"homechart_192_202202261.png"},{"revision":"edad26b878ed91a2f067000390a10396","url":"homechart_512_202202261.png"},{"revision":"860d6412dbeaf7fabc2dadfcce401463","url":"homechart_512_mask_202202261.png"},{"revision":"8784f4c55a8369d60498ddc1b280d65f","url":"calendar_20220729.png"},{"revision":"37e938ac60da36698ddd71aab7255809","url":"plan_20220729.png"},{"revision":"f9d53cedc87551c65ed062250a02b08b","url":"manifest.webmanifest"}]);self.skipWaiting();Oe.init();function Ls(t){self.registration.showNotification(t.subject,{actions:t.actions.types===null?[]:t.actions.types.map(e=>Tn[e]),badge:"/homechart_badge_202202261.png",body:t.body,data:t,icon:"/homechart_512_202202261.png"})}const Tn=[{action:"snooze",onclick:async t=>{self.setTimeout(async()=>{Ls(t)},1e3*60*5)},title:"Snooze"},{action:"task-complete",onclick:async t=>{const e=await Ze.readAllSync();W(e)||(await Ze.updateDone(Ze.findID(t.actions.target)),Ze.data([]))},title:"Mark Complete"}];self.addEventListener("push",t=>{let e={actions:{default:"",target:"",targetType:"",types:null},body:"",subject:""};t.data!==null&&(e=t.data.json()),t.waitUntil(Ls(e))});self.addEventListener("notificationclick",t=>{t.notification.close();const e=t.notification.data;t.action===""&&t.waitUntil(self.clients.openWindow(e===null||e.actions.default===""?"/home":e.actions.default));for(let r=0;r<Tn.length;r++)if(Tn[r].action===t.action)return Tn[r].onclick(e)});
