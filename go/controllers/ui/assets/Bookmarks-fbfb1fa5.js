import{S as o,a9 as n,m as r,A as m,a0 as u,c as t,aa as g,ab as y,ac as A,I as k,ad as S,ae as v,af as T,ag as B,ah as w,ai as G,T as x,aj as C,ak as O,al as W,x as F,a as L,am as D,an as H}from"./index-09c2e996.js";import{F as j}from"./Filter-01c23926.js";import{T as E}from"./TableColumnHousehold-f6fe7c15.js";import{G as I}from"./GetHelp-610c77dd.js";function J(){const a={columns:o({name:"",link:"",home:""}),filter:o(""),search:o(""),sort:o({invert:!1,property:"name"}),tag:o(""),tags:[]},p=o.lift((e,s,f,i,d,h)=>{const l=n.filter(e,!1,f,i,h,c=>c.name.toLowerCase().includes(i)||c.link.toLowerCase().includes(i));return l.data=j.array(l.data,s,d),a.tags=l.tags,r.redraw(),l.data},n.data,a.columns,a.filter,a.search,a.sort,a.tag);function b(){return{oninit:()=>{m.getSessionDisplay()<u.Small&&a.columns({name:"",home:""})},view:e=>r("div",{style:{"align-items":"flex-start",display:"flex","flex-direction":"column"}},[e.attrs.name,r(D,{icon:k.Tag,name:t.translate(H),onclick:s=>{a.tag(a.tag()===s?"":s)},selected:()=>[a.tag()],small:!0,value:e.attrs.tags})])}}return{oninit:async()=>{m.getSessionDisplay()<u.Small&&a.columns({name:""}),m.setLayoutApp({...I("bookmarks"),breadcrumbs:[{name:t.translate(g)}],toolbarActionButtons:[y().newBookmark]}),r.route.param().filter!==void 0&&a.filter(r.route.param().filter)},view:()=>[r(L,{actions:[],data:p(),editOnclick:e=>{m.setLayoutAppForm(A,e)},filters:[{icon:k.Tag,name:t.translate(S),onclick:e=>{a.tag(a.tag()===e?"":e)},selected:()=>[a.tag()],value:a.tags}],loaded:n.isLoaded(),search:{onsearch:e=>{a.search(e)},placeholder:t.translate(v)},sort:a.sort,tableColumns:[{name:t.translate(T),property:"name",render:b,sortFormatter:e=>e.name},{checkboxOnclick:async e=>(e.home=!e.home,n.update(e)),name:t.translate(B),permitted:e=>w.permitted(G.Auth,!0,e.authHouseholdID),property:"home",type:x.Checkbox},{name:t.translate(C),property:"link"},E()],tableColumnsNameEnabled:a.columns,title:{tabs:[{active:a.filter()==="",href:"/bookmarks",name:t.translate(O)},{active:a.filter()==="personal",href:a.filter()==="personal"?"/bookmarks":"/bookmarks?filter=personal",name:t.translate(W)},{active:a.filter()==="household",href:a.filter()==="household"?"/bookmarks":"/bookmarks?filter=household",name:t.translate(F)}]}})]}}export{J as Bookmarks};
