import{V as o,dt as n,C as l,A as i,D as c,c as u,_ as s,S as y,m as p}from"./index-09c2e996.js";const t={cancel:async e=>o.delete("/api/v1/payments",{authHouseholdID:n.data().cloud?e:void 0,selfHostedID:n.data().cloud?void 0:e}).then(async d=>{if(l(d))return i.setLayoutAppAlert(d),d;n.data().cloud||await c.read(e,void 0,!0)}),createPaddle:async(e,d)=>o.create("/api/v1/payments",{authHouseholdID:n.data().cloud?e:void 0,baseURL:`${window.location.protocol}//${window.location.host}`,emailAddress:u.data().emailAddress,processor:d,selfHostedID:n.data().cloud?void 0:e}).then(async a=>l(a)?(i.setLayoutAppAlert(a),a):t.inResponsePaddleURL(a)?a.dataValue[0]:s),inResponsePaddleConfig:e=>e.dataType==="paddleConfig",inResponsePaddleURL:e=>e.dataType==="paddleURL",paddle:{planIDMonthly:0,productIDLifetime:0,sandbox:!1,vendorID:0},prices:y({lifetime:"",monthly:""}),productID:"",readPaddle:async()=>{if(t.prices().monthly==="")return new Promise(e=>{const d=document.createElement("script");d.src="https://cdn.paddle.com/paddle/paddle.js",d.onload=async()=>o.read("/api/v1/payments/paddle",{}).then(async a=>{if(l(a)){i.setLayoutAppAlert(a);return}return t.inResponsePaddleConfig(a)?(t.paddle=a.dataValue[0],t.paddle.sandbox&&Paddle.Environment.set("sandbox"),Paddle.Setup({vendor:t.paddle.vendorID}),Paddle.Product.Prices(t.paddle.planIDMonthly,r=>{t.prices({...t.prices(),monthly:r.price.net.replace(r.country,"")}),p.redraw()}),Paddle.Product.Prices(t.paddle.productIDLifetime,r=>{t.prices({...t.prices(),lifetime:r.price.net.replace(r.country,"")}),p.redraw()}),e()):(i.setLayoutAppAlert(s),e())}),document.head.appendChild(d)})},update:async(e,d)=>o.update("/api/v1/payments",{authHouseholdID:n.data().cloud?e:void 0,processor:d,selfHostedID:n.data().cloud?void 0:e}).then(a=>{if(l(a))return a})};export{t as P};
