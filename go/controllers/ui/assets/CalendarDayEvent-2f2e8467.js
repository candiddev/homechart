import{Z as s,bP as h,D as l,m as a,by as n,I as r,dS as f,c as o,cr as g,ct as S,A as c,bK as C,dC as d,aE as D,bJ as y,bL as _,bH as L,az as k,bq as b,br as I}from"./index-09c2e996.js";function E(){let m=!1;return{view:t=>{const u=s.fromString(t.attrs.event.timestampStart);u.addMinutes(t.attrs.event.travelTime);const p=s.fromString(t.attrs.event.timestampStart);p.addMinutes(t.attrs.event.travelTime+t.attrs.event.duration);const v=t.attrs.event.color>0?h.values[t.attrs.event.color]:t.attrs.event.participants.length>0&&l.findMember(t.attrs.event.participants[0]).color>0?h.values[l.findMember(t.attrs.event.participants[0]).color]:"primary";return t.attrs.loaded?a("div.CalendarDayEvent__item",{onclick:e=>{if(e.preventDefault(),t.attrs.event.recurrenceDate=t.attrs.date.toJSON(),t.attrs.event.budgetRecurrence!==void 0){c.setLayoutAppForm(D,t.attrs.event.budgetRecurrence);return}if(t.attrs.event.cookMealPlans===void 0){if(t.attrs.event.healthLogInputs!==void 0&&t.attrs.event.healthLogOutputs!==void 0){c.setLayoutAppForm(y,{authAccountID:t.attrs.event.authAccountID,date:t.attrs.date.toJSON(),logs:[...t.attrs.event.healthLogInputs,...t.attrs.event.healthLogOutputs]});return}else if(t.attrs.event.planTask!==void 0){c.setLayoutAppForm(_,t.attrs.event.planTask);return}else t.attrs.event.id===null&&(t.attrs.event.dateStart=t.attrs.date.toJSON());c.setLayoutAppForm(L,t.attrs.event)}},style:{"background-color":`var(--color_${v.toLowerCase()})`,color:`var(--color_${v.toLowerCase()}-content)`,filter:t.attrs.event.duration!==0&&s.now()>s.fromString(t.attrs.event.timestampStart)||k.now()>s.fromString(t.attrs.event.timestampStart).toCivilDate()?"var(--filter_light)":void 0}},[a("span.CalendarDayEvent__event",[a("div.CalendarDayEvent__title",[a(n,{icon:t.attrs.event.icon===void 0?r.Calendar:t.attrs.event.icon}),a(f,{value:t.attrs.event.name})]),t.attrs.event.duration!==0&&t.attrs.event.duration%(60*24)!==0&&(t.attrs.date.toJSON()===s.fromString(t.attrs.event.timestampStart).toCivilDate().toJSON()||t.attrs.date.toJSON()===p.toCivilDate().toJSON())?a("span",`${t.attrs.date.toJSON()===s.fromString(t.attrs.event.timestampStart).toCivilDate().toJSON()?u.toCivilTime().toString(o.data().preferences.formatTime24):g.fromString("00:00").toString(o.data().preferences.formatTime24)} - ${t.attrs.date.toJSON()===p.toCivilDate().toJSON()?p.toCivilTime().toString(o.data().preferences.formatTime24):g.fromString("00:00").toString(o.data().preferences.formatTime24)}`):[]]),t.attrs.event.participants.length>0||t.attrs.event.travelTime>0||t.attrs.event.location!==""||t.attrs.event.details!==""||t.attrs.event.cookMealPlans!==void 0?a("div.CalendarDayEvent__description",[t.attrs.event.participants.length===0?[]:t.attrs.event.participants.map(e=>l.findMemberName(e)===""?[]:a("p.CalendarDayEvent__participant",[a(n,{icon:r.Personal}),a("span",l.findMemberName(e))])),t.attrs.event.travelTime>0?a("p",[a(n,{icon:r.Warning}),a("span",`Leave by ${s.fromString(t.attrs.event.timestampStart).toCivilTime().toString(o.data().preferences.formatTime24)}`)]):[],t.attrs.event.location===""?[]:a("a.GlobalLink.CalendarDayEvent__location",{href:`https://www.google.com/maps/search/?api=1&query=${t.attrs.event.location}`,onclick:e=>{e.stopPropagation()},target:"_blank"},[a(n,{icon:r.Location}),a("span",t.attrs.event.location)]),t.attrs.event.details===""?[]:a("div.CalendarDayEvent__details",{onclick:e=>{e.stopPropagation(),m=!m}},[t.attrs.event.id===null?[]:a(n,{icon:m?r.UnfoldLess:r.UnfoldMore}),a("div",{class:t.attrs.event.id!==null&&m?"CalendarDayEvent__details--expand":void 0},a(f,{value:t.attrs.event.details}))]),t.attrs.event.cookMealPlans===void 0?[]:t.attrs.event.cookMealPlans.map(e=>{const i=S.findID(e.cookRecipeID);return a("div.CalendarDayEvent__extra",{onclick:()=>{c.setLayoutAppForm(C,e)}},a(n,{icon:r.CookMealPlan}),e.customRecipe===""?a(a.route.Link,{class:"GlobalLink",href:`/cook/recipes/${i.id}`},a("span",i.name)):a("span",e.customRecipe))}),t.attrs.event.healthLogInputs!==void 0&&t.attrs.event.healthLogInputs.length>0?a("div.CalendarDayEvent__extra",[a("div.CalendarDayEvent__extra--container",t.attrs.event.healthLogInputs.map(e=>{const i=d.findID(e.healthItemID);return a("div.GlobalLink",[a(n,{icon:r.HealthItemInput}),a(a.route.Link,{class:"GlobalLink",href:`/health/items?type=inputs&id=${l.findMember(e.authAccountID).id}`},a("span",i.name))])}))]):[],t.attrs.event.healthLogOutputs!==void 0&&t.attrs.event.healthLogOutputs.length>0?a("div.CalendarDayEvent__extra",[a("div.CalendarDayEvent__extra--container",t.attrs.event.healthLogOutputs.map(e=>{const i=d.findID(e.healthItemID);return a("div.GlobalLink",{class:"GlobalLink"},[a(n,{icon:r.HealthItemOutput}),a(a.route.Link,{class:"GlobalLink",href:`/health/items?type=outputs&id=${l.findMember(e.authAccountID).id}`},a("span",i.name))])}))]):[]]):[]]):a(`div.CalendarDayEvent__item.CalendarDayEvent__item--loading.${b.class(I.Pulse)}`)}}}export{E as C};
