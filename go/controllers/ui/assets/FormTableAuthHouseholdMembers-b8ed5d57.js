import{m as n,A,gG as a,ay as o,F as c,S as b,a0 as W,D as h,c as r,ah as d,ai as f,I as k,s as D,af as $,e as C,gH as R,T as S,gI as y,bP as T,gz as G,a as P,cf as E,k as U,cK as I,cL as s,f as N,en as K,gJ as O,fY as B,gK as x,q as V,r as q,t as F,u as M,i as L,dI as J,b as Y}from"./index-09c2e996.js";import{F as X}from"./Filter-01c23926.js";import{A as m}from"./AuthAccountAuthHousehold-a53b69dd.js";import{F as Z}from"./FormPermissions-29833505.js";function ee(){return{view:e=>n(c,{name:A.preferences().translations.formItemSelectCurrencyFormat,select:{disabled:!e.attrs.permitted,oninput:l=>{isNaN(parseInt(l,10))||e.attrs.oninput(parseInt(l,10))},options:[{id:`${a.AUD}`,name:`AED - ${o.toString(123456,a.AED)}`},{id:`${a.AUD}`,name:`AUD - ${o.toString(123456,a.AUD)}`},{id:`${a.BRL}`,name:`BRL - ${o.toString(123456,a.BRL)}`},{id:`${a.CAD}`,name:`CAD - ${o.toString(123456,a.CAD)}`},{id:`${a.CHF}`,name:`CHF - ${o.toString(123456,a.CHF)}`},{id:`${a.DKK}`,name:`DKK - ${o.toString(123456,a.DKK)}`},{id:`${a.EUR}`,name:`EUR - ${o.toString(123456,a.EUR)}`},{id:`${a.GBP}`,name:`GBP - ${o.toString(123456,a.GBP)}`},{id:`${a.INR}`,name:`INR - ${o.toString(123456,a.INR)}`},{id:`${a.JPY}`,name:`JPY - ${o.toString(123456,a.JPY)}`},{id:`${a.KRW}`,name:`KRW - ${o.toString(123456,a.KRW)}`},{id:`${a.MXN}`,name:`MXN - ${o.toString(123456,a.MXN)}`},{id:`${a.RUB}`,name:`RUB - ${o.toString(123456,a.RUB)}`},{id:`${a.USD}`,name:`USD - ${o.toString(123456,a.USD)}`},{id:`${a.TWD}`,name:`TWD - ${o.toString(123456,a.TWD)}`},{id:`${a.ZAR}`,name:`ZAR - ${o.toString(123456,a.ZAR)}`}],value:`${e.attrs.value}`},tooltip:A.preferences().translations.formItemSelectCurrencyFormatTooltip})}}function te(){const e={columns:b({name:"",emailAddress:"",owner:"",child:"",color:""}),form:{data:m.new(),deleteConfirm:!1,visible:!1}};if(A.getSessionDisplay()<W.Large){const i=e.columns();delete i.emailAddress,e.columns(i)}const l=b(null);let p,u=!1;return{oninit:i=>{p=b.lift((t,g,v)=>{const w=t.filter(H=>H.authHouseholdID===g);return n.redraw(),X.array(w,v,{})},h.members,l,e.columns),i.attrs.nameEmailOnly===!0&&e.columns({name:"",emailAddress:""}),l(i.attrs.authHouseholdID)},onremove:()=>{p.end(!0)},view:i=>[n(P,{actions:!r.isDemo()&&d.permitted(f.Auth,!0,i.attrs.authHouseholdID)?[{icon:k.Invite,name:r.translate(D),onclick:async()=>new Promise(t=>(e.form.data=m.new(),e.form.data.authHouseholdID=l(),e.form.visible=!0,t())),permitted:!0,primary:!0,requireOnline:!0}]:[],data:p(),editOnclick:t=>{e.form.data=t,e.form.visible=!0},filters:[],loaded:h.isLoaded(),staticColumns:!0,tableColumns:[{formatter:t=>t.name===""?t.emailAddress:t.name,name:r.translate($),noFilter:!0,property:"name"},{formatter:t=>t.child||r.isDemo()?"":t.emailAddress,name:r.translate(C),noFilter:!0,property:"emailAddress"},{formatter:t=>t.permissions.auth===0,name:r.translate(R),noFilter:!0,property:"owner",type:S.Checkbox},{formatter:t=>t.child,name:r.translate(y),noFilter:!0,property:"child",type:S.Checkbox},{formatter:t=>T.values[t.color],name:r.translate(G),noFilter:!0,property:"color"}],tableColumnsNameEnabled:e.columns}),e.form.visible?n(Y,{buttons:[{accent:!0,name:r.translate(V),onclick:async()=>new Promise(t=>(e.form.deleteConfirm=!0,t())),permitted:d.permitted(f.Auth,!0,i.attrs.authHouseholdID)&&e.form.data.id!==null&&!e.form.deleteConfirm,requireOnline:!0},{name:r.translate(q),onclick:async()=>new Promise(t=>e.form.deleteConfirm?(e.form.deleteConfirm=!1,t()):(e.form.visible=!1,t())),permitted:!0,requireOnline:!0},{name:e.form.data.id===null?r.translate(D):r.translate(F),permitted:d.permitted(f.Auth,!0,i.attrs.authHouseholdID)&&!e.form.deleteConfirm,requireOnline:!0,submit:!0},{accent:!0,name:r.translate(M),onclick:async()=>{const t=h.findMember(e.form.data.id);return t.inviteToken!==""?m.inviteDelete(t.authHouseholdID,t.inviteToken).then(async()=>{e.form.deleteConfirm=!1,e.form.visible=!1}):m.delete(i.attrs.authHouseholdID,e.form.data.id).then(async()=>{e.form.deleteConfirm=!1,e.form.visible=!1})},permitted:d.permitted(f.Auth,!0)&&e.form.deleteConfirm,requireOnline:!0}],onsubmit:async()=>e.form.data.id===null?m.inviteCreate(e.form.data).then(()=>{e.form.visible=!1}):m.update(e.form.data).then(()=>{e.form.visible=!1}),overlay:!0,title:{name:`${e.form.data.id===null?r.translate(L):r.translate(F)} ${r.translate(J)}`}},[n(c,{input:{oninput:t=>{e.form.data.name=t},type:"text",value:e.form.data.name},name:r.translate($),tooltip:r.translate(E)}),n(U,{name:r.translate(y),onclick:()=>{e.form.data.child=!e.form.data.child,e.form.data.child?(e.form.data.emailAddress="temp@homechart.app",e.form.data.permissions={...I.new(),authHousehold:s.View,budget:s.View,calendarHousehold:s.View,cook:s.View,inventory:s.View,notesHousehold:s.View,planHousehold:s.View,shop:s.View}):(e.form.data.emailAddress="",e.form.data.permissions=I.new())},value:e.form.data.child}),e.form.data.child?[]:[n(c,{input:{disabled:e.form.data.authAccountID!==null&&e.form.data.inviteToken==="",oninput:t=>{e.form.data.emailAddress=t},required:!0,type:"email",value:e.form.data.emailAddress},name:r.translate(C),tooltip:r.translate(N)})],n(K,{oninput:t=>{e.form.data.color=t},value:e.form.data.color}),e.form.data.inviteToken===""?[]:n(c,{input:{disabled:!0,oninput:()=>{},type:"email",value:e.form.data.inviteToken},name:r.translate(O),tooltip:""}),n(B,{expand:u,name:r.translate(x),onclick:()=>{u=!u}}),u?n(Z,{permissions:e.form.data.permissions}):[]]):[]]}}export{ee as F,te as a};
